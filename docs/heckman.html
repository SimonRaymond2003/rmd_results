<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Heckman Selection Model Analysis</title>

<script src="site_libs/header-attrs-2.22/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">4th Downs in the NFL</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="heckman.html">Heckman Selection</a>
</li>
<li>
  <a href="xgboost.html">XGBoost Prediction</a>
</li>
<li>
  <a href="attendance_binary.html">Attendance Impact Binary</a>
</li>
<li>
  <a href="attendance_pcts.html">Attendance Impact Percentages</a>
</li>
<li>
  <a href="attendance_totals.html">Attendance Impact Totals</a>
</li>
<li>
  <a href="thirddown.html">Third Down Analysis</a>
</li>
<li>
  <a href="attempt_ols.html">Attempts OLS</a>
</li>
<li>
  <a href="Introduction.html">Writing Introduction</a>
</li>
<li>
  <a href="Data.html">Writing Data</a>
</li>
<li>
  <a href="Methodology.html">Writing Methodology</a>
</li>
<li>
  <a href="Results.html">Writing Results</a>
</li>
<li>
  <a href="robustness_checks.html">Robustness Checks</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Heckman Selection Model Analysis</h1>

</div>


<pre class="r"><code>library(data.table)
outcome_data &lt;- fread(&quot;predict_outcome.csv.gz&quot;)
select_data &lt;- fread(&quot;predict_select.csv.gz&quot;)</code></pre>
<pre class="r"><code>select_data[, attempt := as.numeric(as.character(attempt))]</code></pre>
<pre class="r"><code># Commented out original version
# # Load required libraries
# library(data.table)
# library(xgboost)
# library(ROCR)
# library(parallel)
# 
# # Prepare the XGBoost matrices
# xs &lt;- model.matrix(~ . - 1 - attempt - my_id, data = select_data)
# y &lt;- as.numeric(as.character(select_data$attempt))
# 
# # Create parameter grid
# grid &lt;- expand.grid(
#   eta = seq(0.001, 0.1, by = 0.02),
#   max_depth = seq(5, 7, by = 2),
#   min_child_weight = seq(1, 1, by = 1),        
#   subsample = seq(0.8, 0.8, by = 0.2),
#   colsample_bytree = seq(0.8, 0.8, by = 0.2),
#   lambda = seq(1, 1, by = 1),                
#   alpha = seq(0, 0, by = 1),                  
#   gamma = seq(0, 0, by = 0.1),               
#   nrounds = seq(100, 500, by = 500)
# )
# 
# # Sample grid points
# conf_lev &lt;- .95
# num_max &lt;- 5
# n &lt;- ceiling(log(1-conf_lev)/log(1-num_max/nrow(grid)))
# ind &lt;- sample(nrow(grid), n, replace = FALSE)
# rgrid &lt;- grid[ind, ]
# 
# # Set up parallel processing
# nc &lt;- detectCores() - 1
# 
# # Validation phase
# cat(&quot;\nPhase 1: Validation Phase\n&quot;)
# n_validations &lt;- 2
# validation_results &lt;- matrix(nrow = nrow(rgrid), ncol = n_validations)
# 
# for (j in 1:nrow(rgrid)) {
#   cat(&quot;\nTesting parameter set&quot;, j, &quot;of&quot;, nrow(rgrid), &quot;\n&quot;)
#   
#   for (i in 1:n_validations) {
#     # Create validation split
#     idx &lt;- unique(sample(nrow(xs), nrow(xs), TRUE))
#     train_x &lt;- xs[idx, ]
#     train_y &lt;- y[idx]
#     val_x &lt;- xs[-idx, ]
#     val_y &lt;- y[-idx]
#     
#     # Undersample majority class in training data
#     train_idx_0 &lt;- which(train_y == 0)
#     train_idx_1 &lt;- which(train_y == 1)
#     
#     # Get number of minority class samples
#     n_minority &lt;- length(train_idx_1)
#     
#     # Randomly sample from majority class
#     train_idx_0_sampled &lt;- sample(train_idx_0, n_minority)
#     
#     # Combine indices for balanced dataset
#     balanced_idx &lt;- c(train_idx_0_sampled, train_idx_1)
#     
#     # Create balanced training dataset
#     train_x_balanced &lt;- train_x[balanced_idx, ]
#     train_y_balanced &lt;- train_y[balanced_idx]
#     
#     prm &lt;- list(
#       booster = &quot;gbtree&quot;,
#       objective = &quot;binary:logistic&quot;,
#       max_depth = rgrid[j, &quot;max_depth&quot;],
#       eta = rgrid[j, &quot;eta&quot;],
#       subsample = rgrid[j, &quot;subsample&quot;],
#       colsample_bytree = rgrid[j, &quot;colsample_bytree&quot;],
#       gamma = rgrid[j, &quot;gamma&quot;],
#       min_child_weight = rgrid[j, &quot;min_child_weight&quot;],
#       alpha = rgrid[j, &quot;alpha&quot;],
#       lambda = rgrid[j, &quot;lambda&quot;],
#       nthread = nc
#     )
#     
#     dm_train &lt;- xgb.DMatrix(data = train_x_balanced, label = train_y_balanced)
#     mdl &lt;- xgb.train(
#       params = prm,
#       data = dm_train,
#       nrounds = rgrid[j, &quot;nrounds&quot;],
#       verbose = FALSE
#     )
#     
#     p &lt;- predict(mdl, xgb.DMatrix(data = val_x))
#     pred &lt;- prediction(p, val_y)
#     validation_results[j, i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
#   }
# }
# 
# # Run 100 tests with best parameters
# cat(&quot;\nRunning X test iterations with best parameters...\n&quot;)
# test_aucs &lt;- c()
# 
# best_params_idx &lt;- which.max(rowMeans(validation_results))
# best_params &lt;- rgrid[best_params_idx,]
# 
# # Train final model with best parameters
# best_params_list &lt;- as.list(best_params[-which(names(best_params) == &quot;nrounds&quot;)])
# best_params_list$booster &lt;- &quot;gbtree&quot;
# best_params_list$objective &lt;- &quot;binary:logistic&quot;
# best_params_list$nthread &lt;- nc
# 
# for(i in 1:100) {
#   # Create test split
#   idx &lt;- unique(sample(nrow(xs), nrow(xs), T))
#   train_x &lt;- xs[idx, ]
#   train_y &lt;- y[idx]
#   test_x &lt;- xs[-idx, ]
#   test_y &lt;- y[-idx]
#   
#   # Undersample training data
#   train_idx_0 &lt;- which(train_y == 0)
#   train_idx_1 &lt;- which(train_y == 1)
#   n_minority &lt;- length(train_idx_1)
#   train_idx_0_sampled &lt;- sample(train_idx_0, n_minority)
#   balanced_idx &lt;- c(train_idx_0_sampled, train_idx_1)
#   
#   # Create balanced training dataset
#   train_x_balanced &lt;- train_x[balanced_idx, ]
#   train_y_balanced &lt;- train_y[balanced_idx]
#   
#   # Train model
#   dm_train &lt;- xgb.DMatrix(data = train_x_balanced, label = train_y_balanced)
#   mdl &lt;- xgb.train(
#     params = best_params_list,
#     data = dm_train,
#     nrounds = best_params[[&quot;nrounds&quot;]],
#     verbose = FALSE
#   )
#   
#   # Test on unbalanced test set
#   p &lt;- predict(mdl, xgb.DMatrix(data = test_x))
#   pred &lt;- prediction(p, test_y)
#   test_aucs[i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
# }
# 
# # Print results
# cat(&quot;\nTest Results over 100 iterations:\n&quot;)
# cat(&quot;Mean AUC:&quot;, mean(test_aucs), &quot;\n&quot;)
# cat(&quot;SD AUC:&quot;, sd(test_aucs), &quot;\n&quot;)
# cat(&quot;95% CI:&quot;, mean(test_aucs) - 1.96 * sd(test_aucs), 
#     &quot;to&quot;, mean(test_aucs) + 1.96 * sd(test_aucs), &quot;\n&quot;)
# 
# # Plotting AUC distribution
# plot(test_aucs, col=&quot;red&quot;, pch=20,
#      main=&quot;AUC Test Distribution&quot;,
#      xlab=&quot;Iteration&quot;, ylab=&quot;AUC&quot;)
# abline(h=mean(test_aucs), col=&quot;blue&quot;, lwd=2, lty=2)
# abline(h=mean(test_aucs) - 1.96 * sd(test_aucs), col=&quot;green&quot;, lwd=2, lty=3)
# abline(h=mean(test_aucs) + 1.96 * sd(test_aucs), col=&quot;green&quot;, lwd=2, lty=3)
# legend(&quot;bottomright&quot;, 
#        legend=c(&quot;AUC Values&quot;, &quot;Mean&quot;, &quot;95% CI Bounds&quot;),
#        col=c(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;),
#        lty=c(NA, 2, 3),
#        pch=c(20, NA, NA))
# 
# # Now train final model on full data for z scores
# final_idx_0 &lt;- which(y == 0)
# final_idx_1 &lt;- which(y == 1)
# n_minority_final &lt;- length(final_idx_1)
# final_idx_0_sampled &lt;- sample(final_idx_0, n_minority_final)
# final_balanced_idx &lt;- c(final_idx_0_sampled, final_idx_1)
# 
# # Create balanced final dataset
# xs_balanced &lt;- xs[final_balanced_idx, ]
# y_balanced &lt;- y[final_balanced_idx]
# 
# dm_full &lt;- xgb.DMatrix(data = xs_balanced, label = y_balanced)
# final_model &lt;- xgb.train(
#   params = best_params_list,
#   data = dm_full,
#   nrounds = best_params[[&quot;nrounds&quot;]],
#   verbose = FALSE
# )
# 
# # Get probability predictions (z) for ALL data
# z &lt;- predict(final_model, xgb.DMatrix(data = xs))</code></pre>
<pre class="r"><code>library(data.table)
library(xgboost)
library(ROCR)
library(parallel)

# Prepare the XGBoost matrices
xs &lt;- model.matrix(~ . - 1 - attempt - my_id, data = select_data)
y &lt;- as.numeric(as.character(select_data$attempt))


# Create parameter grid
grid &lt;- expand.grid(
  eta = seq(0.001, 0.05, by = 0.01),
  max_depth = seq(5, 5, by = 2),
  min_child_weight = seq(1, 1, by = 1),        
  subsample = seq(1, 1, by = 0.2),
  colsample_bytree = seq(1, 1, by = 0.2),
  lambda = seq(1, 1, by = 1),                
  alpha = seq(0, 0, by = 1),                  
  gamma = seq(0, 0, by = 0.1),               
  nrounds = seq(100, 250, by = 50)
)


# Sample grid points
conf_lev &lt;- .95
num_max &lt;- 5
n &lt;- ceiling(log(1-conf_lev)/log(1-num_max/nrow(grid)))
ind &lt;- sample(nrow(grid), n, replace = FALSE)
rgrid &lt;- grid[ind, ]

# Set up parallel processing
nc &lt;- detectCores() - 1

# Calculate scale_pos_weight for imbalanced dataset
scale_pos_weight &lt;- sum(y == 0) / sum(y == 1)

# Validation phase
#cat(&quot;\nPhase 1: Validation Phase\n&quot;)
n_validations &lt;- 10
validation_results &lt;- matrix(nrow = nrow(rgrid), ncol = n_validations)

for (j in 1:nrow(rgrid)) {
  #cat(&quot;\nTesting parameter set&quot;, j, &quot;of&quot;, nrow(rgrid), &quot;\n&quot;)
  
  for (i in 1:n_validations) {
    #cat(&quot;\nValidation iteration&quot;, i, &quot;of&quot;, n_validations, &quot;\n&quot;)             
    # Create validation split
    idx &lt;- unique(sample(nrow(xs), nrow(xs), TRUE))
    train_x &lt;- xs[idx, ]
    train_y &lt;- y[idx]
    val_x &lt;- xs[-idx, ]
    val_y &lt;- y[-idx]
    
    prm &lt;- list(
      booster = &quot;gbtree&quot;,
      objective = &quot;binary:logistic&quot;,
      max_depth = rgrid[j, &quot;max_depth&quot;],
      eta = rgrid[j, &quot;eta&quot;],
      subsample = rgrid[j, &quot;subsample&quot;],
      colsample_bytree = rgrid[j, &quot;colsample_bytree&quot;],
      gamma = rgrid[j, &quot;gamma&quot;],
      min_child_weight = rgrid[j, &quot;min_child_weight&quot;],
      alpha = rgrid[j, &quot;alpha&quot;],
      lambda = rgrid[j, &quot;lambda&quot;],
      scale_pos_weight = scale_pos_weight,
      nthread = nc
    )
    
    dm_train &lt;- xgb.DMatrix(data = train_x, label = train_y)
    mdl &lt;- xgb.train(
      params = prm,
      data = dm_train,
      nrounds = rgrid[j, &quot;nrounds&quot;],
      verbose = FALSE
    )
    
    p &lt;- predict(mdl, xgb.DMatrix(data = val_x))
    pred &lt;- prediction(p, val_y)
    validation_results[j, i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
  }
}

# Run 100 tests with best parameters
cat(&quot;\nRunning X test iterations with best parameters...\n&quot;)</code></pre>
<pre><code>## 
## Running X test iterations with best parameters...</code></pre>
<pre class="r"><code>test_aucs &lt;- c()

best_params_idx &lt;- which.max(rowMeans(validation_results))
best_params &lt;- rgrid[best_params_idx,]

# Train final model with best parameters
best_params_list &lt;- as.list(best_params[-which(names(best_params) == &quot;nrounds&quot;)])
best_params_list$booster &lt;- &quot;gbtree&quot;
best_params_list$objective &lt;- &quot;binary:logistic&quot;
best_params_list$scale_pos_weight &lt;- scale_pos_weight
best_params_list$nthread &lt;- nc

for(i in 1:50) {
  # Create test split
  idx &lt;- unique(sample(nrow(xs), nrow(xs), T))
  train_x &lt;- xs[idx, ]
  train_y &lt;- y[idx]
  test_x &lt;- xs[-idx, ]
  test_y &lt;- y[-idx]
  
  # Train model on full unbalanced dataset
  dm_train &lt;- xgb.DMatrix(data = train_x, label = train_y)
  mdl &lt;- xgb.train(
    params = best_params_list,
    data = dm_train,
    nrounds = best_params[[&quot;nrounds&quot;]],
    verbose = FALSE
  )
  
  # Test on unbalanced test set
  p &lt;- predict(mdl, xgb.DMatrix(data = test_x))
  pred &lt;- prediction(p, test_y)
  test_aucs[i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
}
# Print results
cat(&quot;\nTest Results over 100 iterations:\n&quot;)</code></pre>
<pre><code>## 
## Test Results over 100 iterations:</code></pre>
<pre class="r"><code>cat(&quot;Mean AUC:&quot;, mean(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## Mean AUC: 0.887089</code></pre>
<pre class="r"><code>cat(&quot;SD AUC:&quot;, sd(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## SD AUC: 0.002732889</code></pre>
<pre class="r"><code>cat(&quot;95% CI:&quot;, mean(test_aucs) - 1.96 * sd(test_aucs), 
    &quot;to&quot;, mean(test_aucs) + 1.96 * sd(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## 95% CI: 0.8817326 to 0.8924455</code></pre>
<pre class="r"><code># Plotting AUC distribution
plot(test_aucs, col=&quot;red&quot;, pch=20,
     main=&quot;AUC Test Distribution&quot;,
     xlab=&quot;Iteration&quot;, ylab=&quot;AUC&quot;)
abline(h=mean(test_aucs), col=&quot;blue&quot;, lwd=2, lty=2)  # Add this line to show mean
abline(h=mean(test_aucs) - 1.96 * sd(test_aucs), col=&quot;green&quot;, lwd=2, lty=3)
abline(h=mean(test_aucs) + 1.96 * sd(test_aucs), col=&quot;green&quot;, lwd=2, lty=3)
legend(&quot;bottomright&quot;, 
       legend=c(&quot;AUC Values&quot;, &quot;Mean&quot;, &quot;95% CI Bounds&quot;),
       col=c(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;),
       lty=c(NA, 2, 3),
       pch=c(20, NA, NA))</code></pre>
<p><img src="heckman_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code># Now train final model on full data for z scores
dm_full &lt;- xgb.DMatrix(data = xs, label = y)
final_model &lt;- xgb.train(
  params = best_params_list,
  data = dm_full,
  nrounds = best_params[[&quot;nrounds&quot;]],
  verbose = FALSE
)

# Get probability predictions (z) for ALL data
z &lt;- predict(final_model, xgb.DMatrix(data = xs))</code></pre>
<pre class="r"><code># Calculate residuals for XGBoost predictions
y &lt;- as.numeric(as.character(select_data$attempt))
residuals &lt;- y - z

# Histogram of residuals
hist(residuals, main=&quot;Distribution of XGBoost Model Residuals&quot;, xlab=&quot;Residual&quot;, breaks=100)</code></pre>
<p><img src="heckman_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code># plot out the z values\
plot(density(z), 
     main = &quot;Density of Z Predictions&quot;,
     xlab = &quot;Predicted Probability of Attempt&quot;,
     ylab = &quot;Density&quot;)</code></pre>
<p><img src="heckman_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code># Calculate GIMR (lambda) This is Generalized inverse mills ratio
GIMR &lt;- dnorm(qnorm(z)) / (1 - pnorm(qnorm(z)))

# Add GIMR to the data
select_data[, GIMR := GIMR]

# Print variable importa</code></pre>
<pre class="r"><code># Create a data.table with just my_id and GIMR from select_data
GIMR_dt &lt;- data.table(my_id = select_data$my_id, GIMR = GIMR)

# Add GIMR to outcome_data by matching on my_id
outcome_data[GIMR_dt, GIMR := i.GIMR, on = &quot;my_id&quot;]</code></pre>
<pre class="r"><code>#remove columns to prevent perfect colinearity
outcome_data &lt;- outcome_data[, my_id := NULL]
outcome_data[, yardline_31_40 := NULL]
outcome_data[, year2022_team_CLE := NULL] # tied for most attempts with 31</code></pre>
<pre class="r"><code>outcome_data[, conversion := as.numeric(as.character(conversion))]
# Then run OLS with GIMR correction
ols_model &lt;- lm(conversion ~  ., data = outcome_data)</code></pre>
<pre class="r"><code>library(sandwich)
library(lmtest)

# Get HC0-adjusted t-values and p-values
robust_test &lt;- coeftest(ols_model, vcov = vcovHC(ols_model, type = &quot;HC0&quot;))
t_stats &lt;- robust_test[, &quot;t value&quot;]
p_values &lt;- robust_test[, &quot;Pr(&gt;|t|)&quot;]

# Function to add significance stars
get_stars &lt;- function(p) {
    if (p &lt;= 0.01) return(&quot;***&quot;)
    if (p &lt;= 0.05) return(&quot;**&quot;)
    if (p &lt;= 0.1) return(&quot;*&quot;)
    if (p &lt;= 0.15) return(&quot;.&quot;)
    return(&quot;&quot;)
}

# Maximum width for variable names
name_width &lt;- 60

# Print header with alignment
cat(sprintf(&quot;%-*s  %10s  %10s  %4s\n&quot;, name_width, &quot;Variable&quot;, &quot;t-value&quot;, &quot;p-value&quot;, &quot;sig&quot;))</code></pre>
<pre><code>## Variable                                                         t-value     p-value   sig</code></pre>
<pre class="r"><code>cat(sprintf(&quot;%-*s  %10s  %10s  %4s\n&quot;, name_width, &quot;---------&quot;, &quot;-------&quot;, &quot;-------&quot;, &quot;----&quot;))</code></pre>
<pre><code>## ---------                                                        -------     -------  ----</code></pre>
<pre class="r"><code># Loop through and print values
for (i in 1:length(t_stats)) {
    var_name &lt;- rownames(robust_test)[i]
    # Truncate name if too long
    if (nchar(var_name) &gt; name_width) {
        var_name &lt;- paste0(substr(var_name, 1, name_width-3), &quot;...&quot;)
    }
    cat(sprintf(&quot;%-*s  %10.4f  %10.4f  %4s\n&quot;, 
                name_width, var_name, 
                t_stats[i], p_values[i],
                get_stars(p_values[i])))
}</code></pre>
<pre><code>## (Intercept)                                                      -0.6928      0.4885      
## ydstogo                                                         -12.9485      0.0000   ***
## posteam_timeouts_remaining                                        0.7827      0.4338      
## defteam_timeouts_remaining                                        0.7661      0.4437      
## rush_attempt                                                      6.8828      0.0000   ***
## week                                                              0.8289      0.4072      
## temp                                                             -0.6775      0.4981      
## wind                                                              0.7444      0.4567      
## vegas_wp                                                          1.4890      0.1366     .
## total_line                                                        2.0850      0.0371    **
## prep_days                                                         1.1010      0.2710      
## overall_win_pct                                                   0.2203      0.8257      
## team_win_pct                                                      1.1681      0.2428      
## prev_win_pct                                                     -2.6781      0.0074   ***
## prev_shotgun_rate                                                 0.5853      0.5584      
## prev_singleback_rate                                              1.0269      0.3046      
## prev_empty_rate                                                   1.0193      0.3082      
## prev_iform_rate                                                   0.3030      0.7619      
## prev_shotgun_success                                              0.2366      0.8130      
## prev_singleback_success                                           0.1487      0.8818      
## prev_empty_success                                                0.6475      0.5174      
## prev_iform_success                                                2.0662      0.0389    **
## prev_stop_rate_run                                                0.1008      0.9197      
## prev_stop_rate_pass                                              -3.2174      0.0013   ***
## shotgun_rate                                                      1.0962      0.2731      
## singleback_rate                                                   0.3284      0.7426      
## empty_rate                                                       -0.1327      0.8944      
## iform_rate                                                       -1.5593      0.1190     .
## shotgun_success                                                  -2.2275      0.0260    **
## singleback_success                                               -1.0101      0.3125      
## empty_success                                                    -0.5614      0.5746      
## iform_success                                                    -1.6046      0.1087     .
## def_stop_rate_run                                                 1.5309      0.1259     .
## def_stop_rate_pass                                               -0.6394      0.5226      
## avg_pass_rushers                                                 -0.8969      0.3698      
## avg_box_defenders                                                -0.6387      0.5231      
## cover0_rate                                                      -0.4075      0.6836      
## cover1_rate                                                      -0.3640      0.7159      
## cover2_rate                                                      -0.2818      0.7781      
## cover3_rate                                                       1.5975      0.1102     .
## cover4_rate                                                       0.9302      0.3523      
## cover6_rate                                                      -0.2805      0.7791      
## two_man_rate                                                      1.1715      0.2415      
## prevent_rate                                                      2.6238      0.0087   ***
## attendance_raw                                                   -0.9533      0.3405      
## roof_outdoors                                                     0.0233      0.9814      
## posteam_type_home                                                -1.7302      0.0837     *
## offense_formation_EMPTY                                           0.5634      0.5732      
## offense_formation_SHOTGUN                                         0.1091      0.9131      
## offense_formation_SINGLEBACK                                      0.1054      0.9161      
## offense_formation_I_FORM                                         -0.1929      0.8470      
## offense_player_1_present                                          2.5450      0.0110    **
## offense_player_2_present                                         -1.1723      0.2412      
## offense_player_4_present                                          0.4148      0.6783      
## offense_player_5_present                                         -0.0318      0.9747      
## offense_player_6_present                                         -0.6423      0.5207      
## offense_player_8_present                                         -0.1033      0.9178      
## offense_player_9_present                                         -1.7354      0.0828     *
## offense_player_10_present                                        -0.8711      0.3838      
## offense_player_11_present                                        -0.3020      0.7627      
## offense_player_12_present                                         2.4314      0.0151    **
## offense_player_14_present                                        -0.7083      0.4788      
## offense_player_15_present                                        -0.9844      0.3250      
## offense_player_16_present                                        -0.7166      0.4736      
## offense_player_17_present                                        -0.3237      0.7461      
## offense_player_20_present                                         0.5981      0.5498      
## offense_player_22_present                                        -0.8654      0.3869      
## offense_player_23_present                                         1.2210      0.2222      
## offense_player_24_present                                        -5.4852      0.0000   ***
## offense_player_1_rushing_grades_grades_run_12w                   -0.0542      0.9568      
## offense_player_1_passing_depth_short_grades_pass_12w              0.9550      0.3396      
## offense_player_4_rushing_grades_ypa_12w                           0.8888      0.3741      
## offense_player_8_receiving_depth_short_caught_percent_12w        -0.9298      0.3525      
## offense_player_8_run_blocking_gap_grades_run_block_12w           -0.7962      0.4260      
## offense_player_9_receiving_depth_short_caught_percent_12w        -0.5105      0.6097      
## offense_player_9_run_blocking_gap_grades_run_block_12w            1.8425      0.0655     *
## offense_player_10_receiving_depth_short_caught_percent_12w        0.0996      0.9206      
## offense_player_10_run_blocking_gap_grades_run_block_12w           1.5216      0.1282     .
## offense_player_14_blocking_grades_grades_run_block_2w             2.0224      0.0432    **
## offense_player_15_blocking_grades_grades_run_block_2w             0.7793      0.4359      
## offense_player_17_blocking_grades_grades_offense_12w              0.9091      0.3633      
## offense_player_18_blocking_grades_grades_offense_12w             -0.8459      0.3977      
## offense_player_19_blocking_grades_grades_offense_12w             -0.5878      0.5567      
## offense_player_20_blocking_grades_grades_offense_12w             -0.3438      0.7310      
## offense_player_21_blocking_grades_grades_offense_12w             -0.2559      0.7981      
## defense_player_1_present                                         -1.0063      0.3143      
## defense_player_2_present                                          2.9671      0.0030   ***
## defense_player_3_present                                          0.6672      0.5047      
## defense_player_4_present                                          1.4582      0.1449     .
## defense_player_5_present                                         -0.3621      0.7173      
## defense_player_6_present                                         -1.1358      0.2561      
## defense_player_9_present                                          0.6052      0.5451      
## defense_player_10_present                                        -0.5534      0.5800      
## defense_player_11_present                                         1.0204      0.3076      
## defense_player_12_present                                        -0.0864      0.9312      
## defense_player_13_present                                         2.3623      0.0182    **
## defense_player_14_present                                         0.7475      0.4548      
## defense_player_15_present                                         1.9232      0.0545     *
## defense_player_16_present                                         1.1183      0.2635      
## defense_player_17_present                                        -1.8726      0.0612     *
## defense_player_18_present                                         1.5732      0.1158     .
## defense_player_19_present                                         0.3518      0.7250      
## defense_player_20_present                                        -1.6178      0.1058     .
## defense_player_21_present                                         1.2438      0.2137      
## defense_player_22_present                                         2.2034      0.0276    **
## defense_player_23_present                                         1.5816      0.1138     .
## defense_player_1_pass_rush_grades_grades_pass_rush_defens...      1.2684      0.2047      
## defense_player_1_run_defense_grades_run_stop_opp_12w             -2.2336      0.0256    **
## defense_player_2_pass_rush_grades_grades_pass_rush_defens...     -2.3660      0.0180    **
## defense_player_2_run_defense_grades_run_stop_opp_12w              0.7026      0.4823      
## defense_player_3_pass_rush_grades_grades_pass_rush_defens...     -0.7044      0.4812      
## defense_player_3_run_defense_grades_run_stop_opp_12w              2.0564      0.0398    **
## defense_player_4_pass_rush_grades_grades_pass_rush_defens...     -2.4044      0.0162    **
## defense_player_4_run_defense_grades_run_stop_opp_12w              0.6928      0.4885      
## defense_player_9_pass_rush_grades_grades_pass_rush_defens...     -1.4034      0.1606      
## defense_player_9_run_defense_grades_run_stop_opp_12w              0.0291      0.9768      
## defense_player_9_coverage_grades_grades_coverage_defense_12w      1.1994      0.2304      
## defense_player_10_pass_rush_grades_grades_pass_rush_defen...     -0.6198      0.5354      
## defense_player_10_run_defense_grades_run_stop_opp_12w             0.6127      0.5401      
## defense_player_10_coverage_grades_grades_coverage_defense...      0.8730      0.3827      
## defense_player_11_pass_rush_grades_grades_pass_rush_defen...     -0.3067      0.7591      
## defense_player_11_run_defense_grades_run_stop_opp_12w             0.7610      0.4467      
## defense_player_11_coverage_grades_grades_coverage_defense...     -1.3530      0.1761      
## defense_player_12_pass_rush_grades_grades_pass_rush_defen...     -0.4464      0.6553      
## defense_player_12_run_defense_grades_run_stop_opp_12w            -0.7298      0.4655      
## defense_player_12_coverage_grades_grades_coverage_defense...      1.0543      0.2918      
## defense_player_15_coverage_grades_grades_defense_12w             -2.0351      0.0419    **
## defense_player_15_defensive_grades_grades_defense_penalty...     -0.3881      0.6980      
## defense_player_16_coverage_grades_grades_defense_12w             -1.1564      0.2476      
## defense_player_16_defensive_grades_grades_defense_penalty...     -0.1112      0.9114      
## defense_player_17_coverage_grades_grades_defense_12w              0.8637      0.3878      
## defense_player_17_defensive_grades_grades_defense_penalty...      1.1086      0.2677      
## defense_player_20_coverage_schemes_zone_grades_coverage_d...      1.5007      0.1335     .
## defense_player_20_coverage_grades_grades_defense_penalty_12w      0.7550      0.4503      
## defense_player_21_coverage_schemes_zone_grades_coverage_d...      0.8702      0.3842      
## defense_player_21_coverage_grades_grades_defense_penalty_12w     -1.6426      0.1005     .
## defense_player_22_coverage_schemes_zone_grades_coverage_d...     -0.9175      0.3589      
## defense_player_22_coverage_grades_grades_defense_penalty_12w     -0.6972      0.4857      
## starter_offense_player_1_rushing_grades_grades_run_12w           -0.6746      0.5000      
## starter_offense_player_1_passing_depth_short_grades_pass_12w      0.9178      0.3588      
## starter_offense_player_4_rushing_grades_ypa_12w                   0.7664      0.4435      
## starter_offense_player_8_receiving_depth_short_caught_per...      1.1327      0.2574      
## starter_offense_player_8_run_blocking_gap_grades_run_bloc...     -0.6161      0.5378      
## starter_offense_player_9_receiving_depth_short_caught_per...      1.1178      0.2637      
## starter_offense_player_9_run_blocking_gap_grades_run_bloc...     -0.2636      0.7921      
## starter_offense_player_10_receiving_depth_short_caught_pe...      0.1586      0.8740      
## starter_offense_player_10_run_blocking_gap_grades_run_blo...     -0.2516      0.8014      
## starter_offense_player_14_blocking_grades_grades_run_bloc...      0.2959      0.7673      
## starter_offense_player_15_blocking_grades_grades_run_bloc...     -0.0401      0.9680      
## starter_offense_player_17_blocking_grades_grades_offense_12w      1.9407      0.0524     *
## starter_offense_player_18_blocking_grades_grades_offense_12w     -1.5240      0.1276     .
## starter_offense_player_19_blocking_grades_grades_offense_12w     -0.2193      0.8264      
## starter_offense_player_20_blocking_grades_grades_offense_12w      0.5907      0.5548      
## starter_offense_player_21_blocking_grades_grades_offense_12w     -1.4338      0.1517      
## starter_defense_player_1_pass_rush_grades_grades_pass_rus...     -1.0518      0.2930      
## starter_defense_player_1_run_defense_grades_run_stop_opp_12w      0.0065      0.9948      
## starter_defense_player_2_pass_rush_grades_grades_pass_rus...      0.1468      0.8833      
## starter_defense_player_2_run_defense_grades_run_stop_opp_12w      1.8156      0.0695     *
## starter_defense_player_3_pass_rush_grades_grades_pass_rus...     -0.1720      0.8635      
## starter_defense_player_3_run_defense_grades_run_stop_opp_12w     -0.1414      0.8876      
## starter_defense_player_4_pass_rush_grades_grades_pass_rus...      0.0524      0.9582      
## starter_defense_player_4_run_defense_grades_run_stop_opp_12w      0.4724      0.6366      
## starter_defense_player_9_pass_rush_grades_grades_pass_rus...     -0.8214      0.4115      
## starter_defense_player_9_run_defense_grades_run_stop_opp_12w     -1.8428      0.0654     *
## starter_defense_player_9_coverage_grades_grades_coverage_...     -0.4707      0.6379      
## starter_defense_player_10_pass_rush_grades_grades_pass_ru...      1.0901      0.2757      
## starter_defense_player_10_run_defense_grades_run_stop_opp...      0.5106      0.6097      
## starter_defense_player_10_coverage_grades_grades_coverage...      0.8769      0.3806      
## starter_defense_player_11_pass_rush_grades_grades_pass_ru...     -0.9767      0.3288      
## starter_defense_player_11_run_defense_grades_run_stop_opp...     -1.3827      0.1669      
## starter_defense_player_11_coverage_grades_grades_coverage...     -0.4455      0.6559      
## starter_defense_player_12_pass_rush_grades_grades_pass_ru...      0.1224      0.9026      
## starter_defense_player_12_run_defense_grades_run_stop_opp...      1.4336      0.1518      
## starter_defense_player_12_coverage_grades_grades_coverage...      0.5150      0.6066      
## starter_defense_player_15_coverage_grades_grades_defense_12w      1.3857      0.1659      
## starter_defense_player_15_defensive_grades_grades_defense...     -1.1919      0.2334      
## starter_defense_player_16_coverage_grades_grades_defense_12w      1.0702      0.2846      
## starter_defense_player_16_defensive_grades_grades_defense...     -1.2843      0.1991      
## starter_defense_player_17_coverage_grades_grades_defense_12w      1.7117      0.0870     *
## starter_defense_player_17_defensive_grades_grades_defense...     -2.0582      0.0396    **
## starter_defense_player_20_coverage_schemes_zone_grades_co...      1.7094      0.0875     *
## starter_defense_player_20_coverage_grades_grades_defense_...     -1.9801      0.0478    **
## starter_defense_player_21_coverage_schemes_zone_grades_co...      0.8756      0.3813      
## starter_defense_player_21_coverage_grades_grades_defense_...      1.5774      0.1148     .
## starter_defense_player_22_coverage_schemes_zone_grades_co...      1.0864      0.2774      
## starter_defense_player_22_coverage_grades_grades_defense_...     -1.7834      0.0746     *
## yardline_1_10                                                    -1.9952      0.0461    **
## yardline_11_20                                                    0.5079      0.6116      
## yardline_21_30                                                    0.3070      0.7589      
## yardline_41_50                                                    1.9310      0.0536     *
## yardline_51_60                                                    0.8899      0.3736      
## yardline_61_70                                                    1.6170      0.1060     .
## yardline_71_80                                                    1.7177      0.0859     *
## yardline_81_90                                                    2.5331      0.0113    **
## yardline_91_100                                                   0.6214      0.5344      
## year2017_team_ARI                                                -0.0042      0.9967      
## year2017_team_BUF                                                -0.6526      0.5140      
## year2017_team_CHI                                                 0.0725      0.9422      
## year2017_team_CLE                                                 0.5158      0.6060      
## year2017_team_DAL                                                -0.9816      0.3263      
## year2017_team_DET                                                -0.6112      0.5411      
## year2017_team_GB                                                  1.9467      0.0517     *
## year2017_team_HOU                                                 1.3815      0.1672      
## year2017_team_MIA                                                -1.0183      0.3086      
## year2017_team_MIN                                                -0.5208      0.6026      
## year2017_team_NE                                                  0.0412      0.9671      
## year2017_team_SF                                                  1.6882      0.0915     *
## year2017_team_BAL                                                 0.3955      0.6925      
## year2017_team_DEN                                                -0.0353      0.9718      
## year2017_team_LA                                                  0.4545      0.6495      
## year2017_team_NYG                                                -0.4357      0.6631      
## year2017_team_OAK                                                -0.5330      0.5940      
## year2017_team_SEA                                                 0.8977      0.3694      
## year2017_team_CAR                                                 0.2588      0.7958      
## year2017_team_CIN                                                 0.6770      0.4984      
## year2017_team_IND                                                 0.7054      0.4806      
## year2017_team_NO                                                  0.5457      0.5853      
## year2017_team_PHI                                                 0.5634      0.5732      
## year2017_team_PIT                                                -0.8614      0.3891      
## year2017_team_TEN                                                 0.3495      0.7268      
## year2017_team_WAS                                                 0.3439      0.7309      
## year2017_team_KC                                                  1.7923      0.0732     *
## year2017_team_LAC                                                 0.1690      0.8658      
## year2017_team_NYJ                                                 0.4342      0.6642      
## year2017_team_TB                                                 -0.1477      0.8826      
## year2017_team_ATL                                                -0.1857      0.8527      
## year2017_team_JAX                                                 0.1323      0.8947      
## year2018_team_ARI                                                 0.3903      0.6963      
## year2018_team_BAL                                                 0.3918      0.6952      
## year2018_team_CAR                                                -0.1032      0.9178      
## year2018_team_CLE                                                -0.6185      0.5363      
## year2018_team_DET                                                 0.9409      0.3468      
## year2018_team_HOU                                                 1.3504      0.1770      
## year2018_team_IND                                                -0.7087      0.4786      
## year2018_team_KC                                                  0.4682      0.6396      
## year2018_team_NYG                                                 0.6973      0.4857      
## year2018_team_OAK                                                -0.7031      0.4820      
## year2018_team_PHI                                                 0.6936      0.4880      
## year2018_team_SEA                                                -0.3779      0.7055      
## year2018_team_BUF                                                -0.5399      0.5893      
## year2018_team_CHI                                                -0.5604      0.5752      
## year2018_team_CIN                                                -0.7038      0.4816      
## year2018_team_DAL                                                -0.3084      0.7578      
## year2018_team_DEN                                                 0.0884      0.9296      
## year2018_team_GB                                                 -0.1845      0.8536      
## year2018_team_LAC                                                -0.1273      0.8987      
## year2018_team_NE                                                 -0.2000      0.8415      
## year2018_team_NO                                                  0.8868      0.3752      
## year2018_team_PIT                                                 0.4914      0.6232      
## year2018_team_SF                                                 -0.2621      0.7932      
## year2018_team_MIA                                                 0.8694      0.3847      
## year2018_team_MIN                                                 0.0666      0.9469      
## year2018_team_NYJ                                                 0.1124      0.9105      
## year2018_team_TB                                                  0.1761      0.8603      
## year2018_team_ATL                                                 0.0012      0.9990      
## year2018_team_JAX                                                 0.6326      0.5270      
## year2018_team_LA                                                 -0.5811      0.5612      
## year2018_team_TEN                                                 1.1383      0.2551      
## year2018_team_WAS                                                 0.2389      0.8112      
## year2019_team_ARI                                                -0.8051      0.4208      
## year2019_team_BUF                                                -0.1014      0.9192      
## year2019_team_CHI                                                 0.3222      0.7473      
## year2019_team_CLE                                                 0.7438      0.4570      
## year2019_team_DAL                                                -0.2296      0.8184      
## year2019_team_IND                                                -0.4559      0.6485      
## year2019_team_JAX                                                 0.4792      0.6318      
## year2019_team_KC                                                 -0.0609      0.9515      
## year2019_team_LAC                                                -0.9496      0.3424      
## year2019_team_MIN                                                -0.1416      0.8874      
## year2019_team_NE                                                  0.0092      0.9927      
## year2019_team_NO                                                 -1.4554      0.1457     .
## year2019_team_PHI                                                 0.2106      0.8332      
## year2019_team_SEA                                                -0.4730      0.6363      
## year2019_team_SF                                                 -0.4110      0.6811      
## year2019_team_TB                                                 -1.0216      0.3071      
## year2019_team_BAL                                                -0.4163      0.6772      
## year2019_team_CAR                                                -0.3721      0.7098      
## year2019_team_DEN                                                 0.3976      0.6909      
## year2019_team_DET                                                -0.9860      0.3242      
## year2019_team_HOU                                                 0.2886      0.7729      
## year2019_team_LA                                                 -0.3924      0.6948      
## year2019_team_MIA                                                -0.9344      0.3501      
## year2019_team_NYG                                                -1.0430      0.2970      
## year2019_team_NYJ                                                -1.8694      0.0616     *
## year2019_team_OAK                                                -0.5694      0.5691      
## year2019_team_PIT                                                -1.4270      0.1537      
## year2019_team_TEN                                                -1.0605      0.2890      
## year2019_team_CIN                                                 0.7533      0.4513      
## year2019_team_WAS                                                 0.3619      0.7175      
## year2019_team_ATL                                                -0.0733      0.9416      
## year2019_team_GB                                                 -0.9055      0.3653      
## year2020_team_ATL                                                 0.0297      0.9763      
## year2020_team_BAL                                                 0.7050      0.4809      
## year2020_team_BUF                                                 0.1336      0.8937      
## year2020_team_CAR                                                 0.4658      0.6414      
## year2020_team_CIN                                                 0.4624      0.6438      
## year2020_team_DEN                                                -0.4104      0.6815      
## year2020_team_DET                                                -0.9715      0.3314      
## year2020_team_JAX                                                -0.6959      0.4865      
## year2020_team_KC                                                  0.3861      0.6994      
## year2020_team_LA                                                 -1.0520      0.2929      
## year2020_team_MIN                                                 0.8731      0.3827      
## year2020_team_NE                                                 -0.0302      0.9759      
## year2020_team_NO                                                  0.1986      0.8426      
## year2020_team_NYG                                                 0.1226      0.9025      
## year2020_team_SF                                                  0.4452      0.6562      
## year2020_team_WAS                                                 0.3538      0.7235      
## year2020_team_CHI                                                 0.4529      0.6506      
## year2020_team_DAL                                                -0.0410      0.9673      
## year2020_team_GB                                                  0.0528      0.9579      
## year2020_team_HOU                                                -0.3417      0.7326      
## year2020_team_MIA                                                -0.9968      0.3189      
## year2020_team_NYJ                                                -0.0956      0.9238      
## year2020_team_TB                                                  0.4668      0.6407      
## year2020_team_TEN                                                -0.4102      0.6817      
## year2020_team_ARI                                                 0.6407      0.5218      
## year2020_team_CLE                                                -1.2092      0.2266      
## year2020_team_IND                                                -0.6498      0.5159      
## year2020_team_LAC                                                 0.3806      0.7036      
## year2020_team_PHI                                                 0.6858      0.4929      
## year2020_team_SEA                                                -0.3272      0.7435      
## year2020_team_LV                                                 -0.8463      0.3974      
## year2020_team_PIT                                                -0.2575      0.7968      
## year2021_team_ATL                                                -0.5824      0.5603      
## year2021_team_BUF                                                -0.0635      0.9494      
## year2021_team_CIN                                                -1.9255      0.0542     *
## year2021_team_DAL                                                -0.7229      0.4698      
## year2021_team_DEN                                                 0.6552      0.5124      
## year2021_team_DET                                                -0.5393      0.5897      
## year2021_team_KC                                                  0.3804      0.7037      
## year2021_team_LA                                                 -0.0846      0.9326      
## year2021_team_LV                                                  0.3910      0.6958      
## year2021_team_MIN                                                -0.2742      0.7839      
## year2021_team_NE                                                  0.2308      0.8175      
## year2021_team_NO                                                 -0.8657      0.3867      
## year2021_team_NYG                                                 0.4452      0.6562      
## year2021_team_SF                                                 -0.0166      0.9868      
## year2021_team_TEN                                                -1.0283      0.3039      
## year2021_team_ARI                                                 0.8820      0.3778      
## year2021_team_BAL                                                 0.7073      0.4794      
## year2021_team_CAR                                                -0.0773      0.9384      
## year2021_team_CHI                                                -1.7523      0.0798     *
## year2021_team_GB                                                  0.4105      0.6815      
## year2021_team_IND                                                -0.6275      0.5304      
## year2021_team_LAC                                                 0.0591      0.9529      
## year2021_team_MIA                                                -0.0230      0.9816      
## year2021_team_NYJ                                                -0.2823      0.7777      
## year2021_team_PHI                                                -0.3452      0.7300      
## year2021_team_SEA                                                -0.9210      0.3571      
## year2021_team_TB                                                 -0.1343      0.8932      
## year2021_team_WAS                                                 0.0621      0.9504      
## year2021_team_CLE                                                -0.9520      0.3412      
## year2021_team_HOU                                                -0.9342      0.3503      
## year2021_team_JAX                                                -0.4118      0.6805      
## year2021_team_PIT                                                 0.4717      0.6372      
## year2022_team_ARI                                                -1.5507      0.1211     .
## year2022_team_ATL                                                -1.7692      0.0769     *
## year2022_team_CAR                                                 0.6225      0.5336      
## year2022_team_CHI                                                 0.1093      0.9130      
## year2022_team_CIN                                                -0.0704      0.9439      
## year2022_team_HOU                                                 0.3701      0.7113      
## year2022_team_IND                                                -0.1767      0.8598      
## year2022_team_LAC                                                -0.5902      0.5551      
## year2022_team_MIA                                                -0.8034      0.4218      
## year2022_team_SEA                                                -0.4943      0.6211      
## year2022_team_TB                                                 -0.1843      0.8538      
## year2022_team_TEN                                                 0.8542      0.3931      
## year2022_team_WAS                                                 0.6063      0.5444      
## year2022_team_BAL                                                -1.8272      0.0678     *
## year2022_team_BUF                                                 0.7043      0.4813      
## year2022_team_DAL                                                 0.0282      0.9775      
## year2022_team_DET                                                -0.4208      0.6739      
## year2022_team_GB                                                 -1.1349      0.2565      
## year2022_team_JAX                                                -1.2434      0.2138      
## year2022_team_KC                                                 -1.0064      0.3143      
## year2022_team_LA                                                  0.9534      0.3405      
## year2022_team_LV                                                  1.2741      0.2027      
## year2022_team_NO                                                 -0.6729      0.5010      
## year2022_team_PHI                                                 0.6294      0.5291      
## year2022_team_PIT                                                 1.0931      0.2744      
## year2022_team_DEN                                                 0.6896      0.4905      
## year2022_team_MIN                                                -1.0013      0.3167      
## year2022_team_NE                                                  0.2117      0.8323      
## year2022_team_NYJ                                                -0.5576      0.5772      
## year2022_team_NYG                                                -0.1250      0.9006      
## year2022_team_SF                                                 -0.7217      0.4705      
## year2023_team_BAL                                                -0.7199      0.4716      
## year2023_team_CHI                                                -1.3146      0.1887      
## year2023_team_CLE                                                -1.3715      0.1703      
## year2023_team_GB                                                  0.2734      0.7846      
## year2023_team_IND                                                 0.2894      0.7723      
## year2023_team_KC                                                  0.3946      0.6932      
## year2023_team_LAC                                                 0.4853      0.6275      
## year2023_team_LV                                                  0.0647      0.9484      
## year2023_team_MIA                                                 0.2120      0.8321      
## year2023_team_MIN                                                 0.8005      0.4235      
## year2023_team_NO                                                 -0.4792      0.6318      
## year2023_team_NYG                                                 0.8904      0.3733      
## year2023_team_SEA                                                -0.8811      0.3783      
## year2023_team_SF                                                 -0.3492      0.7270      
## year2023_team_WAS                                                 1.1196      0.2630      
## year2023_team_ATL                                                -0.0549      0.9562      
## year2023_team_BUF                                                -0.6057      0.5447      
## year2023_team_CAR                                                -0.1531      0.8783      
## year2023_team_DAL                                                 0.3387      0.7349      
## year2023_team_DEN                                                -0.0593      0.9527      
## year2023_team_HOU                                                -0.2588      0.7958      
## year2023_team_LA                                                  0.3017      0.7629      
## year2023_team_NE                                                  0.4186      0.6755      
## year2023_team_PHI                                                 0.2151      0.8297      
## year2023_team_PIT                                                -0.3363      0.7367      
## year2023_team_TEN                                                -0.4247      0.6711      
## year2023_team_ARI                                                -1.7301      0.0837     *
## year2023_team_CIN                                                -1.5127      0.1304     .
## year2023_team_DET                                                 0.7673      0.4429      
## year2023_team_TB                                                  0.4631      0.6433      
## year2023_team_JAX                                                -1.3677      0.1715      
## year2023_team_NYJ                                                 1.6758      0.0939     *
## is_first_half                                                    -0.6427      0.5204      
## time_in_half                                                      1.9336      0.0532     *
## attendance_pct                                                    0.9842      0.3251      
## home_attendance                                                  -0.5033      0.6148      
## GIMR                                                              2.1378      0.0326    **</code></pre>
<pre class="r"><code>cat(&quot;\nSignificance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15&quot;)</code></pre>
<pre><code>## 
## Significance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15</code></pre>
<pre class="r"><code># Create a copy of outcome_data without GIMR
outcome_data_no_gimr &lt;- copy(outcome_data)
outcome_data_no_gimr[, GIMR := NULL]
outcome_data_no_gimr[, my_id := NULL]</code></pre>
<pre><code>## Warning in `[.data.table`(outcome_data_no_gimr, , `:=`(my_id, NULL)): Column
## &#39;my_id&#39; does not exist to remove</code></pre>
<pre class="r"><code># Run OLS without GIMR correction
ols_model_no_gimr &lt;- lm(conversion ~ ., data = outcome_data_no_gimr)

# Get HC0-adjusted t-values and p-values
robust_test_no_gimr &lt;- coeftest(ols_model_no_gimr, vcov = vcovHC(ols_model_no_gimr, type = &quot;HC0&quot;))
t_stats_no_gimr &lt;- robust_test_no_gimr[, &quot;t value&quot;]
p_values_no_gimr &lt;- robust_test_no_gimr[, &quot;Pr(&gt;|t|)&quot;]

# Print header with alignment
cat(sprintf(&quot;%-*s  %10s  %10s  %4s\n&quot;, name_width, &quot;Variable&quot;, &quot;t-value&quot;, &quot;p-value&quot;, &quot;sig&quot;))</code></pre>
<pre><code>## Variable                                                         t-value     p-value   sig</code></pre>
<pre class="r"><code>cat(sprintf(&quot;%-*s  %10s  %10s  %4s\n&quot;, name_width, &quot;---------&quot;, &quot;-------&quot;, &quot;-------&quot;, &quot;----&quot;))</code></pre>
<pre><code>## ---------                                                        -------     -------  ----</code></pre>
<pre class="r"><code># Loop through and print values
for (i in 1:length(t_stats_no_gimr)) {
    var_name &lt;- rownames(robust_test_no_gimr)[i]
    # Truncate name if too long
    if (nchar(var_name) &gt; name_width) {
        var_name &lt;- paste0(substr(var_name, 1, name_width-3), &quot;...&quot;)
    }
    cat(sprintf(&quot;%-*s  %10.4f  %10.4f  %4s\n&quot;, 
                name_width, var_name, 
                t_stats_no_gimr[i], p_values_no_gimr[i],
                get_stars(p_values_no_gimr[i])))
}</code></pre>
<pre><code>## (Intercept)                                                      -0.6855      0.4931      
## ydstogo                                                         -13.9244      0.0000   ***
## posteam_timeouts_remaining                                        0.3924      0.6948      
## defteam_timeouts_remaining                                        0.8203      0.4121      
## rush_attempt                                                      7.3389      0.0000   ***
## week                                                              0.8380      0.4021      
## temp                                                             -0.6610      0.5087      
## wind                                                              0.6754      0.4995      
## vegas_wp                                                          0.6493      0.5162      
## total_line                                                        2.1567      0.0311    **
## prep_days                                                         1.1331      0.2573      
## overall_win_pct                                                   0.2047      0.8378      
## team_win_pct                                                      1.3109      0.1900      
## prev_win_pct                                                     -2.5743      0.0101    **
## prev_shotgun_rate                                                 0.6650      0.5061      
## prev_singleback_rate                                              1.1181      0.2636      
## prev_empty_rate                                                   1.0739      0.2829      
## prev_iform_rate                                                   0.3622      0.7172      
## prev_shotgun_success                                              0.1901      0.8493      
## prev_singleback_success                                           0.1745      0.8615      
## prev_empty_success                                                0.6153      0.5384      
## prev_iform_success                                                2.1057      0.0353    **
## prev_stop_rate_run                                                0.0541      0.9568      
## prev_stop_rate_pass                                              -3.1711      0.0015   ***
## shotgun_rate                                                      1.1540      0.2486      
## singleback_rate                                                   0.4097      0.6821      
## empty_rate                                                       -0.0950      0.9243      
## iform_rate                                                       -1.5403      0.1236     .
## shotgun_success                                                  -2.1719      0.0299    **
## singleback_success                                               -0.9679      0.3332      
## empty_success                                                    -0.5055      0.6132      
## iform_success                                                    -1.5373      0.1243     .
## def_stop_rate_run                                                 1.4967      0.1346     .
## def_stop_rate_pass                                               -0.6521      0.5144      
## avg_pass_rushers                                                 -0.8923      0.3723      
## avg_box_defenders                                                -0.6857      0.4929      
## cover0_rate                                                      -0.4207      0.6740      
## cover1_rate                                                      -0.3723      0.7097      
## cover2_rate                                                      -0.3111      0.7557      
## cover3_rate                                                       1.5696      0.1166     .
## cover4_rate                                                       0.9272      0.3539      
## cover6_rate                                                      -0.2857      0.7751      
## two_man_rate                                                      1.1730      0.2409      
## prevent_rate                                                      2.6372      0.0084   ***
## attendance_raw                                                   -0.9715      0.3314      
## roof_outdoors                                                     0.1280      0.8981      
## posteam_type_home                                                -1.6641      0.0962     *
## offense_formation_EMPTY                                           0.3701      0.7113      
## offense_formation_SHOTGUN                                        -0.0772      0.9385      
## offense_formation_SINGLEBACK                                      0.1454      0.8844      
## offense_formation_I_FORM                                         -0.1523      0.8789      
## offense_player_1_present                                          2.6086      0.0091   ***
## offense_player_2_present                                         -1.1054      0.2691      
## offense_player_4_present                                          0.4024      0.6874      
## offense_player_5_present                                         -0.0519      0.9586      
## offense_player_6_present                                         -0.7014      0.4831      
## offense_player_8_present                                         -0.0904      0.9280      
## offense_player_9_present                                         -1.7221      0.0851     *
## offense_player_10_present                                        -0.8335      0.4046      
## offense_player_11_present                                        -0.3005      0.7639      
## offense_player_12_present                                         2.3216      0.0203    **
## offense_player_14_present                                        -0.7094      0.4781      
## offense_player_15_present                                        -0.9905      0.3220      
## offense_player_16_present                                        -0.7598      0.4474      
## offense_player_17_present                                        -0.2022      0.8398      
## offense_player_20_present                                         0.3914      0.6956      
## offense_player_22_present                                        -0.8661      0.3865      
## offense_player_23_present                                         1.2105      0.2262      
## offense_player_24_present                                        -5.4542      0.0000   ***
## offense_player_1_rushing_grades_grades_run_12w                   -0.0880      0.9299      
## offense_player_1_passing_depth_short_grades_pass_12w              0.9947      0.3200      
## offense_player_4_rushing_grades_ypa_12w                           0.8781      0.3799      
## offense_player_8_receiving_depth_short_caught_percent_12w        -0.8861      0.3756      
## offense_player_8_run_blocking_gap_grades_run_block_12w           -0.8502      0.3953      
## offense_player_9_receiving_depth_short_caught_percent_12w        -0.5130      0.6080      
## offense_player_9_run_blocking_gap_grades_run_block_12w            1.8146      0.0697     *
## offense_player_10_receiving_depth_short_caught_percent_12w        0.0404      0.9677      
## offense_player_10_run_blocking_gap_grades_run_block_12w           1.5116      0.1307     .
## offense_player_14_blocking_grades_grades_run_block_2w             2.0058      0.0450    **
## offense_player_15_blocking_grades_grades_run_block_2w             0.8157      0.4147      
## offense_player_17_blocking_grades_grades_offense_12w              0.8421      0.3998      
## offense_player_18_blocking_grades_grades_offense_12w             -0.8820      0.3779      
## offense_player_19_blocking_grades_grades_offense_12w             -0.5878      0.5567      
## offense_player_20_blocking_grades_grades_offense_12w             -0.3522      0.7247      
## offense_player_21_blocking_grades_grades_offense_12w             -0.3048      0.7606      
## defense_player_1_present                                         -0.9427      0.3459      
## defense_player_2_present                                          3.0708      0.0022   ***
## defense_player_3_present                                          0.7492      0.4538      
## defense_player_4_present                                          1.4715      0.1413     .
## defense_player_5_present                                         -0.2430      0.8080      
## defense_player_6_present                                         -1.1135      0.2656      
## defense_player_9_present                                          0.6109      0.5413      
## defense_player_10_present                                        -0.4850      0.6277      
## defense_player_11_present                                         1.0750      0.2824      
## defense_player_12_present                                        -0.0748      0.9404      
## defense_player_13_present                                         2.3692      0.0179    **
## defense_player_14_present                                         0.7942      0.4271      
## defense_player_15_present                                         1.9741      0.0484    **
## defense_player_16_present                                         1.1610      0.2457      
## defense_player_17_present                                        -1.8587      0.0632     *
## defense_player_18_present                                         1.5666      0.1173     .
## defense_player_19_present                                         0.3543      0.7231      
## defense_player_20_present                                        -1.6032      0.1090     .
## defense_player_21_present                                         1.3059      0.1917      
## defense_player_22_present                                         2.1609      0.0308    **
## defense_player_23_present                                         1.5582      0.1193     .
## defense_player_1_pass_rush_grades_grades_pass_rush_defens...      1.1857      0.2358      
## defense_player_1_run_defense_grades_run_stop_opp_12w             -2.2346      0.0255    **
## defense_player_2_pass_rush_grades_grades_pass_rush_defens...     -2.4657      0.0137    **
## defense_player_2_run_defense_grades_run_stop_opp_12w              0.7332      0.4635      
## defense_player_3_pass_rush_grades_grades_pass_rush_defens...     -0.7650      0.4443      
## defense_player_3_run_defense_grades_run_stop_opp_12w              2.0996      0.0358    **
## defense_player_4_pass_rush_grades_grades_pass_rush_defens...     -2.4035      0.0163    **
## defense_player_4_run_defense_grades_run_stop_opp_12w              0.7237      0.4693      
## defense_player_9_pass_rush_grades_grades_pass_rush_defens...     -1.4186      0.1561      
## defense_player_9_run_defense_grades_run_stop_opp_12w             -0.0243      0.9806      
## defense_player_9_coverage_grades_grades_coverage_defense_12w      1.2155      0.2243      
## defense_player_10_pass_rush_grades_grades_pass_rush_defen...     -0.6069      0.5440      
## defense_player_10_run_defense_grades_run_stop_opp_12w             0.5971      0.5505      
## defense_player_10_coverage_grades_grades_coverage_defense...      0.8660      0.3866      
## defense_player_11_pass_rush_grades_grades_pass_rush_defen...     -0.3368      0.7363      
## defense_player_11_run_defense_grades_run_stop_opp_12w             0.7713      0.4406      
## defense_player_11_coverage_grades_grades_coverage_defense...     -1.3388      0.1807      
## defense_player_12_pass_rush_grades_grades_pass_rush_defen...     -0.4240      0.6716      
## defense_player_12_run_defense_grades_run_stop_opp_12w            -0.7358      0.4619      
## defense_player_12_coverage_grades_grades_coverage_defense...      1.0511      0.2933      
## defense_player_15_coverage_grades_grades_defense_12w             -2.0561      0.0398    **
## defense_player_15_defensive_grades_grades_defense_penalty...     -0.3930      0.6943      
## defense_player_16_coverage_grades_grades_defense_12w             -1.1492      0.2506      
## defense_player_16_defensive_grades_grades_defense_penalty...     -0.1634      0.8702      
## defense_player_17_coverage_grades_grades_defense_12w              0.8670      0.3860      
## defense_player_17_defensive_grades_grades_defense_penalty...      1.0853      0.2778      
## defense_player_20_coverage_schemes_zone_grades_coverage_d...      1.5211      0.1283     .
## defense_player_20_coverage_grades_grades_defense_penalty_12w      0.7566      0.4493      
## defense_player_21_coverage_schemes_zone_grades_coverage_d...      0.8436      0.3989      
## defense_player_21_coverage_grades_grades_defense_penalty_12w     -1.6799      0.0931     *
## defense_player_22_coverage_schemes_zone_grades_coverage_d...     -0.9255      0.3548      
## defense_player_22_coverage_grades_grades_defense_penalty_12w     -0.6445      0.5193      
## starter_offense_player_1_rushing_grades_grades_run_12w           -0.6676      0.5044      
## starter_offense_player_1_passing_depth_short_grades_pass_12w      0.9468      0.3438      
## starter_offense_player_4_rushing_grades_ypa_12w                   0.8222      0.4110      
## starter_offense_player_8_receiving_depth_short_caught_per...      1.1085      0.2677      
## starter_offense_player_8_run_blocking_gap_grades_run_bloc...     -0.6334      0.5265      
## starter_offense_player_9_receiving_depth_short_caught_per...      1.0714      0.2841      
## starter_offense_player_9_run_blocking_gap_grades_run_bloc...     -0.2576      0.7968      
## starter_offense_player_10_receiving_depth_short_caught_pe...      0.1015      0.9191      
## starter_offense_player_10_run_blocking_gap_grades_run_blo...     -0.1947      0.8456      
## starter_offense_player_14_blocking_grades_grades_run_bloc...      0.2846      0.7760      
## starter_offense_player_15_blocking_grades_grades_run_bloc...     -0.0865      0.9311      
## starter_offense_player_17_blocking_grades_grades_offense_12w      1.9190      0.0551     *
## starter_offense_player_18_blocking_grades_grades_offense_12w     -1.4788      0.1393     .
## starter_offense_player_19_blocking_grades_grades_offense_12w     -0.2459      0.8057      
## starter_offense_player_20_blocking_grades_grades_offense_12w      0.6112      0.5411      
## starter_offense_player_21_blocking_grades_grades_offense_12w     -1.4866      0.1372     .
## starter_defense_player_1_pass_rush_grades_grades_pass_rus...     -1.0922      0.2748      
## starter_defense_player_1_run_defense_grades_run_stop_opp_12w      0.0632      0.9496      
## starter_defense_player_2_pass_rush_grades_grades_pass_rus...      0.1654      0.8686      
## starter_defense_player_2_run_defense_grades_run_stop_opp_12w      1.7596      0.0786     *
## starter_defense_player_3_pass_rush_grades_grades_pass_rus...     -0.2224      0.8240      
## starter_defense_player_3_run_defense_grades_run_stop_opp_12w     -0.1560      0.8760      
## starter_defense_player_4_pass_rush_grades_grades_pass_rus...      0.0620      0.9506      
## starter_defense_player_4_run_defense_grades_run_stop_opp_12w      0.4849      0.6278      
## starter_defense_player_9_pass_rush_grades_grades_pass_rus...     -0.8028      0.4221      
## starter_defense_player_9_run_defense_grades_run_stop_opp_12w     -1.8593      0.0631     *
## starter_defense_player_9_coverage_grades_grades_coverage_...     -0.4519      0.6514      
## starter_defense_player_10_pass_rush_grades_grades_pass_ru...      1.1097      0.2672      
## starter_defense_player_10_run_defense_grades_run_stop_opp...      0.5402      0.5891      
## starter_defense_player_10_coverage_grades_grades_coverage...      0.8685      0.3852      
## starter_defense_player_11_pass_rush_grades_grades_pass_ru...     -0.9902      0.3221      
## starter_defense_player_11_run_defense_grades_run_stop_opp...     -1.4104      0.1585      
## starter_defense_player_11_coverage_grades_grades_coverage...     -0.3856      0.6998      
## starter_defense_player_12_pass_rush_grades_grades_pass_ru...      0.0336      0.9732      
## starter_defense_player_12_run_defense_grades_run_stop_opp...      1.4509      0.1469     .
## starter_defense_player_12_coverage_grades_grades_coverage...      0.6016      0.5475      
## starter_defense_player_15_coverage_grades_grades_defense_12w      1.3753      0.1691      
## starter_defense_player_15_defensive_grades_grades_defense...     -1.2022      0.2294      
## starter_defense_player_16_coverage_grades_grades_defense_12w      1.0468      0.2952      
## starter_defense_player_16_defensive_grades_grades_defense...     -1.2845      0.1990      
## starter_defense_player_17_coverage_grades_grades_defense_12w      1.7126      0.0869     *
## starter_defense_player_17_defensive_grades_grades_defense...     -2.0902      0.0367    **
## starter_defense_player_20_coverage_schemes_zone_grades_co...      1.7185      0.0858     *
## starter_defense_player_20_coverage_grades_grades_defense_...     -1.9342      0.0532     *
## starter_defense_player_21_coverage_schemes_zone_grades_co...      0.8314      0.4058      
## starter_defense_player_21_coverage_grades_grades_defense_...      1.6064      0.1083     .
## starter_defense_player_22_coverage_schemes_zone_grades_co...      1.0323      0.3020      
## starter_defense_player_22_coverage_grades_grades_defense_...     -1.7221      0.0851     *
## yardline_1_10                                                    -2.0810      0.0375    **
## yardline_11_20                                                    0.1782      0.8585      
## yardline_21_30                                                   -0.0531      0.9577      
## yardline_41_50                                                    1.9349      0.0531     *
## yardline_51_60                                                    0.5632      0.5733      
## yardline_61_70                                                    1.1052      0.2691      
## yardline_71_80                                                    1.4081      0.1592      
## yardline_81_90                                                    2.3061      0.0212    **
## yardline_91_100                                                   0.6536      0.5134      
## year2017_team_ARI                                                -0.0807      0.9357      
## year2017_team_BUF                                                -0.7331      0.4635      
## year2017_team_CHI                                                 0.0619      0.9507      
## year2017_team_CLE                                                 0.5454      0.5855      
## year2017_team_DAL                                                -1.0551      0.2914      
## year2017_team_DET                                                -0.6422      0.5208      
## year2017_team_GB                                                  1.9514      0.0511     *
## year2017_team_HOU                                                 1.3340      0.1823      
## year2017_team_MIA                                                -1.0588      0.2898      
## year2017_team_MIN                                                -0.5430      0.5871      
## year2017_team_NE                                                  0.0287      0.9771      
## year2017_team_SF                                                  1.6762      0.0938     *
## year2017_team_BAL                                                 0.3665      0.7140      
## year2017_team_DEN                                                -0.0761      0.9393      
## year2017_team_LA                                                  0.4441      0.6570      
## year2017_team_NYG                                                -0.5060      0.6129      
## year2017_team_OAK                                                -0.5651      0.5720      
## year2017_team_SEA                                                 0.8980      0.3692      
## year2017_team_CAR                                                 0.2188      0.8268      
## year2017_team_CIN                                                 0.6169      0.5374      
## year2017_team_IND                                                 0.6209      0.5347      
## year2017_team_NO                                                  0.5293      0.5966      
## year2017_team_PHI                                                 0.5240      0.6003      
## year2017_team_PIT                                                -0.9269      0.3541      
## year2017_team_TEN                                                 0.3297      0.7417      
## year2017_team_WAS                                                 0.3127      0.7545      
## year2017_team_KC                                                  1.7350      0.0828     *
## year2017_team_LAC                                                 0.1324      0.8947      
## year2017_team_NYJ                                                 0.4031      0.6869      
## year2017_team_TB                                                 -0.2254      0.8217      
## year2017_team_ATL                                                -0.2588      0.7958      
## year2017_team_JAX                                                 0.1231      0.9021      
## year2018_team_ARI                                                 0.3861      0.6995      
## year2018_team_BAL                                                 0.3313      0.7404      
## year2018_team_CAR                                                -0.1107      0.9119      
## year2018_team_CLE                                                -0.6395      0.5225      
## year2018_team_DET                                                 0.9286      0.3532      
## year2018_team_HOU                                                 1.3057      0.1918      
## year2018_team_IND                                                -0.7340      0.4630      
## year2018_team_KC                                                  0.4762      0.6340      
## year2018_team_NYG                                                 0.6960      0.4865      
## year2018_team_OAK                                                -0.7014      0.4831      
## year2018_team_PHI                                                 0.6803      0.4964      
## year2018_team_SEA                                                -0.4096      0.6821      
## year2018_team_BUF                                                -0.5704      0.5685      
## year2018_team_CHI                                                -0.6038      0.5460      
## year2018_team_CIN                                                -0.7530      0.4515      
## year2018_team_DAL                                                -0.3161      0.7519      
## year2018_team_DEN                                                 0.0833      0.9336      
## year2018_team_GB                                                 -0.1787      0.8582      
## year2018_team_LAC                                                -0.0790      0.9371      
## year2018_team_NE                                                 -0.1980      0.8430      
## year2018_team_NO                                                  0.8853      0.3760      
## year2018_team_PIT                                                 0.4611      0.6448      
## year2018_team_SF                                                 -0.3079      0.7582      
## year2018_team_MIA                                                 0.8783      0.3798      
## year2018_team_MIN                                                 0.0432      0.9655      
## year2018_team_NYJ                                                 0.0999      0.9204      
## year2018_team_TB                                                  0.1681      0.8665      
## year2018_team_ATL                                                 0.0397      0.9683      
## year2018_team_JAX                                                 0.6419      0.5210      
## year2018_team_LA                                                 -0.6092      0.5424      
## year2018_team_TEN                                                 1.1666      0.2435      
## year2018_team_WAS                                                 0.2328      0.8160      
## year2019_team_ARI                                                -0.8432      0.3992      
## year2019_team_BUF                                                -0.1172      0.9067      
## year2019_team_CHI                                                 0.2589      0.7958      
## year2019_team_CLE                                                 0.7193      0.4720      
## year2019_team_DAL                                                -0.2423      0.8086      
## year2019_team_IND                                                -0.5083      0.6113      
## year2019_team_JAX                                                 0.4588      0.6464      
## year2019_team_KC                                                 -0.1352      0.8925      
## year2019_team_LAC                                                -0.9533      0.3405      
## year2019_team_MIN                                                -0.1987      0.8425      
## year2019_team_NE                                                 -0.0310      0.9753      
## year2019_team_NO                                                 -1.4426      0.1492     .
## year2019_team_PHI                                                 0.2063      0.8366      
## year2019_team_SEA                                                -0.5071      0.6121      
## year2019_team_SF                                                 -0.4251      0.6708      
## year2019_team_TB                                                 -1.0251      0.3054      
## year2019_team_BAL                                                -0.4464      0.6553      
## year2019_team_CAR                                                -0.3505      0.7260      
## year2019_team_DEN                                                 0.3830      0.7018      
## year2019_team_DET                                                -0.9840      0.3252      
## year2019_team_HOU                                                 0.2779      0.7811      
## year2019_team_LA                                                 -0.4492      0.6533      
## year2019_team_MIA                                                -0.9513      0.3415      
## year2019_team_NYG                                                -1.0411      0.2979      
## year2019_team_NYJ                                                -1.8566      0.0634     *
## year2019_team_OAK                                                -0.6107      0.5414      
## year2019_team_PIT                                                -1.4012      0.1612      
## year2019_team_TEN                                                -1.0666      0.2862      
## year2019_team_CIN                                                 0.7408      0.4589      
## year2019_team_WAS                                                 0.3474      0.7283      
## year2019_team_ATL                                                -0.0824      0.9344      
## year2019_team_GB                                                 -0.9021      0.3671      
## year2020_team_ATL                                                 0.0452      0.9639      
## year2020_team_BAL                                                 0.7303      0.4653      
## year2020_team_BUF                                                 0.1772      0.8594      
## year2020_team_CAR                                                 0.4985      0.6181      
## year2020_team_CIN                                                 0.4527      0.6508      
## year2020_team_DEN                                                -0.4015      0.6881      
## year2020_team_DET                                                -0.9315      0.3517      
## year2020_team_JAX                                                -0.6992      0.4845      
## year2020_team_KC                                                  0.4045      0.6859      
## year2020_team_LA                                                 -1.0602      0.2891      
## year2020_team_MIN                                                 0.8753      0.3815      
## year2020_team_NE                                                 -0.0047      0.9963      
## year2020_team_NO                                                  0.2231      0.8235      
## year2020_team_NYG                                                 0.1740      0.8619      
## year2020_team_SF                                                  0.4010      0.6884      
## year2020_team_WAS                                                 0.3365      0.7365      
## year2020_team_CHI                                                 0.4407      0.6594      
## year2020_team_DAL                                                -0.0012      0.9990      
## year2020_team_GB                                                  0.0784      0.9375      
## year2020_team_HOU                                                -0.3119      0.7551      
## year2020_team_MIA                                                -0.9931      0.3207      
## year2020_team_NYJ                                                -0.0632      0.9496      
## year2020_team_TB                                                  0.4737      0.6357      
## year2020_team_TEN                                                -0.4303      0.6670      
## year2020_team_ARI                                                 0.6799      0.4966      
## year2020_team_CLE                                                -1.1829      0.2369      
## year2020_team_IND                                                -0.5985      0.5495      
## year2020_team_LAC                                                 0.3815      0.7029      
## year2020_team_PHI                                                 0.6932      0.4883      
## year2020_team_SEA                                                -0.3446      0.7305      
## year2020_team_LV                                                 -0.8681      0.3854      
## year2020_team_PIT                                                -0.2588      0.7958      
## year2021_team_ATL                                                -0.5803      0.5618      
## year2021_team_BUF                                                -0.1013      0.9193      
## year2021_team_CIN                                                -1.9398      0.0525     *
## year2021_team_DAL                                                -0.7439      0.4570      
## year2021_team_DEN                                                 0.6313      0.5279      
## year2021_team_DET                                                -0.5384      0.5904      
## year2021_team_KC                                                  0.4014      0.6882      
## year2021_team_LA                                                 -0.0960      0.9235      
## year2021_team_LV                                                  0.3521      0.7248      
## year2021_team_MIN                                                -0.3389      0.7347      
## year2021_team_NE                                                  0.2684      0.7884      
## year2021_team_NO                                                 -0.8625      0.3885      
## year2021_team_NYG                                                 0.4683      0.6396      
## year2021_team_SF                                                 -0.0073      0.9942      
## year2021_team_TEN                                                -1.0467      0.2953      
## year2021_team_ARI                                                 0.8896      0.3737      
## year2021_team_BAL                                                 0.6975      0.4855      
## year2021_team_CAR                                                -0.0571      0.9545      
## year2021_team_CHI                                                -1.7476      0.0806     *
## year2021_team_GB                                                  0.3505      0.7260      
## year2021_team_IND                                                -0.6869      0.4922      
## year2021_team_LAC                                                -0.0279      0.9778      
## year2021_team_MIA                                                -0.0707      0.9437      
## year2021_team_NYJ                                                -0.2766      0.7821      
## year2021_team_PHI                                                -0.3278      0.7431      
## year2021_team_SEA                                                -0.9311      0.3519      
## year2021_team_TB                                                 -0.1968      0.8440      
## year2021_team_WAS                                                 0.0700      0.9442      
## year2021_team_CLE                                                -0.9993      0.3177      
## year2021_team_HOU                                                -0.9524      0.3409      
## year2021_team_JAX                                                -0.4309      0.6666      
## year2021_team_PIT                                                 0.4452      0.6562      
## year2022_team_ARI                                                -1.5782      0.1146     .
## year2022_team_ATL                                                -1.7842      0.0745     *
## year2022_team_CAR                                                 0.6073      0.5437      
## year2022_team_CHI                                                 0.1107      0.9118      
## year2022_team_CIN                                                -0.0756      0.9397      
## year2022_team_HOU                                                 0.3687      0.7124      
## year2022_team_IND                                                -0.1832      0.8547      
## year2022_team_LAC                                                -0.6328      0.5269      
## year2022_team_MIA                                                -0.8124      0.4166      
## year2022_team_SEA                                                -0.5366      0.5916      
## year2022_team_TB                                                 -0.2184      0.8272      
## year2022_team_TEN                                                 0.8062      0.4202      
## year2022_team_WAS                                                 0.5877      0.5568      
## year2022_team_BAL                                                -1.8618      0.0627     *
## year2022_team_BUF                                                 0.6469      0.5177      
## year2022_team_DAL                                                -0.0021      0.9983      
## year2022_team_DET                                                -0.4303      0.6670      
## year2022_team_GB                                                 -1.1667      0.2434      
## year2022_team_JAX                                                -1.2607      0.2075      
## year2022_team_KC                                                 -1.0515      0.2931      
## year2022_team_LA                                                  0.8319      0.4055      
## year2022_team_LV                                                  1.2561      0.2092      
## year2022_team_NO                                                 -0.6965      0.4862      
## year2022_team_PHI                                                 0.6197      0.5355      
## year2022_team_PIT                                                 1.0496      0.2940      
## year2022_team_DEN                                                 0.7003      0.4838      
## year2022_team_MIN                                                -1.0588      0.2898      
## year2022_team_NE                                                  0.2298      0.8182      
## year2022_team_NYJ                                                -0.6117      0.5408      
## year2022_team_NYG                                                -0.0960      0.9235      
## year2022_team_SF                                                 -0.7017      0.4829      
## year2023_team_BAL                                                -0.7351      0.4624      
## year2023_team_CHI                                                -1.3460      0.1784      
## year2023_team_CLE                                                -1.3785      0.1681      
## year2023_team_GB                                                  0.2112      0.8328      
## year2023_team_IND                                                 0.2348      0.8144      
## year2023_team_KC                                                  0.3036      0.7614      
## year2023_team_LAC                                                 0.4304      0.6669      
## year2023_team_LV                                                  0.0206      0.9836      
## year2023_team_MIA                                                 0.1538      0.8778      
## year2023_team_MIN                                                 0.8063      0.4201      
## year2023_team_NO                                                 -0.5133      0.6078      
## year2023_team_NYG                                                 0.9073      0.3643      
## year2023_team_SEA                                                -0.8891      0.3740      
## year2023_team_SF                                                 -0.3820      0.7025      
## year2023_team_WAS                                                 1.1372      0.2555      
## year2023_team_ATL                                                -0.0335      0.9733      
## year2023_team_BUF                                                -0.6122      0.5405      
## year2023_team_CAR                                                -0.1548      0.8770      
## year2023_team_DAL                                                 0.3410      0.7331      
## year2023_team_DEN                                                -0.1139      0.9094      
## year2023_team_HOU                                                -0.3149      0.7528      
## year2023_team_LA                                                  0.2946      0.7683      
## year2023_team_NE                                                  0.4049      0.6856      
## year2023_team_PHI                                                 0.1940      0.8461      
## year2023_team_PIT                                                -0.3340      0.7384      
## year2023_team_TEN                                                -0.4781      0.6326      
## year2023_team_ARI                                                -1.7317      0.0834     *
## year2023_team_CIN                                                -1.5310      0.1259     .
## year2023_team_DET                                                 0.7518      0.4522      
## year2023_team_TB                                                  0.4454      0.6561      
## year2023_team_JAX                                                -1.3659      0.1720      
## year2023_team_NYJ                                                 1.6396      0.1012     .
## is_first_half                                                    -1.2226      0.2216      
## time_in_half                                                      1.6047      0.1087     .
## attendance_pct                                                    1.0012      0.3168      
## home_attendance                                                  -0.4420      0.6585</code></pre>
<pre class="r"><code>cat(&quot;\nSignificance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15&quot;)</code></pre>
<pre><code>## 
## Significance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15</code></pre>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIkhlY2ttYW4gU2VsZWN0aW9uIE1vZGVsIEFuYWx5c2lzIg0Kb3V0cHV0OiBodG1sX2RvY3VtZW50DQotLS0NCg0KYGBge3Igb3B0aW9ucywgaW5jbHVkZT1GQUxTRX0NCm9wdGlvbnMobWF4LnByaW50PTEwMDAwKQ0KYGBgDQoNCmBgYHtyfQ0KbGlicmFyeShkYXRhLnRhYmxlKQ0Kb3V0Y29tZV9kYXRhIDwtIGZyZWFkKCJwcmVkaWN0X291dGNvbWUuY3N2Lmd6IikNCnNlbGVjdF9kYXRhIDwtIGZyZWFkKCJwcmVkaWN0X3NlbGVjdC5jc3YuZ3oiKQ0KYGBgDQoNCmBgYHtyfQ0Kc2VsZWN0X2RhdGFbLCBhdHRlbXB0IDo9IGFzLm51bWVyaWMoYXMuY2hhcmFjdGVyKGF0dGVtcHQpKV0NCmBgYA0KDQoNCg0KYGBge3J9DQojIENvbW1lbnRlZCBvdXQgb3JpZ2luYWwgdmVyc2lvbg0KIyAjIExvYWQgcmVxdWlyZWQgbGlicmFyaWVzDQojIGxpYnJhcnkoZGF0YS50YWJsZSkNCiMgbGlicmFyeSh4Z2Jvb3N0KQ0KIyBsaWJyYXJ5KFJPQ1IpDQojIGxpYnJhcnkocGFyYWxsZWwpDQojIA0KIyAjIFByZXBhcmUgdGhlIFhHQm9vc3QgbWF0cmljZXMNCiMgeHMgPC0gbW9kZWwubWF0cml4KH4gLiAtIDEgLSBhdHRlbXB0IC0gbXlfaWQsIGRhdGEgPSBzZWxlY3RfZGF0YSkNCiMgeSA8LSBhcy5udW1lcmljKGFzLmNoYXJhY3RlcihzZWxlY3RfZGF0YSRhdHRlbXB0KSkNCiMgDQojICMgQ3JlYXRlIHBhcmFtZXRlciBncmlkDQojIGdyaWQgPC0gZXhwYW5kLmdyaWQoDQojICAgZXRhID0gc2VxKDAuMDAxLCAwLjEsIGJ5ID0gMC4wMiksDQojICAgbWF4X2RlcHRoID0gc2VxKDUsIDcsIGJ5ID0gMiksDQojICAgbWluX2NoaWxkX3dlaWdodCA9IHNlcSgxLCAxLCBieSA9IDEpLCAgICAgICAgDQojICAgc3Vic2FtcGxlID0gc2VxKDAuOCwgMC44LCBieSA9IDAuMiksDQojICAgY29sc2FtcGxlX2J5dHJlZSA9IHNlcSgwLjgsIDAuOCwgYnkgPSAwLjIpLA0KIyAgIGxhbWJkYSA9IHNlcSgxLCAxLCBieSA9IDEpLCAgICAgICAgICAgICAgICANCiMgICBhbHBoYSA9IHNlcSgwLCAwLCBieSA9IDEpLCAgICAgICAgICAgICAgICAgIA0KIyAgIGdhbW1hID0gc2VxKDAsIDAsIGJ5ID0gMC4xKSwgICAgICAgICAgICAgICANCiMgICBucm91bmRzID0gc2VxKDEwMCwgNTAwLCBieSA9IDUwMCkNCiMgKQ0KIyANCiMgIyBTYW1wbGUgZ3JpZCBwb2ludHMNCiMgY29uZl9sZXYgPC0gLjk1DQojIG51bV9tYXggPC0gNQ0KIyBuIDwtIGNlaWxpbmcobG9nKDEtY29uZl9sZXYpL2xvZygxLW51bV9tYXgvbnJvdyhncmlkKSkpDQojIGluZCA8LSBzYW1wbGUobnJvdyhncmlkKSwgbiwgcmVwbGFjZSA9IEZBTFNFKQ0KIyByZ3JpZCA8LSBncmlkW2luZCwgXQ0KIyANCiMgIyBTZXQgdXAgcGFyYWxsZWwgcHJvY2Vzc2luZw0KIyBuYyA8LSBkZXRlY3RDb3JlcygpIC0gMQ0KIyANCiMgIyBWYWxpZGF0aW9uIHBoYXNlDQojIGNhdCgiXG5QaGFzZSAxOiBWYWxpZGF0aW9uIFBoYXNlXG4iKQ0KIyBuX3ZhbGlkYXRpb25zIDwtIDINCiMgdmFsaWRhdGlvbl9yZXN1bHRzIDwtIG1hdHJpeChucm93ID0gbnJvdyhyZ3JpZCksIG5jb2wgPSBuX3ZhbGlkYXRpb25zKQ0KIyANCiMgZm9yIChqIGluIDE6bnJvdyhyZ3JpZCkpIHsNCiMgICBjYXQoIlxuVGVzdGluZyBwYXJhbWV0ZXIgc2V0IiwgaiwgIm9mIiwgbnJvdyhyZ3JpZCksICJcbiIpDQojICAgDQojICAgZm9yIChpIGluIDE6bl92YWxpZGF0aW9ucykgew0KIyAgICAgIyBDcmVhdGUgdmFsaWRhdGlvbiBzcGxpdA0KIyAgICAgaWR4IDwtIHVuaXF1ZShzYW1wbGUobnJvdyh4cyksIG5yb3coeHMpLCBUUlVFKSkNCiMgICAgIHRyYWluX3ggPC0geHNbaWR4LCBdDQojICAgICB0cmFpbl95IDwtIHlbaWR4XQ0KIyAgICAgdmFsX3ggPC0geHNbLWlkeCwgXQ0KIyAgICAgdmFsX3kgPC0geVstaWR4XQ0KIyAgICAgDQojICAgICAjIFVuZGVyc2FtcGxlIG1ham9yaXR5IGNsYXNzIGluIHRyYWluaW5nIGRhdGENCiMgICAgIHRyYWluX2lkeF8wIDwtIHdoaWNoKHRyYWluX3kgPT0gMCkNCiMgICAgIHRyYWluX2lkeF8xIDwtIHdoaWNoKHRyYWluX3kgPT0gMSkNCiMgICAgIA0KIyAgICAgIyBHZXQgbnVtYmVyIG9mIG1pbm9yaXR5IGNsYXNzIHNhbXBsZXMNCiMgICAgIG5fbWlub3JpdHkgPC0gbGVuZ3RoKHRyYWluX2lkeF8xKQ0KIyAgICAgDQojICAgICAjIFJhbmRvbWx5IHNhbXBsZSBmcm9tIG1ham9yaXR5IGNsYXNzDQojICAgICB0cmFpbl9pZHhfMF9zYW1wbGVkIDwtIHNhbXBsZSh0cmFpbl9pZHhfMCwgbl9taW5vcml0eSkNCiMgICAgIA0KIyAgICAgIyBDb21iaW5lIGluZGljZXMgZm9yIGJhbGFuY2VkIGRhdGFzZXQNCiMgICAgIGJhbGFuY2VkX2lkeCA8LSBjKHRyYWluX2lkeF8wX3NhbXBsZWQsIHRyYWluX2lkeF8xKQ0KIyAgICAgDQojICAgICAjIENyZWF0ZSBiYWxhbmNlZCB0cmFpbmluZyBkYXRhc2V0DQojICAgICB0cmFpbl94X2JhbGFuY2VkIDwtIHRyYWluX3hbYmFsYW5jZWRfaWR4LCBdDQojICAgICB0cmFpbl95X2JhbGFuY2VkIDwtIHRyYWluX3lbYmFsYW5jZWRfaWR4XQ0KIyAgICAgDQojICAgICBwcm0gPC0gbGlzdCgNCiMgICAgICAgYm9vc3RlciA9ICJnYnRyZWUiLA0KIyAgICAgICBvYmplY3RpdmUgPSAiYmluYXJ5OmxvZ2lzdGljIiwNCiMgICAgICAgbWF4X2RlcHRoID0gcmdyaWRbaiwgIm1heF9kZXB0aCJdLA0KIyAgICAgICBldGEgPSByZ3JpZFtqLCAiZXRhIl0sDQojICAgICAgIHN1YnNhbXBsZSA9IHJncmlkW2osICJzdWJzYW1wbGUiXSwNCiMgICAgICAgY29sc2FtcGxlX2J5dHJlZSA9IHJncmlkW2osICJjb2xzYW1wbGVfYnl0cmVlIl0sDQojICAgICAgIGdhbW1hID0gcmdyaWRbaiwgImdhbW1hIl0sDQojICAgICAgIG1pbl9jaGlsZF93ZWlnaHQgPSByZ3JpZFtqLCAibWluX2NoaWxkX3dlaWdodCJdLA0KIyAgICAgICBhbHBoYSA9IHJncmlkW2osICJhbHBoYSJdLA0KIyAgICAgICBsYW1iZGEgPSByZ3JpZFtqLCAibGFtYmRhIl0sDQojICAgICAgIG50aHJlYWQgPSBuYw0KIyAgICAgKQ0KIyAgICAgDQojICAgICBkbV90cmFpbiA8LSB4Z2IuRE1hdHJpeChkYXRhID0gdHJhaW5feF9iYWxhbmNlZCwgbGFiZWwgPSB0cmFpbl95X2JhbGFuY2VkKQ0KIyAgICAgbWRsIDwtIHhnYi50cmFpbigNCiMgICAgICAgcGFyYW1zID0gcHJtLA0KIyAgICAgICBkYXRhID0gZG1fdHJhaW4sDQojICAgICAgIG5yb3VuZHMgPSByZ3JpZFtqLCAibnJvdW5kcyJdLA0KIyAgICAgICB2ZXJib3NlID0gRkFMU0UNCiMgICAgICkNCiMgICAgIA0KIyAgICAgcCA8LSBwcmVkaWN0KG1kbCwgeGdiLkRNYXRyaXgoZGF0YSA9IHZhbF94KSkNCiMgICAgIHByZWQgPC0gcHJlZGljdGlvbihwLCB2YWxfeSkNCiMgICAgIHZhbGlkYXRpb25fcmVzdWx0c1tqLCBpXSA8LSBwZXJmb3JtYW5jZShwcmVkLCAiYXVjIilAeS52YWx1ZXNbWzFdXQ0KIyAgIH0NCiMgfQ0KIyANCiMgIyBSdW4gMTAwIHRlc3RzIHdpdGggYmVzdCBwYXJhbWV0ZXJzDQojIGNhdCgiXG5SdW5uaW5nIFggdGVzdCBpdGVyYXRpb25zIHdpdGggYmVzdCBwYXJhbWV0ZXJzLi4uXG4iKQ0KIyB0ZXN0X2F1Y3MgPC0gYygpDQojIA0KIyBiZXN0X3BhcmFtc19pZHggPC0gd2hpY2gubWF4KHJvd01lYW5zKHZhbGlkYXRpb25fcmVzdWx0cykpDQojIGJlc3RfcGFyYW1zIDwtIHJncmlkW2Jlc3RfcGFyYW1zX2lkeCxdDQojIA0KIyAjIFRyYWluIGZpbmFsIG1vZGVsIHdpdGggYmVzdCBwYXJhbWV0ZXJzDQojIGJlc3RfcGFyYW1zX2xpc3QgPC0gYXMubGlzdChiZXN0X3BhcmFtc1std2hpY2gobmFtZXMoYmVzdF9wYXJhbXMpID09ICJucm91bmRzIildKQ0KIyBiZXN0X3BhcmFtc19saXN0JGJvb3N0ZXIgPC0gImdidHJlZSINCiMgYmVzdF9wYXJhbXNfbGlzdCRvYmplY3RpdmUgPC0gImJpbmFyeTpsb2dpc3RpYyINCiMgYmVzdF9wYXJhbXNfbGlzdCRudGhyZWFkIDwtIG5jDQojIA0KIyBmb3IoaSBpbiAxOjEwMCkgew0KIyAgICMgQ3JlYXRlIHRlc3Qgc3BsaXQNCiMgICBpZHggPC0gdW5pcXVlKHNhbXBsZShucm93KHhzKSwgbnJvdyh4cyksIFQpKQ0KIyAgIHRyYWluX3ggPC0geHNbaWR4LCBdDQojICAgdHJhaW5feSA8LSB5W2lkeF0NCiMgICB0ZXN0X3ggPC0geHNbLWlkeCwgXQ0KIyAgIHRlc3RfeSA8LSB5Wy1pZHhdDQojICAgDQojICAgIyBVbmRlcnNhbXBsZSB0cmFpbmluZyBkYXRhDQojICAgdHJhaW5faWR4XzAgPC0gd2hpY2godHJhaW5feSA9PSAwKQ0KIyAgIHRyYWluX2lkeF8xIDwtIHdoaWNoKHRyYWluX3kgPT0gMSkNCiMgICBuX21pbm9yaXR5IDwtIGxlbmd0aCh0cmFpbl9pZHhfMSkNCiMgICB0cmFpbl9pZHhfMF9zYW1wbGVkIDwtIHNhbXBsZSh0cmFpbl9pZHhfMCwgbl9taW5vcml0eSkNCiMgICBiYWxhbmNlZF9pZHggPC0gYyh0cmFpbl9pZHhfMF9zYW1wbGVkLCB0cmFpbl9pZHhfMSkNCiMgICANCiMgICAjIENyZWF0ZSBiYWxhbmNlZCB0cmFpbmluZyBkYXRhc2V0DQojICAgdHJhaW5feF9iYWxhbmNlZCA8LSB0cmFpbl94W2JhbGFuY2VkX2lkeCwgXQ0KIyAgIHRyYWluX3lfYmFsYW5jZWQgPC0gdHJhaW5feVtiYWxhbmNlZF9pZHhdDQojICAgDQojICAgIyBUcmFpbiBtb2RlbA0KIyAgIGRtX3RyYWluIDwtIHhnYi5ETWF0cml4KGRhdGEgPSB0cmFpbl94X2JhbGFuY2VkLCBsYWJlbCA9IHRyYWluX3lfYmFsYW5jZWQpDQojICAgbWRsIDwtIHhnYi50cmFpbigNCiMgICAgIHBhcmFtcyA9IGJlc3RfcGFyYW1zX2xpc3QsDQojICAgICBkYXRhID0gZG1fdHJhaW4sDQojICAgICBucm91bmRzID0gYmVzdF9wYXJhbXNbWyJucm91bmRzIl1dLA0KIyAgICAgdmVyYm9zZSA9IEZBTFNFDQojICAgKQ0KIyAgIA0KIyAgICMgVGVzdCBvbiB1bmJhbGFuY2VkIHRlc3Qgc2V0DQojICAgcCA8LSBwcmVkaWN0KG1kbCwgeGdiLkRNYXRyaXgoZGF0YSA9IHRlc3RfeCkpDQojICAgcHJlZCA8LSBwcmVkaWN0aW9uKHAsIHRlc3RfeSkNCiMgICB0ZXN0X2F1Y3NbaV0gPC0gcGVyZm9ybWFuY2UocHJlZCwgImF1YyIpQHkudmFsdWVzW1sxXV0NCiMgfQ0KIyANCiMgIyBQcmludCByZXN1bHRzDQojIGNhdCgiXG5UZXN0IFJlc3VsdHMgb3ZlciAxMDAgaXRlcmF0aW9uczpcbiIpDQojIGNhdCgiTWVhbiBBVUM6IiwgbWVhbih0ZXN0X2F1Y3MpLCAiXG4iKQ0KIyBjYXQoIlNEIEFVQzoiLCBzZCh0ZXN0X2F1Y3MpLCAiXG4iKQ0KIyBjYXQoIjk1JSBDSToiLCBtZWFuKHRlc3RfYXVjcykgLSAxLjk2ICogc2QodGVzdF9hdWNzKSwgDQojICAgICAidG8iLCBtZWFuKHRlc3RfYXVjcykgKyAxLjk2ICogc2QodGVzdF9hdWNzKSwgIlxuIikNCiMgDQojICMgUGxvdHRpbmcgQVVDIGRpc3RyaWJ1dGlvbg0KIyBwbG90KHRlc3RfYXVjcywgY29sPSJyZWQiLCBwY2g9MjAsDQojICAgICAgbWFpbj0iQVVDIFRlc3QgRGlzdHJpYnV0aW9uIiwNCiMgICAgICB4bGFiPSJJdGVyYXRpb24iLCB5bGFiPSJBVUMiKQ0KIyBhYmxpbmUoaD1tZWFuKHRlc3RfYXVjcyksIGNvbD0iYmx1ZSIsIGx3ZD0yLCBsdHk9MikNCiMgYWJsaW5lKGg9bWVhbih0ZXN0X2F1Y3MpIC0gMS45NiAqIHNkKHRlc3RfYXVjcyksIGNvbD0iZ3JlZW4iLCBsd2Q9MiwgbHR5PTMpDQojIGFibGluZShoPW1lYW4odGVzdF9hdWNzKSArIDEuOTYgKiBzZCh0ZXN0X2F1Y3MpLCBjb2w9ImdyZWVuIiwgbHdkPTIsIGx0eT0zKQ0KIyBsZWdlbmQoImJvdHRvbXJpZ2h0IiwgDQojICAgICAgICBsZWdlbmQ9YygiQVVDIFZhbHVlcyIsICJNZWFuIiwgIjk1JSBDSSBCb3VuZHMiKSwNCiMgICAgICAgIGNvbD1jKCJyZWQiLCAiYmx1ZSIsICJncmVlbiIpLA0KIyAgICAgICAgbHR5PWMoTkEsIDIsIDMpLA0KIyAgICAgICAgcGNoPWMoMjAsIE5BLCBOQSkpDQojIA0KIyAjIE5vdyB0cmFpbiBmaW5hbCBtb2RlbCBvbiBmdWxsIGRhdGEgZm9yIHogc2NvcmVzDQojIGZpbmFsX2lkeF8wIDwtIHdoaWNoKHkgPT0gMCkNCiMgZmluYWxfaWR4XzEgPC0gd2hpY2goeSA9PSAxKQ0KIyBuX21pbm9yaXR5X2ZpbmFsIDwtIGxlbmd0aChmaW5hbF9pZHhfMSkNCiMgZmluYWxfaWR4XzBfc2FtcGxlZCA8LSBzYW1wbGUoZmluYWxfaWR4XzAsIG5fbWlub3JpdHlfZmluYWwpDQojIGZpbmFsX2JhbGFuY2VkX2lkeCA8LSBjKGZpbmFsX2lkeF8wX3NhbXBsZWQsIGZpbmFsX2lkeF8xKQ0KIyANCiMgIyBDcmVhdGUgYmFsYW5jZWQgZmluYWwgZGF0YXNldA0KIyB4c19iYWxhbmNlZCA8LSB4c1tmaW5hbF9iYWxhbmNlZF9pZHgsIF0NCiMgeV9iYWxhbmNlZCA8LSB5W2ZpbmFsX2JhbGFuY2VkX2lkeF0NCiMgDQojIGRtX2Z1bGwgPC0geGdiLkRNYXRyaXgoZGF0YSA9IHhzX2JhbGFuY2VkLCBsYWJlbCA9IHlfYmFsYW5jZWQpDQojIGZpbmFsX21vZGVsIDwtIHhnYi50cmFpbigNCiMgICBwYXJhbXMgPSBiZXN0X3BhcmFtc19saXN0LA0KIyAgIGRhdGEgPSBkbV9mdWxsLA0KIyAgIG5yb3VuZHMgPSBiZXN0X3BhcmFtc1tbIm5yb3VuZHMiXV0sDQojICAgdmVyYm9zZSA9IEZBTFNFDQojICkNCiMgDQojICMgR2V0IHByb2JhYmlsaXR5IHByZWRpY3Rpb25zICh6KSBmb3IgQUxMIGRhdGENCiMgeiA8LSBwcmVkaWN0KGZpbmFsX21vZGVsLCB4Z2IuRE1hdHJpeChkYXRhID0geHMpKQ0KYGBgDQoNCmBgYHtyfQ0KbGlicmFyeShkYXRhLnRhYmxlKQ0KbGlicmFyeSh4Z2Jvb3N0KQ0KbGlicmFyeShST0NSKQ0KbGlicmFyeShwYXJhbGxlbCkNCg0KIyBQcmVwYXJlIHRoZSBYR0Jvb3N0IG1hdHJpY2VzDQp4cyA8LSBtb2RlbC5tYXRyaXgofiAuIC0gMSAtIGF0dGVtcHQgLSBteV9pZCwgZGF0YSA9IHNlbGVjdF9kYXRhKQ0KeSA8LSBhcy5udW1lcmljKGFzLmNoYXJhY3RlcihzZWxlY3RfZGF0YSRhdHRlbXB0KSkNCg0KDQojIENyZWF0ZSBwYXJhbWV0ZXIgZ3JpZA0KZ3JpZCA8LSBleHBhbmQuZ3JpZCgNCiAgZXRhID0gc2VxKDAuMDAxLCAwLjA1LCBieSA9IDAuMDEpLA0KICBtYXhfZGVwdGggPSBzZXEoNSwgNSwgYnkgPSAyKSwNCiAgbWluX2NoaWxkX3dlaWdodCA9IHNlcSgxLCAxLCBieSA9IDEpLCAgICAgICAgDQogIHN1YnNhbXBsZSA9IHNlcSgxLCAxLCBieSA9IDAuMiksDQogIGNvbHNhbXBsZV9ieXRyZWUgPSBzZXEoMSwgMSwgYnkgPSAwLjIpLA0KICBsYW1iZGEgPSBzZXEoMSwgMSwgYnkgPSAxKSwgICAgICAgICAgICAgICAgDQogIGFscGhhID0gc2VxKDAsIDAsIGJ5ID0gMSksICAgICAgICAgICAgICAgICAgDQogIGdhbW1hID0gc2VxKDAsIDAsIGJ5ID0gMC4xKSwgICAgICAgICAgICAgICANCiAgbnJvdW5kcyA9IHNlcSgxMDAsIDI1MCwgYnkgPSA1MCkNCikNCg0KDQojIFNhbXBsZSBncmlkIHBvaW50cw0KY29uZl9sZXYgPC0gLjk1DQpudW1fbWF4IDwtIDUNCm4gPC0gY2VpbGluZyhsb2coMS1jb25mX2xldikvbG9nKDEtbnVtX21heC9ucm93KGdyaWQpKSkNCmluZCA8LSBzYW1wbGUobnJvdyhncmlkKSwgbiwgcmVwbGFjZSA9IEZBTFNFKQ0KcmdyaWQgPC0gZ3JpZFtpbmQsIF0NCg0KIyBTZXQgdXAgcGFyYWxsZWwgcHJvY2Vzc2luZw0KbmMgPC0gZGV0ZWN0Q29yZXMoKSAtIDENCg0KIyBDYWxjdWxhdGUgc2NhbGVfcG9zX3dlaWdodCBmb3IgaW1iYWxhbmNlZCBkYXRhc2V0DQpzY2FsZV9wb3Nfd2VpZ2h0IDwtIHN1bSh5ID09IDApIC8gc3VtKHkgPT0gMSkNCg0KIyBWYWxpZGF0aW9uIHBoYXNlDQojY2F0KCJcblBoYXNlIDE6IFZhbGlkYXRpb24gUGhhc2VcbiIpDQpuX3ZhbGlkYXRpb25zIDwtIDEwDQp2YWxpZGF0aW9uX3Jlc3VsdHMgPC0gbWF0cml4KG5yb3cgPSBucm93KHJncmlkKSwgbmNvbCA9IG5fdmFsaWRhdGlvbnMpDQoNCmZvciAoaiBpbiAxOm5yb3cocmdyaWQpKSB7DQogICNjYXQoIlxuVGVzdGluZyBwYXJhbWV0ZXIgc2V0IiwgaiwgIm9mIiwgbnJvdyhyZ3JpZCksICJcbiIpDQogIA0KICBmb3IgKGkgaW4gMTpuX3ZhbGlkYXRpb25zKSB7DQogICAgI2NhdCgiXG5WYWxpZGF0aW9uIGl0ZXJhdGlvbiIsIGksICJvZiIsIG5fdmFsaWRhdGlvbnMsICJcbiIpICAgICAgICAgICAgIA0KICAgICMgQ3JlYXRlIHZhbGlkYXRpb24gc3BsaXQNCiAgICBpZHggPC0gdW5pcXVlKHNhbXBsZShucm93KHhzKSwgbnJvdyh4cyksIFRSVUUpKQ0KICAgIHRyYWluX3ggPC0geHNbaWR4LCBdDQogICAgdHJhaW5feSA8LSB5W2lkeF0NCiAgICB2YWxfeCA8LSB4c1staWR4LCBdDQogICAgdmFsX3kgPC0geVstaWR4XQ0KICAgIA0KICAgIHBybSA8LSBsaXN0KA0KICAgICAgYm9vc3RlciA9ICJnYnRyZWUiLA0KICAgICAgb2JqZWN0aXZlID0gImJpbmFyeTpsb2dpc3RpYyIsDQogICAgICBtYXhfZGVwdGggPSByZ3JpZFtqLCAibWF4X2RlcHRoIl0sDQogICAgICBldGEgPSByZ3JpZFtqLCAiZXRhIl0sDQogICAgICBzdWJzYW1wbGUgPSByZ3JpZFtqLCAic3Vic2FtcGxlIl0sDQogICAgICBjb2xzYW1wbGVfYnl0cmVlID0gcmdyaWRbaiwgImNvbHNhbXBsZV9ieXRyZWUiXSwNCiAgICAgIGdhbW1hID0gcmdyaWRbaiwgImdhbW1hIl0sDQogICAgICBtaW5fY2hpbGRfd2VpZ2h0ID0gcmdyaWRbaiwgIm1pbl9jaGlsZF93ZWlnaHQiXSwNCiAgICAgIGFscGhhID0gcmdyaWRbaiwgImFscGhhIl0sDQogICAgICBsYW1iZGEgPSByZ3JpZFtqLCAibGFtYmRhIl0sDQogICAgICBzY2FsZV9wb3Nfd2VpZ2h0ID0gc2NhbGVfcG9zX3dlaWdodCwNCiAgICAgIG50aHJlYWQgPSBuYw0KICAgICkNCiAgICANCiAgICBkbV90cmFpbiA8LSB4Z2IuRE1hdHJpeChkYXRhID0gdHJhaW5feCwgbGFiZWwgPSB0cmFpbl95KQ0KICAgIG1kbCA8LSB4Z2IudHJhaW4oDQogICAgICBwYXJhbXMgPSBwcm0sDQogICAgICBkYXRhID0gZG1fdHJhaW4sDQogICAgICBucm91bmRzID0gcmdyaWRbaiwgIm5yb3VuZHMiXSwNCiAgICAgIHZlcmJvc2UgPSBGQUxTRQ0KICAgICkNCiAgICANCiAgICBwIDwtIHByZWRpY3QobWRsLCB4Z2IuRE1hdHJpeChkYXRhID0gdmFsX3gpKQ0KICAgIHByZWQgPC0gcHJlZGljdGlvbihwLCB2YWxfeSkNCiAgICB2YWxpZGF0aW9uX3Jlc3VsdHNbaiwgaV0gPC0gcGVyZm9ybWFuY2UocHJlZCwgImF1YyIpQHkudmFsdWVzW1sxXV0NCiAgfQ0KfQ0KDQojIFJ1biAxMDAgdGVzdHMgd2l0aCBiZXN0IHBhcmFtZXRlcnMNCmNhdCgiXG5SdW5uaW5nIFggdGVzdCBpdGVyYXRpb25zIHdpdGggYmVzdCBwYXJhbWV0ZXJzLi4uXG4iKQ0KdGVzdF9hdWNzIDwtIGMoKQ0KDQpiZXN0X3BhcmFtc19pZHggPC0gd2hpY2gubWF4KHJvd01lYW5zKHZhbGlkYXRpb25fcmVzdWx0cykpDQpiZXN0X3BhcmFtcyA8LSByZ3JpZFtiZXN0X3BhcmFtc19pZHgsXQ0KDQojIFRyYWluIGZpbmFsIG1vZGVsIHdpdGggYmVzdCBwYXJhbWV0ZXJzDQpiZXN0X3BhcmFtc19saXN0IDwtIGFzLmxpc3QoYmVzdF9wYXJhbXNbLXdoaWNoKG5hbWVzKGJlc3RfcGFyYW1zKSA9PSAibnJvdW5kcyIpXSkNCmJlc3RfcGFyYW1zX2xpc3QkYm9vc3RlciA8LSAiZ2J0cmVlIg0KYmVzdF9wYXJhbXNfbGlzdCRvYmplY3RpdmUgPC0gImJpbmFyeTpsb2dpc3RpYyINCmJlc3RfcGFyYW1zX2xpc3Qkc2NhbGVfcG9zX3dlaWdodCA8LSBzY2FsZV9wb3Nfd2VpZ2h0DQpiZXN0X3BhcmFtc19saXN0JG50aHJlYWQgPC0gbmMNCg0KZm9yKGkgaW4gMTo1MCkgew0KICAjIENyZWF0ZSB0ZXN0IHNwbGl0DQogIGlkeCA8LSB1bmlxdWUoc2FtcGxlKG5yb3coeHMpLCBucm93KHhzKSwgVCkpDQogIHRyYWluX3ggPC0geHNbaWR4LCBdDQogIHRyYWluX3kgPC0geVtpZHhdDQogIHRlc3RfeCA8LSB4c1staWR4LCBdDQogIHRlc3RfeSA8LSB5Wy1pZHhdDQogIA0KICAjIFRyYWluIG1vZGVsIG9uIGZ1bGwgdW5iYWxhbmNlZCBkYXRhc2V0DQogIGRtX3RyYWluIDwtIHhnYi5ETWF0cml4KGRhdGEgPSB0cmFpbl94LCBsYWJlbCA9IHRyYWluX3kpDQogIG1kbCA8LSB4Z2IudHJhaW4oDQogICAgcGFyYW1zID0gYmVzdF9wYXJhbXNfbGlzdCwNCiAgICBkYXRhID0gZG1fdHJhaW4sDQogICAgbnJvdW5kcyA9IGJlc3RfcGFyYW1zW1sibnJvdW5kcyJdXSwNCiAgICB2ZXJib3NlID0gRkFMU0UNCiAgKQ0KICANCiAgIyBUZXN0IG9uIHVuYmFsYW5jZWQgdGVzdCBzZXQNCiAgcCA8LSBwcmVkaWN0KG1kbCwgeGdiLkRNYXRyaXgoZGF0YSA9IHRlc3RfeCkpDQogIHByZWQgPC0gcHJlZGljdGlvbihwLCB0ZXN0X3kpDQogIHRlc3RfYXVjc1tpXSA8LSBwZXJmb3JtYW5jZShwcmVkLCAiYXVjIilAeS52YWx1ZXNbWzFdXQ0KfQ0KIyBQcmludCByZXN1bHRzDQpjYXQoIlxuVGVzdCBSZXN1bHRzIG92ZXIgMTAwIGl0ZXJhdGlvbnM6XG4iKQ0KY2F0KCJNZWFuIEFVQzoiLCBtZWFuKHRlc3RfYXVjcyksICJcbiIpDQpjYXQoIlNEIEFVQzoiLCBzZCh0ZXN0X2F1Y3MpLCAiXG4iKQ0KY2F0KCI5NSUgQ0k6IiwgbWVhbih0ZXN0X2F1Y3MpIC0gMS45NiAqIHNkKHRlc3RfYXVjcyksIA0KICAgICJ0byIsIG1lYW4odGVzdF9hdWNzKSArIDEuOTYgKiBzZCh0ZXN0X2F1Y3MpLCAiXG4iKQ0KDQojIFBsb3R0aW5nIEFVQyBkaXN0cmlidXRpb24NCnBsb3QodGVzdF9hdWNzLCBjb2w9InJlZCIsIHBjaD0yMCwNCiAgICAgbWFpbj0iQVVDIFRlc3QgRGlzdHJpYnV0aW9uIiwNCiAgICAgeGxhYj0iSXRlcmF0aW9uIiwgeWxhYj0iQVVDIikNCmFibGluZShoPW1lYW4odGVzdF9hdWNzKSwgY29sPSJibHVlIiwgbHdkPTIsIGx0eT0yKSAgIyBBZGQgdGhpcyBsaW5lIHRvIHNob3cgbWVhbg0KYWJsaW5lKGg9bWVhbih0ZXN0X2F1Y3MpIC0gMS45NiAqIHNkKHRlc3RfYXVjcyksIGNvbD0iZ3JlZW4iLCBsd2Q9MiwgbHR5PTMpDQphYmxpbmUoaD1tZWFuKHRlc3RfYXVjcykgKyAxLjk2ICogc2QodGVzdF9hdWNzKSwgY29sPSJncmVlbiIsIGx3ZD0yLCBsdHk9MykNCmxlZ2VuZCgiYm90dG9tcmlnaHQiLCANCiAgICAgICBsZWdlbmQ9YygiQVVDIFZhbHVlcyIsICJNZWFuIiwgIjk1JSBDSSBCb3VuZHMiKSwNCiAgICAgICBjb2w9YygicmVkIiwgImJsdWUiLCAiZ3JlZW4iKSwNCiAgICAgICBsdHk9YyhOQSwgMiwgMyksDQogICAgICAgcGNoPWMoMjAsIE5BLCBOQSkpDQoNCiMgTm93IHRyYWluIGZpbmFsIG1vZGVsIG9uIGZ1bGwgZGF0YSBmb3IgeiBzY29yZXMNCmRtX2Z1bGwgPC0geGdiLkRNYXRyaXgoZGF0YSA9IHhzLCBsYWJlbCA9IHkpDQpmaW5hbF9tb2RlbCA8LSB4Z2IudHJhaW4oDQogIHBhcmFtcyA9IGJlc3RfcGFyYW1zX2xpc3QsDQogIGRhdGEgPSBkbV9mdWxsLA0KICBucm91bmRzID0gYmVzdF9wYXJhbXNbWyJucm91bmRzIl1dLA0KICB2ZXJib3NlID0gRkFMU0UNCikNCg0KIyBHZXQgcHJvYmFiaWxpdHkgcHJlZGljdGlvbnMgKHopIGZvciBBTEwgZGF0YQ0KeiA8LSBwcmVkaWN0KGZpbmFsX21vZGVsLCB4Z2IuRE1hdHJpeChkYXRhID0geHMpKQ0KYGBgDQoNCg0KYGBge3J9DQojIENhbGN1bGF0ZSByZXNpZHVhbHMgZm9yIFhHQm9vc3QgcHJlZGljdGlvbnMNCnkgPC0gYXMubnVtZXJpYyhhcy5jaGFyYWN0ZXIoc2VsZWN0X2RhdGEkYXR0ZW1wdCkpDQpyZXNpZHVhbHMgPC0geSAtIHoNCg0KIyBIaXN0b2dyYW0gb2YgcmVzaWR1YWxzDQpoaXN0KHJlc2lkdWFscywgbWFpbj0iRGlzdHJpYnV0aW9uIG9mIFhHQm9vc3QgTW9kZWwgUmVzaWR1YWxzIiwgeGxhYj0iUmVzaWR1YWwiLCBicmVha3M9MTAwKQ0KYGBgDQoNCmBgYHtyfQ0KIyBwbG90IG91dCB0aGUgeiB2YWx1ZXNcDQpwbG90KGRlbnNpdHkoeiksIA0KICAgICBtYWluID0gIkRlbnNpdHkgb2YgWiBQcmVkaWN0aW9ucyIsDQogICAgIHhsYWIgPSAiUHJlZGljdGVkIFByb2JhYmlsaXR5IG9mIEF0dGVtcHQiLA0KICAgICB5bGFiID0gIkRlbnNpdHkiKQ0KYGBgDQoNCmBgYHtyfQ0KIyBDYWxjdWxhdGUgR0lNUiAobGFtYmRhKSBUaGlzIGlzIEdlbmVyYWxpemVkIGludmVyc2UgbWlsbHMgcmF0aW8NCkdJTVIgPC0gZG5vcm0ocW5vcm0oeikpIC8gKDEgLSBwbm9ybShxbm9ybSh6KSkpDQoNCiMgQWRkIEdJTVIgdG8gdGhlIGRhdGENCnNlbGVjdF9kYXRhWywgR0lNUiA6PSBHSU1SXQ0KDQojIFByaW50IHZhcmlhYmxlIGltcG9ydGENCmBgYA0KDQpgYGB7cn0NCiMgQ3JlYXRlIGEgZGF0YS50YWJsZSB3aXRoIGp1c3QgbXlfaWQgYW5kIEdJTVIgZnJvbSBzZWxlY3RfZGF0YQ0KR0lNUl9kdCA8LSBkYXRhLnRhYmxlKG15X2lkID0gc2VsZWN0X2RhdGEkbXlfaWQsIEdJTVIgPSBHSU1SKQ0KDQojIEFkZCBHSU1SIHRvIG91dGNvbWVfZGF0YSBieSBtYXRjaGluZyBvbiBteV9pZA0Kb3V0Y29tZV9kYXRhW0dJTVJfZHQsIEdJTVIgOj0gaS5HSU1SLCBvbiA9ICJteV9pZCJdDQpgYGANCg0KYGBge3J9DQojcmVtb3ZlIGNvbHVtbnMgdG8gcHJldmVudCBwZXJmZWN0IGNvbGluZWFyaXR5DQpvdXRjb21lX2RhdGEgPC0gb3V0Y29tZV9kYXRhWywgbXlfaWQgOj0gTlVMTF0NCm91dGNvbWVfZGF0YVssIHlhcmRsaW5lXzMxXzQwIDo9IE5VTExdDQpvdXRjb21lX2RhdGFbLCB5ZWFyMjAyMl90ZWFtX0NMRSA6PSBOVUxMXSAjIHRpZWQgZm9yIG1vc3QgYXR0ZW1wdHMgd2l0aCAzMQ0KYGBgDQoNCmBgYHtyfQ0Kb3V0Y29tZV9kYXRhWywgY29udmVyc2lvbiA6PSBhcy5udW1lcmljKGFzLmNoYXJhY3Rlcihjb252ZXJzaW9uKSldDQojIFRoZW4gcnVuIE9MUyB3aXRoIEdJTVIgY29ycmVjdGlvbg0Kb2xzX21vZGVsIDwtIGxtKGNvbnZlcnNpb24gfiAgLiwgZGF0YSA9IG91dGNvbWVfZGF0YSkNCmBgYA0KDQpgYGB7cn0NCmxpYnJhcnkoc2FuZHdpY2gpDQpsaWJyYXJ5KGxtdGVzdCkNCg0KIyBHZXQgSEMwLWFkanVzdGVkIHQtdmFsdWVzIGFuZCBwLXZhbHVlcw0Kcm9idXN0X3Rlc3QgPC0gY29lZnRlc3Qob2xzX21vZGVsLCB2Y292ID0gdmNvdkhDKG9sc19tb2RlbCwgdHlwZSA9ICJIQzAiKSkNCnRfc3RhdHMgPC0gcm9idXN0X3Rlc3RbLCAidCB2YWx1ZSJdDQpwX3ZhbHVlcyA8LSByb2J1c3RfdGVzdFssICJQcig+fHR8KSJdDQoNCiMgRnVuY3Rpb24gdG8gYWRkIHNpZ25pZmljYW5jZSBzdGFycw0KZ2V0X3N0YXJzIDwtIGZ1bmN0aW9uKHApIHsNCiAgICBpZiAocCA8PSAwLjAxKSByZXR1cm4oIioqKiIpDQogICAgaWYgKHAgPD0gMC4wNSkgcmV0dXJuKCIqKiIpDQogICAgaWYgKHAgPD0gMC4xKSByZXR1cm4oIioiKQ0KICAgIGlmIChwIDw9IDAuMTUpIHJldHVybigiLiIpDQogICAgcmV0dXJuKCIiKQ0KfQ0KDQojIE1heGltdW0gd2lkdGggZm9yIHZhcmlhYmxlIG5hbWVzDQpuYW1lX3dpZHRoIDwtIDYwDQoNCiMgUHJpbnQgaGVhZGVyIHdpdGggYWxpZ25tZW50DQpjYXQoc3ByaW50ZigiJS0qcyAgJTEwcyAgJTEwcyAgJTRzXG4iLCBuYW1lX3dpZHRoLCAiVmFyaWFibGUiLCAidC12YWx1ZSIsICJwLXZhbHVlIiwgInNpZyIpKQ0KY2F0KHNwcmludGYoIiUtKnMgICUxMHMgICUxMHMgICU0c1xuIiwgbmFtZV93aWR0aCwgIi0tLS0tLS0tLSIsICItLS0tLS0tIiwgIi0tLS0tLS0iLCAiLS0tLSIpKQ0KDQojIExvb3AgdGhyb3VnaCBhbmQgcHJpbnQgdmFsdWVzDQpmb3IgKGkgaW4gMTpsZW5ndGgodF9zdGF0cykpIHsNCiAgICB2YXJfbmFtZSA8LSByb3duYW1lcyhyb2J1c3RfdGVzdClbaV0NCiAgICAjIFRydW5jYXRlIG5hbWUgaWYgdG9vIGxvbmcNCiAgICBpZiAobmNoYXIodmFyX25hbWUpID4gbmFtZV93aWR0aCkgew0KICAgICAgICB2YXJfbmFtZSA8LSBwYXN0ZTAoc3Vic3RyKHZhcl9uYW1lLCAxLCBuYW1lX3dpZHRoLTMpLCAiLi4uIikNCiAgICB9DQogICAgY2F0KHNwcmludGYoIiUtKnMgICUxMC40ZiAgJTEwLjRmICAlNHNcbiIsIA0KICAgICAgICAgICAgICAgIG5hbWVfd2lkdGgsIHZhcl9uYW1lLCANCiAgICAgICAgICAgICAgICB0X3N0YXRzW2ldLCBwX3ZhbHVlc1tpXSwNCiAgICAgICAgICAgICAgICBnZXRfc3RhcnMocF92YWx1ZXNbaV0pKSkNCn0NCg0KY2F0KCJcblNpZ25pZmljYW5jZSBjb2RlczogMCAnKioqJyAwLjAxICcqKicgMC4wNSAnKicgMC4xICcuJyAwLjE1IikNCmBgYA0KDQoNCmBgYHtyfQ0KIyBDcmVhdGUgYSBjb3B5IG9mIG91dGNvbWVfZGF0YSB3aXRob3V0IEdJTVINCm91dGNvbWVfZGF0YV9ub19naW1yIDwtIGNvcHkob3V0Y29tZV9kYXRhKQ0Kb3V0Y29tZV9kYXRhX25vX2dpbXJbLCBHSU1SIDo9IE5VTExdDQpvdXRjb21lX2RhdGFfbm9fZ2ltclssIG15X2lkIDo9IE5VTExdDQoNCiMgUnVuIE9MUyB3aXRob3V0IEdJTVIgY29ycmVjdGlvbg0Kb2xzX21vZGVsX25vX2dpbXIgPC0gbG0oY29udmVyc2lvbiB+IC4sIGRhdGEgPSBvdXRjb21lX2RhdGFfbm9fZ2ltcikNCg0KIyBHZXQgSEMwLWFkanVzdGVkIHQtdmFsdWVzIGFuZCBwLXZhbHVlcw0Kcm9idXN0X3Rlc3Rfbm9fZ2ltciA8LSBjb2VmdGVzdChvbHNfbW9kZWxfbm9fZ2ltciwgdmNvdiA9IHZjb3ZIQyhvbHNfbW9kZWxfbm9fZ2ltciwgdHlwZSA9ICJIQzAiKSkNCnRfc3RhdHNfbm9fZ2ltciA8LSByb2J1c3RfdGVzdF9ub19naW1yWywgInQgdmFsdWUiXQ0KcF92YWx1ZXNfbm9fZ2ltciA8LSByb2J1c3RfdGVzdF9ub19naW1yWywgIlByKD58dHwpIl0NCg0KIyBQcmludCBoZWFkZXIgd2l0aCBhbGlnbm1lbnQNCmNhdChzcHJpbnRmKCIlLSpzICAlMTBzICAlMTBzICAlNHNcbiIsIG5hbWVfd2lkdGgsICJWYXJpYWJsZSIsICJ0LXZhbHVlIiwgInAtdmFsdWUiLCAic2lnIikpDQpjYXQoc3ByaW50ZigiJS0qcyAgJTEwcyAgJTEwcyAgJTRzXG4iLCBuYW1lX3dpZHRoLCAiLS0tLS0tLS0tIiwgIi0tLS0tLS0iLCAiLS0tLS0tLSIsICItLS0tIikpDQoNCiMgTG9vcCB0aHJvdWdoIGFuZCBwcmludCB2YWx1ZXMNCmZvciAoaSBpbiAxOmxlbmd0aCh0X3N0YXRzX25vX2dpbXIpKSB7DQogICAgdmFyX25hbWUgPC0gcm93bmFtZXMocm9idXN0X3Rlc3Rfbm9fZ2ltcilbaV0NCiAgICAjIFRydW5jYXRlIG5hbWUgaWYgdG9vIGxvbmcNCiAgICBpZiAobmNoYXIodmFyX25hbWUpID4gbmFtZV93aWR0aCkgew0KICAgICAgICB2YXJfbmFtZSA8LSBwYXN0ZTAoc3Vic3RyKHZhcl9uYW1lLCAxLCBuYW1lX3dpZHRoLTMpLCAiLi4uIikNCiAgICB9DQogICAgY2F0KHNwcmludGYoIiUtKnMgICUxMC40ZiAgJTEwLjRmICAlNHNcbiIsIA0KICAgICAgICAgICAgICAgIG5hbWVfd2lkdGgsIHZhcl9uYW1lLCANCiAgICAgICAgICAgICAgICB0X3N0YXRzX25vX2dpbXJbaV0sIHBfdmFsdWVzX25vX2dpbXJbaV0sDQogICAgICAgICAgICAgICAgZ2V0X3N0YXJzKHBfdmFsdWVzX25vX2dpbXJbaV0pKSkNCn0NCg0KY2F0KCJcblNpZ25pZmljYW5jZSBjb2RlczogMCAnKioqJyAwLjAxICcqKicgMC4wNSAnKicgMC4xICcuJyAwLjE1IikNCg0KYGBgDQo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("heckman.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>

<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Heckman Selection Model Analysis</title>

<script src="site_libs/header-attrs-2.22/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">4th Downs in the NFL</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="heckman.html">Heckman Selection</a>
</li>
<li>
  <a href="xgboost.html">XGBoost Prediction</a>
</li>
<li>
  <a href="attendance.html">Attendance Impact</a>
</li>
<li>
  <a href="thirddown.html">Third Down Analysis</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Heckman Selection Model Analysis</h1>

</div>


<pre class="r"><code>library(data.table)
outcome_data &lt;- fread(&quot;predict_outcome.csv.gz&quot;)
select_data &lt;- fread(&quot;predict_select.csv.gz&quot;)</code></pre>
<pre class="r"><code>select_data[, attempt := as.numeric(as.character(attempt))]</code></pre>
<pre class="r"><code># Load required libraries
library(data.table)
library(xgboost)
library(ROCR)
library(parallel)

# Prepare the XGBoost matrices
xs &lt;- model.matrix(~ . - 1 - attempt - my_id, data = select_data)
y &lt;- as.numeric(as.character(select_data$attempt))

# Create parameter grid
grid &lt;- expand.grid(
  eta = seq(0.001, 0.1, by = 0.02),
  max_depth = seq(5, 7, by = 2),
  min_child_weight = seq(1, 1, by = 1),        
  subsample = seq(0.8, 0.8, by = 0.2),
  colsample_bytree = seq(0.8, 0.8, by = 0.2),
  lambda = seq(1, 1, by = 1),                
  alpha = seq(0, 0, by = 1),                  
  gamma = seq(0, 0, by = 0.1),               
  nrounds = seq(100, 500, by = 50)
)

# Sample grid points
conf_lev &lt;- .95
num_max &lt;- 5
n &lt;- ceiling(log(1-conf_lev)/log(1-num_max/nrow(grid)))
ind &lt;- sample(nrow(grid), n, replace = FALSE)
rgrid &lt;- grid[ind, ]

# Set up parallel processing
nc &lt;- detectCores() - 1

# Validation phase
cat(&quot;\nPhase 1: Validation Phase\n&quot;)</code></pre>
<pre><code>## 
## Phase 1: Validation Phase</code></pre>
<pre class="r"><code>n_validations &lt;- 20
validation_results &lt;- matrix(nrow = nrow(rgrid), ncol = n_validations)

for (j in 1:nrow(rgrid)) {
  #cat(&quot;\nTesting parameter set&quot;, j, &quot;of&quot;, nrow(rgrid), &quot;\n&quot;)
  
  for (i in 1:n_validations) {
    # Create validation split
    idx &lt;- unique(sample(nrow(xs), nrow(xs), T))
    train_x &lt;- xs[idx, ]
    train_y &lt;- y[idx]
    val_x &lt;- xs[-idx, ]
    val_y &lt;- y[-idx]
    
    # Undersample majority class in training data
    train_idx_0 &lt;- which(train_y == 0)
    train_idx_1 &lt;- which(train_y == 1)
    
    # Get number of minority class samples
    n_minority &lt;- length(train_idx_1)
    
    # Randomly sample from majority class
    train_idx_0_sampled &lt;- sample(train_idx_0, n_minority)
    
    # Combine indices for balanced dataset
    balanced_idx &lt;- c(train_idx_0_sampled, train_idx_1)
    
    # Create balanced training dataset
    train_x_balanced &lt;- train_x[balanced_idx, ]
    train_y_balanced &lt;- train_y[balanced_idx]
    
    prm &lt;- list(
      booster = &quot;gbtree&quot;,
      objective = &quot;binary:logistic&quot;,
      max_depth = rgrid[j, &quot;max_depth&quot;],
      eta = rgrid[j, &quot;eta&quot;],
      subsample = rgrid[j, &quot;subsample&quot;],
      colsample_bytree = rgrid[j, &quot;colsample_bytree&quot;],
      gamma = rgrid[j, &quot;gamma&quot;],
      min_child_weight = rgrid[j, &quot;min_child_weight&quot;],
      alpha = rgrid[j, &quot;alpha&quot;],
      lambda = rgrid[j, &quot;lambda&quot;],
      nthread = nc
    )
    
    dm_train &lt;- xgb.DMatrix(data = train_x_balanced, label = train_y_balanced)
    mdl &lt;- xgb.train(
      params = prm,
      data = dm_train,
      nrounds = rgrid[j, &quot;nrounds&quot;],
      verbose = FALSE
    )
    
    p &lt;- predict(mdl, xgb.DMatrix(data = val_x))
    pred &lt;- prediction(p, val_y)
    validation_results[j, i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
  }
  
  #cat(&quot;Mean AUC:&quot;, mean(validation_results[j,]), &quot;\n&quot;)
  #cat(&quot;SD AUC:&quot;, sd(validation_results[j,]), &quot;\n&quot;)
}

# Run 100 tests with best parameters
cat(&quot;\nRunning X test iterations with best parameters...\n&quot;)</code></pre>
<pre><code>## 
## Running X test iterations with best parameters...</code></pre>
<pre class="r"><code>test_aucs &lt;- c()

best_params_idx &lt;- which.max(rowMeans(validation_results))
best_params &lt;- rgrid[best_params_idx,]

# Train final model with best parameters
best_params_list &lt;- as.list(best_params[-which(names(best_params) == &quot;nrounds&quot;)])
best_params_list$booster &lt;- &quot;gbtree&quot;
best_params_list$objective &lt;- &quot;binary:logistic&quot;
best_params_list$nthread &lt;- nc

for(i in 1:100) {
  #cat(&quot;\nIteration&quot;, i, &quot;of 100\n&quot;)       
  # Create test split
  idx &lt;- unique(sample(nrow(xs), nrow(xs), T))
  train_x &lt;- xs[idx, ]
  train_y &lt;- y[idx]
  test_x &lt;- xs[-idx, ]
  test_y &lt;- y[-idx]
  
  # Undersample training data
  train_idx_0 &lt;- which(train_y == 0)
  train_idx_1 &lt;- which(train_y == 1)
  n_minority &lt;- length(train_idx_1)
  train_idx_0_sampled &lt;- sample(train_idx_0, n_minority)
  balanced_idx &lt;- c(train_idx_0_sampled, train_idx_1)
  
  # Create balanced training dataset
  train_x_balanced &lt;- train_x[balanced_idx, ]
  train_y_balanced &lt;- train_y[balanced_idx]
  
  # Train model
  dm_train &lt;- xgb.DMatrix(data = train_x_balanced, label = train_y_balanced)
  mdl &lt;- xgb.train(
    params = best_params_list,
    data = dm_train,
    nrounds = best_params[[&quot;nrounds&quot;]],
    verbose = FALSE
  )
  
  # Test on unbalanced test set
  p &lt;- predict(mdl, xgb.DMatrix(data = test_x))
  pred &lt;- prediction(p, test_y)
  test_aucs[i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
}

# Print results
cat(&quot;\nTest Results over 100 iterations:\n&quot;)</code></pre>
<pre><code>## 
## Test Results over 100 iterations:</code></pre>
<pre class="r"><code>cat(&quot;Mean AUC:&quot;, mean(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## Mean AUC: 0.8943759</code></pre>
<pre class="r"><code>cat(&quot;SD AUC:&quot;, sd(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## SD AUC: 0.00351676</code></pre>
<pre class="r"><code>cat(&quot;95% CI:&quot;, mean(test_aucs) - 1.96 * sd(test_aucs), 
    &quot;to&quot;, mean(test_aucs) + 1.96 * sd(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## 95% CI: 0.8874831 to 0.9012688</code></pre>
<pre class="r"><code># Plotting AUC distribution - removed type=&quot;o&quot; to not connect dots
plot(test_aucs, col=&quot;red&quot;, pch=20,
     main=&quot;AUC Test Distribution&quot;,
     xlab=&quot;Iteration&quot;, ylab=&quot;AUC&quot;)
abline(h=mean(test_aucs), col=&quot;blue&quot;, lwd=2, lty=2)
abline(h=mean(test_aucs) - 1.96 * sd(test_aucs), col=&quot;green&quot;, lwd=2, lty=3)
abline(h=mean(test_aucs) + 1.96 * sd(test_aucs), col=&quot;green&quot;, lwd=2, lty=3)
legend(&quot;bottomright&quot;, 
       legend=c(&quot;AUC Values&quot;, &quot;Mean&quot;, &quot;95% CI Bounds&quot;),
       col=c(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;),
       lty=c(NA, 2, 3),
       pch=c(20, NA, NA))</code></pre>
<p><img src="heckman_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code># Now train final model on full data for z scores
final_idx_0 &lt;- which(y == 0)
final_idx_1 &lt;- which(y == 1)
n_minority_final &lt;- length(final_idx_1)
final_idx_0_sampled &lt;- sample(final_idx_0, n_minority_final)
final_balanced_idx &lt;- c(final_idx_0_sampled, final_idx_1)

# Create balanced final dataset
xs_balanced &lt;- xs[final_balanced_idx, ]
y_balanced &lt;- y[final_balanced_idx]

dm_full &lt;- xgb.DMatrix(data = xs_balanced, label = y_balanced)
final_model &lt;- xgb.train(
  params = best_params_list,
  data = dm_full,
  nrounds = best_params[[&quot;nrounds&quot;]],
  verbose = FALSE
)

# Get probability predictions (z) for ALL data
z &lt;- predict(final_model, xgb.DMatrix(data = xs))</code></pre>
<pre class="r"><code># Calculate residuals for XGBoost predictions
y &lt;- as.numeric(as.character(select_data$attempt))
residuals &lt;- y - z

# Histogram of residuals
hist(residuals, main=&quot;Distribution of XGBoost Model Residuals&quot;, xlab=&quot;Residual&quot;, breaks=100)</code></pre>
<p><img src="heckman_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code># plot out the z values\
plot(density(z), 
     main = &quot;Density of Z Predictions&quot;,
     xlab = &quot;Predicted Probability of Attempt&quot;,
     ylab = &quot;Density&quot;)</code></pre>
<p><img src="heckman_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code># Calculate GIMR (lambda) This is Generalized inverse mills ratio
GIMR &lt;- dnorm(qnorm(z)) / (1 - pnorm(qnorm(z)))

# Add GIMR to the data
select_data[, GIMR := GIMR]

# Print variable importa</code></pre>
<pre class="r"><code># Create a data.table with just my_id and GIMR from select_data
GIMR_dt &lt;- data.table(my_id = select_data$my_id, GIMR = GIMR)

# Add GIMR to outcome_data by matching on my_id
outcome_data[GIMR_dt, GIMR := i.GIMR, on = &quot;my_id&quot;]</code></pre>
<pre class="r"><code>#kill - my_id
outcome_data &lt;- outcome_data[, my_id := NULL]
outcome_data[, year2017_team_ARI := NULL]
outcome_data &lt;- outcome_data[, yardline_1_10:= NULL]</code></pre>
<pre class="r"><code>outcome_data[, conversion := as.numeric(as.character(conversion))]
# Then run OLS with GIMR correction
ols_model &lt;- lm(conversion ~  ., data = outcome_data)</code></pre>
<pre class="r"><code>library(sandwich)
library(lmtest)

# Get HC0-adjusted t-values and p-values
robust_test &lt;- coeftest(ols_model, vcov = vcovHC(ols_model, type = &quot;HC0&quot;))
t_stats &lt;- robust_test[, &quot;t value&quot;]
p_values &lt;- robust_test[, &quot;Pr(&gt;|t|)&quot;]

# Function to add significance stars
get_stars &lt;- function(p) {
    if (p &lt;= 0.01) return(&quot;***&quot;)
    if (p &lt;= 0.05) return(&quot;**&quot;)
    if (p &lt;= 0.1) return(&quot;*&quot;)
    if (p &lt;= 0.15) return(&quot;.&quot;)
    return(&quot;&quot;)
}

# Maximum width for variable names
name_width &lt;- 20

# Print header with alignment
cat(sprintf(&quot;%-*s  %10s  %10s  %4s\n&quot;, name_width, &quot;Variable&quot;, &quot;t-value&quot;, &quot;p-value&quot;, &quot;sig&quot;))</code></pre>
<pre><code>## Variable                 t-value     p-value   sig</code></pre>
<pre class="r"><code>cat(sprintf(&quot;%-*s  %10s  %10s  %4s\n&quot;, name_width, &quot;---------&quot;, &quot;-------&quot;, &quot;-------&quot;, &quot;----&quot;))</code></pre>
<pre><code>## ---------                -------     -------  ----</code></pre>
<pre class="r"><code># Loop through and print values
for (i in 1:length(t_stats)) {
    var_name &lt;- rownames(robust_test)[i]
    # Truncate name if too long
    if (nchar(var_name) &gt; name_width) {
        var_name &lt;- paste0(substr(var_name, 1, name_width-3), &quot;...&quot;)
    }
    cat(sprintf(&quot;%-*s  %10.4f  %10.4f  %4s\n&quot;, 
                name_width, var_name, 
                t_stats[i], p_values[i],
                get_stars(p_values[i])))
}</code></pre>
<pre><code>## (Intercept)               1.5363      0.1246     .
## ydstogo                 -12.5440      0.0000   ***
## posteam_timeouts_...      1.3535      0.1760      
## defteam_timeouts_...      0.6969      0.4859      
## rush_attempt              7.1842      0.0000   ***
## week                      0.8271      0.4082      
## temp                     -0.6661      0.5054      
## wind                      0.8563      0.3919      
## vegas_wp                  1.7208      0.0854     *
## vegas_wp_posteam          0.9476      0.3434      
## total_line                2.2683      0.0234    **
## prep_days                 0.7186      0.4724      
## overall_win_pct           0.4610      0.6448      
## team_win_pct              0.7554      0.4501      
## prev_shotgun_rate         0.8041      0.4214      
## prev_singleback_rate      0.2681      0.7886      
## prev_empty_rate           0.7532      0.4514      
## prev_shotgun_success     -0.8880      0.3746      
## prev_singleback_s...      0.2372      0.8125      
## prev_empty_success        0.4125      0.6800      
## prev_stop_rate_run        0.3414      0.7328      
## prev_stop_rate_pass      -3.0167      0.0026   ***
## shotgun_rate              1.3575      0.1747      
## singleback_rate           0.8771      0.3805      
## empty_rate               -0.0459      0.9634      
## shotgun_success          -2.1419      0.0323    **
## singleback_success       -1.0143      0.3105      
## empty_success            -0.4069      0.6841      
## def_stop_rate_run         1.9136      0.0557     *
## def_stop_rate_pass       -0.9403      0.3471      
## avg_pass_rushers         -0.9608      0.3367      
## avg_box_defenders        -0.0945      0.9247      
## cover0_rate              -0.2623      0.7931      
## cover1_rate              -0.7119      0.4766      
## cover2_rate              -0.7313      0.4646      
## cover3_rate               1.3128      0.1893      
## cover4_rate               1.1393      0.2546      
## cover6_rate              -0.3317      0.7401      
## two_man_rate              2.0122      0.0443    **
## prevent_rate              2.8442      0.0045   ***
## home_attendance          -0.0323      0.9742      
## roof_outdoors            -0.2653      0.7908      
## posteam_type_away         1.0272      0.3044      
## offense_formation...      0.9894      0.3225      
## offense_formation...      0.3954      0.6926      
## offense_formation...      0.4049      0.6856      
## offense_player_1_...      2.7946      0.0052   ***
## offense_player_2_...     -1.4518      0.1467     .
## offense_player_4_...      0.0704      0.9438      
## offense_player_5_...     -0.3724      0.7096      
## offense_player_6_...     -0.7509      0.4527      
## offense_player_8_...     -1.8437      0.0653     *
## offense_player_9_...     -2.5804      0.0099   ***
## offense_player_10...     -0.6950      0.4871      
## offense_player_11...     -1.1588      0.2466      
## offense_player_12...      2.7790      0.0055   ***
## offense_player_14...     -0.8658      0.3866      
## offense_player_15...     -1.3846      0.1662      
## offense_player_16...     -1.0672      0.2859      
## offense_player_17...     -0.5394      0.5897      
## offense_player_20...      0.2013      0.8405      
## offense_player_22...     -1.6240      0.1045     .
## offense_player_23...      1.0968      0.2728      
## offense_player_24...     -5.2805      0.0000   ***
## offense_player_9_...     -2.0856      0.0371    **
## offense_player_1_...     -0.5179      0.6046      
## offense_player_9_...     -1.9182      0.0552     *
## offense_player_8_...      1.3090      0.1906      
## offense_player_14...      1.3108      0.1900      
## offense_player_8_...      0.2890      0.7726      
## offense_player_9_...      1.0722      0.2837      
## offense_player_1_...      3.0908      0.0020   ***
## offense_player_9_...      0.4540      0.6499      
## offense_player_9_...      0.7524      0.4519      
## offense_player_9_...     -1.3467      0.1782      
## offense_player_9_...      2.1441      0.0321    **
## offense_player_8_...     -1.1037      0.2698      
## offense_player_9_...      0.9880      0.3232      
## offense_player_9_...     -1.1150      0.2649      
## offense_player_9_...     -2.3431      0.0192    **
## offense_player_9_...      0.2158      0.8291      
## offense_player_14...      2.0387      0.0415    **
## offense_player_21...     -1.1690      0.2425      
## offense_player_8_...      0.1755      0.8607      
## offense_player_8_...     -0.1203      0.9042      
## offense_player_9_...      2.0398      0.0414    **
## offense_player_9_...     -1.9907      0.0466    **
## offense_player_1_...     -0.8983      0.3691      
## offense_player_8_...     -0.2747      0.7836      
## offense_player_19...     -0.1585      0.8740      
## offense_player_4_...     -0.5561      0.5782      
## offense_player_1_...      0.8181      0.4134      
## offense_player_9_...     -0.6897      0.4904      
## offense_player_9_...      1.5429      0.1229     .
## defense_player_1_...     -1.6448      0.1001     .
## defense_player_2_...      1.6608      0.0968     *
## defense_player_3_...      0.2118      0.8323      
## defense_player_4_...     -1.1112      0.2666      
## defense_player_5_...     -1.3980      0.1622      
## defense_player_6_...     -0.5802      0.5618      
## defense_player_9_...      0.6399      0.5223      
## defense_player_10...     -2.0103      0.0445    **
## defense_player_11...     -0.7550      0.4503      
## defense_player_12...     -0.4073      0.6838      
## defense_player_13...      1.9904      0.0466    **
## defense_player_14...      0.6370      0.5242      
## defense_player_15...      0.5411      0.5884      
## defense_player_16...      0.1583      0.8742      
## defense_player_17...      0.2710      0.7864      
## defense_player_18...      1.3295      0.1838      
## defense_player_19...      0.3828      0.7019      
## defense_player_20...     -0.3663      0.7141      
## defense_player_21...      0.8250      0.4094      
## defense_player_22...      0.8008      0.4233      
## defense_player_23...      0.8781      0.3799      
## defense_player_3_...      0.0022      0.9982      
## defense_player_3_...     -0.2103      0.8334      
## defense_player_3_...     -0.0692      0.9448      
## defense_player_3_...      0.3982      0.6905      
## defense_player_3_...      1.1219      0.2620      
## defense_player_17...     -1.0171      0.3092      
## defense_player_3_...      0.1324      0.8946      
## defense_player_3_...     -0.6323      0.5272      
## defense_player_15...      0.1926      0.8473      
## defense_player_3_...     -0.4223      0.6728      
## defense_player_3_...      0.6129      0.5400      
## defense_player_3_...      1.1185      0.2634      
## defense_player_1_...     -1.1012      0.2709      
## defense_player_20...     -1.0954      0.2734      
## defense_player_10...      2.2593      0.0239    **
## defense_player_3_...     -1.7152      0.0864     *
## defense_player_3_...      0.9676      0.3333      
## yardline_11_20            2.2355      0.0254    **
## yardline_21_30            1.9644      0.0496    **
## yardline_31_40            2.2436      0.0249    **
## yardline_41_50            3.9406      0.0001   ***
## yardline_51_60            2.5945      0.0095   ***
## yardline_61_70            3.1997      0.0014   ***
## yardline_71_80            3.5482      0.0004   ***
## yardline_81_90            3.0980      0.0020   ***
## yardline_91_100           1.3895      0.1648      
## year2017_team_BUF        -0.7517      0.4523      
## year2017_team_CHI        -0.1577      0.8747      
## year2017_team_CLE         0.7860      0.4319      
## year2017_team_DAL        -1.1195      0.2630      
## year2017_team_DET        -0.6097      0.5421      
## year2017_team_GB          1.7963      0.0725     *
## year2017_team_HOU         1.4016      0.1611      
## year2017_team_MIA        -1.1763      0.2395      
## year2017_team_MIN        -0.7103      0.4776      
## year2017_team_NE         -0.4180      0.6760      
## year2017_team_SF          1.5893      0.1121     .
## year2017_team_BAL        -0.2180      0.8274      
## year2017_team_DEN        -0.2551      0.7987      
## year2017_team_LA         -0.0573      0.9543      
## year2017_team_NYG        -0.7682      0.4424      
## year2017_team_OAK        -0.8831      0.3772      
## year2017_team_SEA         0.3858      0.6997      
## year2017_team_CAR         0.2203      0.8256      
## year2017_team_CIN         0.6743      0.5001      
## year2017_team_IND         0.6534      0.5135      
## year2017_team_NO          0.5553      0.5787      
## year2017_team_PHI         0.4088      0.6827      
## year2017_team_PIT        -1.5604      0.1188     .
## year2017_team_TEN        -0.2652      0.7908      
## year2017_team_WAS         0.0946      0.9246      
## year2017_team_KC          1.0924      0.2747      
## year2017_team_LAC        -0.2861      0.7748      
## year2017_team_NYJ         0.6987      0.4848      
## year2017_team_TB          0.3177      0.7508      
## year2017_team_ATL         0.0011      0.9991      
## year2017_team_JAX         0.2387      0.8114      
## year2018_team_ARI         0.0534      0.9574      
## year2018_team_BAL         0.1833      0.8546      
## year2018_team_CAR         0.1019      0.9189      
## year2018_team_CLE        -0.2467      0.8052      
## year2018_team_DET         0.4236      0.6719      
## year2018_team_HOU         0.8631      0.3881      
## year2018_team_IND        -0.3724      0.7096      
## year2018_team_KC          0.5074      0.6119      
## year2018_team_NYG         0.5251      0.5996      
## year2018_team_OAK        -0.5195      0.6034      
## year2018_team_PHI         0.1842      0.8539      
## year2018_team_SEA        -0.5812      0.5611      
## year2018_team_BUF        -0.6732      0.5009      
## year2018_team_CHI        -0.2606      0.7944      
## year2018_team_CIN        -0.3587      0.7198      
## year2018_team_DAL        -0.4255      0.6705      
## year2018_team_DEN        -0.1970      0.8439      
## year2018_team_GB         -0.4051      0.6855      
## year2018_team_LAC         0.0127      0.9899      
## year2018_team_NE         -0.4382      0.6613      
## year2018_team_NO          0.6236      0.5329      
## year2018_team_PIT         0.3690      0.7122      
## year2018_team_SF          0.1435      0.8859      
## year2018_team_MIA         0.5564      0.5780      
## year2018_team_MIN         0.0294      0.9765      
## year2018_team_NYJ         0.5268      0.5984      
## year2018_team_TB          0.2971      0.7664      
## year2018_team_ATL         0.2563      0.7978      
## year2018_team_JAX        -0.1785      0.8583      
## year2018_team_LA         -0.7444      0.4567      
## year2018_team_TEN         0.2638      0.7920      
## year2018_team_WAS        -0.0133      0.9894      
## year2019_team_ARI        -0.2124      0.8318      
## year2019_team_BUF        -0.6538      0.5133      
## year2019_team_CHI         0.3521      0.7248      
## year2019_team_CLE         0.7914      0.4287      
## year2019_team_DAL        -0.3473      0.7284      
## year2019_team_IND        -0.3196      0.7493      
## year2019_team_JAX         0.2200      0.8259      
## year2019_team_KC          0.1695      0.8654      
## year2019_team_LAC        -0.7317      0.4644      
## year2019_team_MIN        -0.6890      0.4909      
## year2019_team_NE          0.0635      0.9494      
## year2019_team_NO         -1.0321      0.3021      
## year2019_team_PHI         0.1341      0.8933      
## year2019_team_SEA         0.0826      0.9342      
## year2019_team_SF         -0.0055      0.9956      
## year2019_team_TB         -0.5240      0.6003      
## year2019_team_BAL         0.1813      0.8562      
## year2019_team_CAR        -0.2697      0.7874      
## year2019_team_DEN         0.4274      0.6691      
## year2019_team_DET        -0.3999      0.6893      
## year2019_team_HOU        -0.3132      0.7541      
## year2019_team_LA         -0.3466      0.7289      
## year2019_team_MIA        -1.3823      0.1670      
## year2019_team_NYG        -0.8139      0.4158      
## year2019_team_NYJ        -1.3966      0.1626      
## year2019_team_OAK        -0.4228      0.6725      
## year2019_team_PIT        -1.2730      0.2031      
## year2019_team_TEN        -0.5888      0.5560      
## year2019_team_CIN         0.5123      0.6085      
## year2019_team_WAS        -0.2211      0.8251      
## year2019_team_ATL        -0.0345      0.9725      
## year2019_team_GB         -0.4341      0.6642      
## year2020_team_ATL         0.0719      0.9427      
## year2020_team_BAL         0.3126      0.7546      
## year2020_team_BUF        -0.0304      0.9757      
## year2020_team_CAR         0.7854      0.4322      
## year2020_team_CIN         0.7606      0.4469      
## year2020_team_DEN        -0.3491      0.7270      
## year2020_team_DET        -0.5393      0.5897      
## year2020_team_JAX        -0.4380      0.6614      
## year2020_team_KC          0.3701      0.7113      
## year2020_team_LA         -0.7442      0.4568      
## year2020_team_MIN         0.6463      0.5182      
## year2020_team_NE         -0.3187      0.7500      
## year2020_team_NO          0.3372      0.7360      
## year2020_team_NYG        -0.0667      0.9468      
## year2020_team_SF          0.1428      0.8865      
## year2020_team_WAS         0.2529      0.8004      
## year2020_team_CHI         0.2205      0.8255      
## year2020_team_DAL        -0.0817      0.9349      
## year2020_team_GB         -0.1035      0.9176      
## year2020_team_HOU        -0.2395      0.8107      
## year2020_team_MIA        -0.6998      0.4841      
## year2020_team_NYJ         0.1672      0.8672      
## year2020_team_TB          0.6079      0.5433      
## year2020_team_TEN        -0.1215      0.9033      
## year2020_team_ARI         0.5033      0.6148      
## year2020_team_CLE        -0.8104      0.4178      
## year2020_team_IND        -0.3443      0.7306      
## year2020_team_LAC         0.3146      0.7531      
## year2020_team_PHI         0.4744      0.6353      
## year2020_team_SEA        -0.3229      0.7468      
## year2020_team_LV          0.5692      0.5693      
## year2020_team_PIT        -0.3827      0.7019      
## year2021_team_ATL        -0.7904      0.4293      
## year2021_team_BUF         0.2693      0.7877      
## year2021_team_CIN        -0.8876      0.3748      
## year2021_team_DAL        -0.0096      0.9924      
## year2021_team_DEN         0.2023      0.8397      
## year2021_team_DET        -0.3350      0.7377      
## year2021_team_KC          0.2890      0.7726      
## year2021_team_LA         -0.0750      0.9402      
## year2021_team_LV          0.4073      0.6838      
## year2021_team_MIN        -0.0578      0.9539      
## year2021_team_NE          0.2844      0.7761      
## year2021_team_NO          0.2030      0.8391      
## year2021_team_NYG         0.3800      0.7040      
## year2021_team_SF          0.1147      0.9087      
## year2021_team_TEN        -0.1422      0.8870      
## year2021_team_ARI         0.5121      0.6086      
## year2021_team_BAL         0.6286      0.5296      
## year2021_team_CAR        -0.3654      0.7148      
## year2021_team_CHI        -1.3389      0.1807      
## year2021_team_GB          0.5250      0.5996      
## year2021_team_IND        -0.3549      0.7227      
## year2021_team_LAC         0.2878      0.7735      
## year2021_team_MIA         0.1234      0.9018      
## year2021_team_NYJ         0.0867      0.9309      
## year2021_team_PHI        -0.7358      0.4619      
## year2021_team_SEA        -1.0269      0.3045      
## year2021_team_TB          0.1801      0.8571      
## year2021_team_WAS        -0.4134      0.6793      
## year2021_team_CLE        -0.6278      0.5302      
## year2021_team_HOU        -0.2465      0.8053      
## year2021_team_JAX        -0.0007      0.9994      
## year2021_team_PIT        -0.0004      0.9997      
## year2022_team_ARI        -1.0619      0.2883      
## year2022_team_ATL        -1.2212      0.2221      
## year2022_team_CAR         0.4915      0.6231      
## year2022_team_CHI        -0.4627      0.6436      
## year2022_team_CIN        -0.6464      0.5181      
## year2022_team_HOU        -0.1997      0.8417      
## year2022_team_IND        -0.6119      0.5407      
## year2022_team_LAC        -0.2107      0.8331      
## year2022_team_MIA        -0.9182      0.3586      
## year2022_team_SEA        -0.2678      0.7889      
## year2022_team_TB          0.3184      0.7502      
## year2022_team_TEN         0.6721      0.5015      
## year2022_team_WAS        -0.0843      0.9328      
## year2022_team_BAL        -0.9886      0.3229      
## year2022_team_BUF         0.2520      0.8010      
## year2022_team_DAL         0.0745      0.9406      
## year2022_team_DET        -0.2566      0.7975      
## year2022_team_GB         -0.5182      0.6043      
## year2022_team_JAX        -0.4784      0.6324      
## year2022_team_KC         -0.4122      0.6802      
## year2022_team_LA          0.8268      0.4084      
## year2022_team_LV          0.4024      0.6874      
## year2022_team_NO         -0.0862      0.9313      
## year2022_team_PHI         0.5771      0.5639      
## year2022_team_PIT         0.9545      0.3399      
## year2022_team_CLE         0.1275      0.8985      
## year2022_team_DEN         0.2123      0.8319      
## year2022_team_MIN        -0.7044      0.4812      
## year2022_team_NE          0.2366      0.8130      
## year2022_team_NYJ        -0.5030      0.6150      
## year2022_team_NYG        -0.4298      0.6673      
## year2022_team_SF         -0.6681      0.5041      
## year2023_team_BAL        -0.2950      0.7680      
## year2023_team_CHI        -1.0341      0.3012      
## year2023_team_CLE        -1.0255      0.3052      
## year2023_team_GB          0.2057      0.8370      
## year2023_team_IND         0.5204      0.6028      
## year2023_team_KC          0.2020      0.8399      
## year2023_team_LAC         0.1273      0.8987      
## year2023_team_LV          0.1505      0.8804      
## year2023_team_MIA         0.2667      0.7898      
## year2023_team_MIN         0.5900      0.5553      
## year2023_team_NO         -0.0826      0.9342      
## year2023_team_NYG         0.1080      0.9140      
## year2023_team_SEA        -1.2436      0.2137      
## year2023_team_SF          0.4115      0.6807      
## year2023_team_WAS         0.3789      0.7048      
## year2023_team_ATL        -0.7798      0.4355      
## year2023_team_BUF        -0.4878      0.6257      
## year2023_team_CAR        -0.0802      0.9361      
## year2023_team_DAL         0.2358      0.8136      
## year2023_team_DEN        -0.1198      0.9047      
## year2023_team_HOU         0.1398      0.8888      
## year2023_team_LA          0.3287      0.7424      
## year2023_team_NE          0.1525      0.8788      
## year2023_team_PHI        -0.1771      0.8595      
## year2023_team_PIT        -0.0109      0.9913      
## year2023_team_TEN         0.1503      0.8805      
## year2023_team_ARI        -1.0914      0.2752      
## year2023_team_CIN        -0.7393      0.4598      
## year2023_team_DET         0.0606      0.9517      
## year2023_team_TB          0.5063      0.6126      
## year2023_team_JAX        -0.4133      0.6794      
## year2023_team_NYJ         0.7902      0.4294      
## is_first_half            -0.8945      0.3711      
## time_in_half              1.8025      0.0715     *
## GIMR                      2.5475      0.0109    **</code></pre>
<pre class="r"><code>cat(&quot;\nSignificance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15&quot;)</code></pre>
<pre><code>## 
## Significance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15</code></pre>
<pre class="r"><code># get vifs
#library(car)
#vif(ols_model)</code></pre>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIkhlY2ttYW4gU2VsZWN0aW9uIE1vZGVsIEFuYWx5c2lzIg0Kb3V0cHV0OiBodG1sX2RvY3VtZW50DQotLS0NCg0KYGBge3Igb3B0aW9ucywgaW5jbHVkZT1GQUxTRX0NCm9wdGlvbnMobWF4LnByaW50PTEwMDAwKQ0KYGBgDQoNCmBgYHtyfQ0KbGlicmFyeShkYXRhLnRhYmxlKQ0Kb3V0Y29tZV9kYXRhIDwtIGZyZWFkKCJwcmVkaWN0X291dGNvbWUuY3N2Lmd6IikNCnNlbGVjdF9kYXRhIDwtIGZyZWFkKCJwcmVkaWN0X3NlbGVjdC5jc3YuZ3oiKQ0KYGBgDQoNCmBgYHtyfQ0Kc2VsZWN0X2RhdGFbLCBhdHRlbXB0IDo9IGFzLm51bWVyaWMoYXMuY2hhcmFjdGVyKGF0dGVtcHQpKV0NCmBgYA0KDQpgYGB7cn0NCiMgTG9hZCByZXF1aXJlZCBsaWJyYXJpZXMNCmxpYnJhcnkoZGF0YS50YWJsZSkNCmxpYnJhcnkoeGdib29zdCkNCmxpYnJhcnkoUk9DUikNCmxpYnJhcnkocGFyYWxsZWwpDQoNCiMgUHJlcGFyZSB0aGUgWEdCb29zdCBtYXRyaWNlcw0KeHMgPC0gbW9kZWwubWF0cml4KH4gLiAtIDEgLSBhdHRlbXB0IC0gbXlfaWQsIGRhdGEgPSBzZWxlY3RfZGF0YSkNCnkgPC0gYXMubnVtZXJpYyhhcy5jaGFyYWN0ZXIoc2VsZWN0X2RhdGEkYXR0ZW1wdCkpDQoNCiMgQ3JlYXRlIHBhcmFtZXRlciBncmlkDQpncmlkIDwtIGV4cGFuZC5ncmlkKA0KICBldGEgPSBzZXEoMC4wMDEsIDAuMSwgYnkgPSAwLjAyKSwNCiAgbWF4X2RlcHRoID0gc2VxKDUsIDcsIGJ5ID0gMiksDQogIG1pbl9jaGlsZF93ZWlnaHQgPSBzZXEoMSwgMSwgYnkgPSAxKSwgICAgICAgIA0KICBzdWJzYW1wbGUgPSBzZXEoMC44LCAwLjgsIGJ5ID0gMC4yKSwNCiAgY29sc2FtcGxlX2J5dHJlZSA9IHNlcSgwLjgsIDAuOCwgYnkgPSAwLjIpLA0KICBsYW1iZGEgPSBzZXEoMSwgMSwgYnkgPSAxKSwgICAgICAgICAgICAgICAgDQogIGFscGhhID0gc2VxKDAsIDAsIGJ5ID0gMSksICAgICAgICAgICAgICAgICAgDQogIGdhbW1hID0gc2VxKDAsIDAsIGJ5ID0gMC4xKSwgICAgICAgICAgICAgICANCiAgbnJvdW5kcyA9IHNlcSgxMDAsIDUwMCwgYnkgPSA1MCkNCikNCg0KIyBTYW1wbGUgZ3JpZCBwb2ludHMNCmNvbmZfbGV2IDwtIC45NQ0KbnVtX21heCA8LSA1DQpuIDwtIGNlaWxpbmcobG9nKDEtY29uZl9sZXYpL2xvZygxLW51bV9tYXgvbnJvdyhncmlkKSkpDQppbmQgPC0gc2FtcGxlKG5yb3coZ3JpZCksIG4sIHJlcGxhY2UgPSBGQUxTRSkNCnJncmlkIDwtIGdyaWRbaW5kLCBdDQoNCiMgU2V0IHVwIHBhcmFsbGVsIHByb2Nlc3NpbmcNCm5jIDwtIGRldGVjdENvcmVzKCkgLSAxDQoNCiMgVmFsaWRhdGlvbiBwaGFzZQ0KY2F0KCJcblBoYXNlIDE6IFZhbGlkYXRpb24gUGhhc2VcbiIpDQpuX3ZhbGlkYXRpb25zIDwtIDIwDQp2YWxpZGF0aW9uX3Jlc3VsdHMgPC0gbWF0cml4KG5yb3cgPSBucm93KHJncmlkKSwgbmNvbCA9IG5fdmFsaWRhdGlvbnMpDQoNCmZvciAoaiBpbiAxOm5yb3cocmdyaWQpKSB7DQogICNjYXQoIlxuVGVzdGluZyBwYXJhbWV0ZXIgc2V0IiwgaiwgIm9mIiwgbnJvdyhyZ3JpZCksICJcbiIpDQogIA0KICBmb3IgKGkgaW4gMTpuX3ZhbGlkYXRpb25zKSB7DQogICAgIyBDcmVhdGUgdmFsaWRhdGlvbiBzcGxpdA0KICAgIGlkeCA8LSB1bmlxdWUoc2FtcGxlKG5yb3coeHMpLCBucm93KHhzKSwgVCkpDQogICAgdHJhaW5feCA8LSB4c1tpZHgsIF0NCiAgICB0cmFpbl95IDwtIHlbaWR4XQ0KICAgIHZhbF94IDwtIHhzWy1pZHgsIF0NCiAgICB2YWxfeSA8LSB5Wy1pZHhdDQogICAgDQogICAgIyBVbmRlcnNhbXBsZSBtYWpvcml0eSBjbGFzcyBpbiB0cmFpbmluZyBkYXRhDQogICAgdHJhaW5faWR4XzAgPC0gd2hpY2godHJhaW5feSA9PSAwKQ0KICAgIHRyYWluX2lkeF8xIDwtIHdoaWNoKHRyYWluX3kgPT0gMSkNCiAgICANCiAgICAjIEdldCBudW1iZXIgb2YgbWlub3JpdHkgY2xhc3Mgc2FtcGxlcw0KICAgIG5fbWlub3JpdHkgPC0gbGVuZ3RoKHRyYWluX2lkeF8xKQ0KICAgIA0KICAgICMgUmFuZG9tbHkgc2FtcGxlIGZyb20gbWFqb3JpdHkgY2xhc3MNCiAgICB0cmFpbl9pZHhfMF9zYW1wbGVkIDwtIHNhbXBsZSh0cmFpbl9pZHhfMCwgbl9taW5vcml0eSkNCiAgICANCiAgICAjIENvbWJpbmUgaW5kaWNlcyBmb3IgYmFsYW5jZWQgZGF0YXNldA0KICAgIGJhbGFuY2VkX2lkeCA8LSBjKHRyYWluX2lkeF8wX3NhbXBsZWQsIHRyYWluX2lkeF8xKQ0KICAgIA0KICAgICMgQ3JlYXRlIGJhbGFuY2VkIHRyYWluaW5nIGRhdGFzZXQNCiAgICB0cmFpbl94X2JhbGFuY2VkIDwtIHRyYWluX3hbYmFsYW5jZWRfaWR4LCBdDQogICAgdHJhaW5feV9iYWxhbmNlZCA8LSB0cmFpbl95W2JhbGFuY2VkX2lkeF0NCiAgICANCiAgICBwcm0gPC0gbGlzdCgNCiAgICAgIGJvb3N0ZXIgPSAiZ2J0cmVlIiwNCiAgICAgIG9iamVjdGl2ZSA9ICJiaW5hcnk6bG9naXN0aWMiLA0KICAgICAgbWF4X2RlcHRoID0gcmdyaWRbaiwgIm1heF9kZXB0aCJdLA0KICAgICAgZXRhID0gcmdyaWRbaiwgImV0YSJdLA0KICAgICAgc3Vic2FtcGxlID0gcmdyaWRbaiwgInN1YnNhbXBsZSJdLA0KICAgICAgY29sc2FtcGxlX2J5dHJlZSA9IHJncmlkW2osICJjb2xzYW1wbGVfYnl0cmVlIl0sDQogICAgICBnYW1tYSA9IHJncmlkW2osICJnYW1tYSJdLA0KICAgICAgbWluX2NoaWxkX3dlaWdodCA9IHJncmlkW2osICJtaW5fY2hpbGRfd2VpZ2h0Il0sDQogICAgICBhbHBoYSA9IHJncmlkW2osICJhbHBoYSJdLA0KICAgICAgbGFtYmRhID0gcmdyaWRbaiwgImxhbWJkYSJdLA0KICAgICAgbnRocmVhZCA9IG5jDQogICAgKQ0KICAgIA0KICAgIGRtX3RyYWluIDwtIHhnYi5ETWF0cml4KGRhdGEgPSB0cmFpbl94X2JhbGFuY2VkLCBsYWJlbCA9IHRyYWluX3lfYmFsYW5jZWQpDQogICAgbWRsIDwtIHhnYi50cmFpbigNCiAgICAgIHBhcmFtcyA9IHBybSwNCiAgICAgIGRhdGEgPSBkbV90cmFpbiwNCiAgICAgIG5yb3VuZHMgPSByZ3JpZFtqLCAibnJvdW5kcyJdLA0KICAgICAgdmVyYm9zZSA9IEZBTFNFDQogICAgKQ0KICAgIA0KICAgIHAgPC0gcHJlZGljdChtZGwsIHhnYi5ETWF0cml4KGRhdGEgPSB2YWxfeCkpDQogICAgcHJlZCA8LSBwcmVkaWN0aW9uKHAsIHZhbF95KQ0KICAgIHZhbGlkYXRpb25fcmVzdWx0c1tqLCBpXSA8LSBwZXJmb3JtYW5jZShwcmVkLCAiYXVjIilAeS52YWx1ZXNbWzFdXQ0KICB9DQogIA0KICAjY2F0KCJNZWFuIEFVQzoiLCBtZWFuKHZhbGlkYXRpb25fcmVzdWx0c1tqLF0pLCAiXG4iKQ0KICAjY2F0KCJTRCBBVUM6Iiwgc2QodmFsaWRhdGlvbl9yZXN1bHRzW2osXSksICJcbiIpDQp9DQoNCiMgUnVuIDEwMCB0ZXN0cyB3aXRoIGJlc3QgcGFyYW1ldGVycw0KY2F0KCJcblJ1bm5pbmcgWCB0ZXN0IGl0ZXJhdGlvbnMgd2l0aCBiZXN0IHBhcmFtZXRlcnMuLi5cbiIpDQp0ZXN0X2F1Y3MgPC0gYygpDQoNCmJlc3RfcGFyYW1zX2lkeCA8LSB3aGljaC5tYXgocm93TWVhbnModmFsaWRhdGlvbl9yZXN1bHRzKSkNCmJlc3RfcGFyYW1zIDwtIHJncmlkW2Jlc3RfcGFyYW1zX2lkeCxdDQoNCiMgVHJhaW4gZmluYWwgbW9kZWwgd2l0aCBiZXN0IHBhcmFtZXRlcnMNCmJlc3RfcGFyYW1zX2xpc3QgPC0gYXMubGlzdChiZXN0X3BhcmFtc1std2hpY2gobmFtZXMoYmVzdF9wYXJhbXMpID09ICJucm91bmRzIildKQ0KYmVzdF9wYXJhbXNfbGlzdCRib29zdGVyIDwtICJnYnRyZWUiDQpiZXN0X3BhcmFtc19saXN0JG9iamVjdGl2ZSA8LSAiYmluYXJ5OmxvZ2lzdGljIg0KYmVzdF9wYXJhbXNfbGlzdCRudGhyZWFkIDwtIG5jDQoNCmZvcihpIGluIDE6MTAwKSB7DQogICNjYXQoIlxuSXRlcmF0aW9uIiwgaSwgIm9mIDEwMFxuIikgICAgICAgDQogICMgQ3JlYXRlIHRlc3Qgc3BsaXQNCiAgaWR4IDwtIHVuaXF1ZShzYW1wbGUobnJvdyh4cyksIG5yb3coeHMpLCBUKSkNCiAgdHJhaW5feCA8LSB4c1tpZHgsIF0NCiAgdHJhaW5feSA8LSB5W2lkeF0NCiAgdGVzdF94IDwtIHhzWy1pZHgsIF0NCiAgdGVzdF95IDwtIHlbLWlkeF0NCiAgDQogICMgVW5kZXJzYW1wbGUgdHJhaW5pbmcgZGF0YQ0KICB0cmFpbl9pZHhfMCA8LSB3aGljaCh0cmFpbl95ID09IDApDQogIHRyYWluX2lkeF8xIDwtIHdoaWNoKHRyYWluX3kgPT0gMSkNCiAgbl9taW5vcml0eSA8LSBsZW5ndGgodHJhaW5faWR4XzEpDQogIHRyYWluX2lkeF8wX3NhbXBsZWQgPC0gc2FtcGxlKHRyYWluX2lkeF8wLCBuX21pbm9yaXR5KQ0KICBiYWxhbmNlZF9pZHggPC0gYyh0cmFpbl9pZHhfMF9zYW1wbGVkLCB0cmFpbl9pZHhfMSkNCiAgDQogICMgQ3JlYXRlIGJhbGFuY2VkIHRyYWluaW5nIGRhdGFzZXQNCiAgdHJhaW5feF9iYWxhbmNlZCA8LSB0cmFpbl94W2JhbGFuY2VkX2lkeCwgXQ0KICB0cmFpbl95X2JhbGFuY2VkIDwtIHRyYWluX3lbYmFsYW5jZWRfaWR4XQ0KICANCiAgIyBUcmFpbiBtb2RlbA0KICBkbV90cmFpbiA8LSB4Z2IuRE1hdHJpeChkYXRhID0gdHJhaW5feF9iYWxhbmNlZCwgbGFiZWwgPSB0cmFpbl95X2JhbGFuY2VkKQ0KICBtZGwgPC0geGdiLnRyYWluKA0KICAgIHBhcmFtcyA9IGJlc3RfcGFyYW1zX2xpc3QsDQogICAgZGF0YSA9IGRtX3RyYWluLA0KICAgIG5yb3VuZHMgPSBiZXN0X3BhcmFtc1tbIm5yb3VuZHMiXV0sDQogICAgdmVyYm9zZSA9IEZBTFNFDQogICkNCiAgDQogICMgVGVzdCBvbiB1bmJhbGFuY2VkIHRlc3Qgc2V0DQogIHAgPC0gcHJlZGljdChtZGwsIHhnYi5ETWF0cml4KGRhdGEgPSB0ZXN0X3gpKQ0KICBwcmVkIDwtIHByZWRpY3Rpb24ocCwgdGVzdF95KQ0KICB0ZXN0X2F1Y3NbaV0gPC0gcGVyZm9ybWFuY2UocHJlZCwgImF1YyIpQHkudmFsdWVzW1sxXV0NCn0NCg0KIyBQcmludCByZXN1bHRzDQpjYXQoIlxuVGVzdCBSZXN1bHRzIG92ZXIgMTAwIGl0ZXJhdGlvbnM6XG4iKQ0KY2F0KCJNZWFuIEFVQzoiLCBtZWFuKHRlc3RfYXVjcyksICJcbiIpDQpjYXQoIlNEIEFVQzoiLCBzZCh0ZXN0X2F1Y3MpLCAiXG4iKQ0KY2F0KCI5NSUgQ0k6IiwgbWVhbih0ZXN0X2F1Y3MpIC0gMS45NiAqIHNkKHRlc3RfYXVjcyksIA0KICAgICJ0byIsIG1lYW4odGVzdF9hdWNzKSArIDEuOTYgKiBzZCh0ZXN0X2F1Y3MpLCAiXG4iKQ0KDQojIFBsb3R0aW5nIEFVQyBkaXN0cmlidXRpb24gLSByZW1vdmVkIHR5cGU9Im8iIHRvIG5vdCBjb25uZWN0IGRvdHMNCnBsb3QodGVzdF9hdWNzLCBjb2w9InJlZCIsIHBjaD0yMCwNCiAgICAgbWFpbj0iQVVDIFRlc3QgRGlzdHJpYnV0aW9uIiwNCiAgICAgeGxhYj0iSXRlcmF0aW9uIiwgeWxhYj0iQVVDIikNCmFibGluZShoPW1lYW4odGVzdF9hdWNzKSwgY29sPSJibHVlIiwgbHdkPTIsIGx0eT0yKQ0KYWJsaW5lKGg9bWVhbih0ZXN0X2F1Y3MpIC0gMS45NiAqIHNkKHRlc3RfYXVjcyksIGNvbD0iZ3JlZW4iLCBsd2Q9MiwgbHR5PTMpDQphYmxpbmUoaD1tZWFuKHRlc3RfYXVjcykgKyAxLjk2ICogc2QodGVzdF9hdWNzKSwgY29sPSJncmVlbiIsIGx3ZD0yLCBsdHk9MykNCmxlZ2VuZCgiYm90dG9tcmlnaHQiLCANCiAgICAgICBsZWdlbmQ9YygiQVVDIFZhbHVlcyIsICJNZWFuIiwgIjk1JSBDSSBCb3VuZHMiKSwNCiAgICAgICBjb2w9YygicmVkIiwgImJsdWUiLCAiZ3JlZW4iKSwNCiAgICAgICBsdHk9YyhOQSwgMiwgMyksDQogICAgICAgcGNoPWMoMjAsIE5BLCBOQSkpDQoNCg0KIyBOb3cgdHJhaW4gZmluYWwgbW9kZWwgb24gZnVsbCBkYXRhIGZvciB6IHNjb3Jlcw0KZmluYWxfaWR4XzAgPC0gd2hpY2goeSA9PSAwKQ0KZmluYWxfaWR4XzEgPC0gd2hpY2goeSA9PSAxKQ0Kbl9taW5vcml0eV9maW5hbCA8LSBsZW5ndGgoZmluYWxfaWR4XzEpDQpmaW5hbF9pZHhfMF9zYW1wbGVkIDwtIHNhbXBsZShmaW5hbF9pZHhfMCwgbl9taW5vcml0eV9maW5hbCkNCmZpbmFsX2JhbGFuY2VkX2lkeCA8LSBjKGZpbmFsX2lkeF8wX3NhbXBsZWQsIGZpbmFsX2lkeF8xKQ0KDQojIENyZWF0ZSBiYWxhbmNlZCBmaW5hbCBkYXRhc2V0DQp4c19iYWxhbmNlZCA8LSB4c1tmaW5hbF9iYWxhbmNlZF9pZHgsIF0NCnlfYmFsYW5jZWQgPC0geVtmaW5hbF9iYWxhbmNlZF9pZHhdDQoNCmRtX2Z1bGwgPC0geGdiLkRNYXRyaXgoZGF0YSA9IHhzX2JhbGFuY2VkLCBsYWJlbCA9IHlfYmFsYW5jZWQpDQpmaW5hbF9tb2RlbCA8LSB4Z2IudHJhaW4oDQogIHBhcmFtcyA9IGJlc3RfcGFyYW1zX2xpc3QsDQogIGRhdGEgPSBkbV9mdWxsLA0KICBucm91bmRzID0gYmVzdF9wYXJhbXNbWyJucm91bmRzIl1dLA0KICB2ZXJib3NlID0gRkFMU0UNCikNCg0KIyBHZXQgcHJvYmFiaWxpdHkgcHJlZGljdGlvbnMgKHopIGZvciBBTEwgZGF0YQ0KeiA8LSBwcmVkaWN0KGZpbmFsX21vZGVsLCB4Z2IuRE1hdHJpeChkYXRhID0geHMpKQ0KYGBgDQoNCmBgYHtyfQ0KIyBDYWxjdWxhdGUgcmVzaWR1YWxzIGZvciBYR0Jvb3N0IHByZWRpY3Rpb25zDQp5IDwtIGFzLm51bWVyaWMoYXMuY2hhcmFjdGVyKHNlbGVjdF9kYXRhJGF0dGVtcHQpKQ0KcmVzaWR1YWxzIDwtIHkgLSB6DQoNCiMgSGlzdG9ncmFtIG9mIHJlc2lkdWFscw0KaGlzdChyZXNpZHVhbHMsIG1haW49IkRpc3RyaWJ1dGlvbiBvZiBYR0Jvb3N0IE1vZGVsIFJlc2lkdWFscyIsIHhsYWI9IlJlc2lkdWFsIiwgYnJlYWtzPTEwMCkNCmBgYA0KDQpgYGB7cn0NCiMgcGxvdCBvdXQgdGhlIHogdmFsdWVzXA0KcGxvdChkZW5zaXR5KHopLCANCiAgICAgbWFpbiA9ICJEZW5zaXR5IG9mIFogUHJlZGljdGlvbnMiLA0KICAgICB4bGFiID0gIlByZWRpY3RlZCBQcm9iYWJpbGl0eSBvZiBBdHRlbXB0IiwNCiAgICAgeWxhYiA9ICJEZW5zaXR5IikNCmBgYA0KDQpgYGB7cn0NCiMgQ2FsY3VsYXRlIEdJTVIgKGxhbWJkYSkgVGhpcyBpcyBHZW5lcmFsaXplZCBpbnZlcnNlIG1pbGxzIHJhdGlvDQpHSU1SIDwtIGRub3JtKHFub3JtKHopKSAvICgxIC0gcG5vcm0ocW5vcm0oeikpKQ0KDQojIEFkZCBHSU1SIHRvIHRoZSBkYXRhDQpzZWxlY3RfZGF0YVssIEdJTVIgOj0gR0lNUl0NCg0KIyBQcmludCB2YXJpYWJsZSBpbXBvcnRhDQpgYGANCg0KYGBge3J9DQojIENyZWF0ZSBhIGRhdGEudGFibGUgd2l0aCBqdXN0IG15X2lkIGFuZCBHSU1SIGZyb20gc2VsZWN0X2RhdGENCkdJTVJfZHQgPC0gZGF0YS50YWJsZShteV9pZCA9IHNlbGVjdF9kYXRhJG15X2lkLCBHSU1SID0gR0lNUikNCg0KIyBBZGQgR0lNUiB0byBvdXRjb21lX2RhdGEgYnkgbWF0Y2hpbmcgb24gbXlfaWQNCm91dGNvbWVfZGF0YVtHSU1SX2R0LCBHSU1SIDo9IGkuR0lNUiwgb24gPSAibXlfaWQiXQ0KYGBgDQoNCmBgYHtyfQ0KI2tpbGwgLSBteV9pZA0Kb3V0Y29tZV9kYXRhIDwtIG91dGNvbWVfZGF0YVssIG15X2lkIDo9IE5VTExdDQpvdXRjb21lX2RhdGFbLCB5ZWFyMjAxN190ZWFtX0FSSSA6PSBOVUxMXQ0Kb3V0Y29tZV9kYXRhIDwtIG91dGNvbWVfZGF0YVssIHlhcmRsaW5lXzFfMTA6PSBOVUxMXQ0KYGBgDQoNCmBgYHtyfQ0Kb3V0Y29tZV9kYXRhWywgY29udmVyc2lvbiA6PSBhcy5udW1lcmljKGFzLmNoYXJhY3Rlcihjb252ZXJzaW9uKSldDQojIFRoZW4gcnVuIE9MUyB3aXRoIEdJTVIgY29ycmVjdGlvbg0Kb2xzX21vZGVsIDwtIGxtKGNvbnZlcnNpb24gfiAgLiwgZGF0YSA9IG91dGNvbWVfZGF0YSkNCmBgYA0KDQpgYGB7cn0NCmxpYnJhcnkoc2FuZHdpY2gpDQpsaWJyYXJ5KGxtdGVzdCkNCg0KIyBHZXQgSEMwLWFkanVzdGVkIHQtdmFsdWVzIGFuZCBwLXZhbHVlcw0Kcm9idXN0X3Rlc3QgPC0gY29lZnRlc3Qob2xzX21vZGVsLCB2Y292ID0gdmNvdkhDKG9sc19tb2RlbCwgdHlwZSA9ICJIQzAiKSkNCnRfc3RhdHMgPC0gcm9idXN0X3Rlc3RbLCAidCB2YWx1ZSJdDQpwX3ZhbHVlcyA8LSByb2J1c3RfdGVzdFssICJQcig+fHR8KSJdDQoNCiMgRnVuY3Rpb24gdG8gYWRkIHNpZ25pZmljYW5jZSBzdGFycw0KZ2V0X3N0YXJzIDwtIGZ1bmN0aW9uKHApIHsNCiAgICBpZiAocCA8PSAwLjAxKSByZXR1cm4oIioqKiIpDQogICAgaWYgKHAgPD0gMC4wNSkgcmV0dXJuKCIqKiIpDQogICAgaWYgKHAgPD0gMC4xKSByZXR1cm4oIioiKQ0KICAgIGlmIChwIDw9IDAuMTUpIHJldHVybigiLiIpDQogICAgcmV0dXJuKCIiKQ0KfQ0KDQojIE1heGltdW0gd2lkdGggZm9yIHZhcmlhYmxlIG5hbWVzDQpuYW1lX3dpZHRoIDwtIDIwDQoNCiMgUHJpbnQgaGVhZGVyIHdpdGggYWxpZ25tZW50DQpjYXQoc3ByaW50ZigiJS0qcyAgJTEwcyAgJTEwcyAgJTRzXG4iLCBuYW1lX3dpZHRoLCAiVmFyaWFibGUiLCAidC12YWx1ZSIsICJwLXZhbHVlIiwgInNpZyIpKQ0KY2F0KHNwcmludGYoIiUtKnMgICUxMHMgICUxMHMgICU0c1xuIiwgbmFtZV93aWR0aCwgIi0tLS0tLS0tLSIsICItLS0tLS0tIiwgIi0tLS0tLS0iLCAiLS0tLSIpKQ0KDQojIExvb3AgdGhyb3VnaCBhbmQgcHJpbnQgdmFsdWVzDQpmb3IgKGkgaW4gMTpsZW5ndGgodF9zdGF0cykpIHsNCiAgICB2YXJfbmFtZSA8LSByb3duYW1lcyhyb2J1c3RfdGVzdClbaV0NCiAgICAjIFRydW5jYXRlIG5hbWUgaWYgdG9vIGxvbmcNCiAgICBpZiAobmNoYXIodmFyX25hbWUpID4gbmFtZV93aWR0aCkgew0KICAgICAgICB2YXJfbmFtZSA8LSBwYXN0ZTAoc3Vic3RyKHZhcl9uYW1lLCAxLCBuYW1lX3dpZHRoLTMpLCAiLi4uIikNCiAgICB9DQogICAgY2F0KHNwcmludGYoIiUtKnMgICUxMC40ZiAgJTEwLjRmICAlNHNcbiIsIA0KICAgICAgICAgICAgICAgIG5hbWVfd2lkdGgsIHZhcl9uYW1lLCANCiAgICAgICAgICAgICAgICB0X3N0YXRzW2ldLCBwX3ZhbHVlc1tpXSwNCiAgICAgICAgICAgICAgICBnZXRfc3RhcnMocF92YWx1ZXNbaV0pKSkNCn0NCg0KY2F0KCJcblNpZ25pZmljYW5jZSBjb2RlczogMCAnKioqJyAwLjAxICcqKicgMC4wNSAnKicgMC4xICcuJyAwLjE1IikNCmBgYA0KDQpgYGB7cn0NCiMgZ2V0IHZpZnMNCiNsaWJyYXJ5KGNhcikNCiN2aWYob2xzX21vZGVsKQ0KYGBgDQo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("heckman.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>

<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Heckman Selection Model Analysis</title>

<script src="site_libs/header-attrs-2.22/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">4th Downs in the NFL</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="heckman.html">Heckman Selection</a>
</li>
<li>
  <a href="xgboost.html">XGBoost Prediction</a>
</li>
<li>
  <a href="attendance_binary.html">Attendance Impact Binary</a>
</li>
<li>
  <a href="attendance_pcts.html">Attendance Impact Percentages</a>
</li>
<li>
  <a href="attendance_totals.html">Attendance Impact Totals</a>
</li>
<li>
  <a href="thirddown.html">Third Down Analysis</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Heckman Selection Model Analysis</h1>

</div>


<pre class="r"><code>library(data.table)
outcome_data &lt;- fread(&quot;predict_outcome.csv.gz&quot;)
select_data &lt;- fread(&quot;predict_select.csv.gz&quot;)</code></pre>
<pre class="r"><code>select_data[, attempt := as.numeric(as.character(attempt))]</code></pre>
<pre class="r"><code># Commented out original version
# # Load required libraries
# library(data.table)
# library(xgboost)
# library(ROCR)
# library(parallel)
# 
# # Prepare the XGBoost matrices
# xs &lt;- model.matrix(~ . - 1 - attempt - my_id, data = select_data)
# y &lt;- as.numeric(as.character(select_data$attempt))
# 
# # Create parameter grid
# grid &lt;- expand.grid(
#   eta = seq(0.001, 0.1, by = 0.02),
#   max_depth = seq(5, 7, by = 2),
#   min_child_weight = seq(1, 1, by = 1),        
#   subsample = seq(0.8, 0.8, by = 0.2),
#   colsample_bytree = seq(0.8, 0.8, by = 0.2),
#   lambda = seq(1, 1, by = 1),                
#   alpha = seq(0, 0, by = 1),                  
#   gamma = seq(0, 0, by = 0.1),               
#   nrounds = seq(100, 500, by = 500)
# )
# 
# # Sample grid points
# conf_lev &lt;- .95
# num_max &lt;- 5
# n &lt;- ceiling(log(1-conf_lev)/log(1-num_max/nrow(grid)))
# ind &lt;- sample(nrow(grid), n, replace = FALSE)
# rgrid &lt;- grid[ind, ]
# 
# # Set up parallel processing
# nc &lt;- detectCores() - 1
# 
# # Validation phase
# cat(&quot;\nPhase 1: Validation Phase\n&quot;)
# n_validations &lt;- 2
# validation_results &lt;- matrix(nrow = nrow(rgrid), ncol = n_validations)
# 
# for (j in 1:nrow(rgrid)) {
#   cat(&quot;\nTesting parameter set&quot;, j, &quot;of&quot;, nrow(rgrid), &quot;\n&quot;)
#   
#   for (i in 1:n_validations) {
#     # Create validation split
#     idx &lt;- unique(sample(nrow(xs), nrow(xs), TRUE))
#     train_x &lt;- xs[idx, ]
#     train_y &lt;- y[idx]
#     val_x &lt;- xs[-idx, ]
#     val_y &lt;- y[-idx]
#     
#     # Undersample majority class in training data
#     train_idx_0 &lt;- which(train_y == 0)
#     train_idx_1 &lt;- which(train_y == 1)
#     
#     # Get number of minority class samples
#     n_minority &lt;- length(train_idx_1)
#     
#     # Randomly sample from majority class
#     train_idx_0_sampled &lt;- sample(train_idx_0, n_minority)
#     
#     # Combine indices for balanced dataset
#     balanced_idx &lt;- c(train_idx_0_sampled, train_idx_1)
#     
#     # Create balanced training dataset
#     train_x_balanced &lt;- train_x[balanced_idx, ]
#     train_y_balanced &lt;- train_y[balanced_idx]
#     
#     prm &lt;- list(
#       booster = &quot;gbtree&quot;,
#       objective = &quot;binary:logistic&quot;,
#       max_depth = rgrid[j, &quot;max_depth&quot;],
#       eta = rgrid[j, &quot;eta&quot;],
#       subsample = rgrid[j, &quot;subsample&quot;],
#       colsample_bytree = rgrid[j, &quot;colsample_bytree&quot;],
#       gamma = rgrid[j, &quot;gamma&quot;],
#       min_child_weight = rgrid[j, &quot;min_child_weight&quot;],
#       alpha = rgrid[j, &quot;alpha&quot;],
#       lambda = rgrid[j, &quot;lambda&quot;],
#       nthread = nc
#     )
#     
#     dm_train &lt;- xgb.DMatrix(data = train_x_balanced, label = train_y_balanced)
#     mdl &lt;- xgb.train(
#       params = prm,
#       data = dm_train,
#       nrounds = rgrid[j, &quot;nrounds&quot;],
#       verbose = FALSE
#     )
#     
#     p &lt;- predict(mdl, xgb.DMatrix(data = val_x))
#     pred &lt;- prediction(p, val_y)
#     validation_results[j, i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
#   }
# }
# 
# # Run 100 tests with best parameters
# cat(&quot;\nRunning X test iterations with best parameters...\n&quot;)
# test_aucs &lt;- c()
# 
# best_params_idx &lt;- which.max(rowMeans(validation_results))
# best_params &lt;- rgrid[best_params_idx,]
# 
# # Train final model with best parameters
# best_params_list &lt;- as.list(best_params[-which(names(best_params) == &quot;nrounds&quot;)])
# best_params_list$booster &lt;- &quot;gbtree&quot;
# best_params_list$objective &lt;- &quot;binary:logistic&quot;
# best_params_list$nthread &lt;- nc
# 
# for(i in 1:100) {
#   # Create test split
#   idx &lt;- unique(sample(nrow(xs), nrow(xs), T))
#   train_x &lt;- xs[idx, ]
#   train_y &lt;- y[idx]
#   test_x &lt;- xs[-idx, ]
#   test_y &lt;- y[-idx]
#   
#   # Undersample training data
#   train_idx_0 &lt;- which(train_y == 0)
#   train_idx_1 &lt;- which(train_y == 1)
#   n_minority &lt;- length(train_idx_1)
#   train_idx_0_sampled &lt;- sample(train_idx_0, n_minority)
#   balanced_idx &lt;- c(train_idx_0_sampled, train_idx_1)
#   
#   # Create balanced training dataset
#   train_x_balanced &lt;- train_x[balanced_idx, ]
#   train_y_balanced &lt;- train_y[balanced_idx]
#   
#   # Train model
#   dm_train &lt;- xgb.DMatrix(data = train_x_balanced, label = train_y_balanced)
#   mdl &lt;- xgb.train(
#     params = best_params_list,
#     data = dm_train,
#     nrounds = best_params[[&quot;nrounds&quot;]],
#     verbose = FALSE
#   )
#   
#   # Test on unbalanced test set
#   p &lt;- predict(mdl, xgb.DMatrix(data = test_x))
#   pred &lt;- prediction(p, test_y)
#   test_aucs[i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
# }
# 
# # Print results
# cat(&quot;\nTest Results over 100 iterations:\n&quot;)
# cat(&quot;Mean AUC:&quot;, mean(test_aucs), &quot;\n&quot;)
# cat(&quot;SD AUC:&quot;, sd(test_aucs), &quot;\n&quot;)
# cat(&quot;95% CI:&quot;, mean(test_aucs) - 1.96 * sd(test_aucs), 
#     &quot;to&quot;, mean(test_aucs) + 1.96 * sd(test_aucs), &quot;\n&quot;)
# 
# # Plotting AUC distribution
# plot(test_aucs, col=&quot;red&quot;, pch=20,
#      main=&quot;AUC Test Distribution&quot;,
#      xlab=&quot;Iteration&quot;, ylab=&quot;AUC&quot;)
# abline(h=mean(test_aucs), col=&quot;blue&quot;, lwd=2, lty=2)
# abline(h=mean(test_aucs) - 1.96 * sd(test_aucs), col=&quot;green&quot;, lwd=2, lty=3)
# abline(h=mean(test_aucs) + 1.96 * sd(test_aucs), col=&quot;green&quot;, lwd=2, lty=3)
# legend(&quot;bottomright&quot;, 
#        legend=c(&quot;AUC Values&quot;, &quot;Mean&quot;, &quot;95% CI Bounds&quot;),
#        col=c(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;),
#        lty=c(NA, 2, 3),
#        pch=c(20, NA, NA))
# 
# # Now train final model on full data for z scores
# final_idx_0 &lt;- which(y == 0)
# final_idx_1 &lt;- which(y == 1)
# n_minority_final &lt;- length(final_idx_1)
# final_idx_0_sampled &lt;- sample(final_idx_0, n_minority_final)
# final_balanced_idx &lt;- c(final_idx_0_sampled, final_idx_1)
# 
# # Create balanced final dataset
# xs_balanced &lt;- xs[final_balanced_idx, ]
# y_balanced &lt;- y[final_balanced_idx]
# 
# dm_full &lt;- xgb.DMatrix(data = xs_balanced, label = y_balanced)
# final_model &lt;- xgb.train(
#   params = best_params_list,
#   data = dm_full,
#   nrounds = best_params[[&quot;nrounds&quot;]],
#   verbose = FALSE
# )
# 
# # Get probability predictions (z) for ALL data
# z &lt;- predict(final_model, xgb.DMatrix(data = xs))</code></pre>
<pre class="r"><code>library(data.table)
library(xgboost)
library(ROCR)
library(parallel)

# Prepare the XGBoost matrices
xs &lt;- model.matrix(~ . - 1 - attempt - my_id, data = select_data)
y &lt;- as.numeric(as.character(select_data$attempt))

# Create parameter grid
grid &lt;- expand.grid(
  eta = seq(0.001, 0.1, by = 0.02),
  max_depth = seq(5, 7, by = 2),
  min_child_weight = seq(1, 1, by = 1),        
  subsample = seq(0.8, 0.8, by = 0.2),
  colsample_bytree = seq(0.8, 0.8, by = 0.2),
  lambda = seq(1, 1, by = 1),                
  alpha = seq(0, 0, by = 1),                  
  gamma = seq(0, 0, by = 0.1),               
  nrounds = seq(100, 500, by = 50)
)

# Sample grid points
conf_lev &lt;- .95
num_max &lt;- 5
n &lt;- ceiling(log(1-conf_lev)/log(1-num_max/nrow(grid)))
ind &lt;- sample(nrow(grid), n, replace = FALSE)
rgrid &lt;- grid[ind, ]

# Set up parallel processing
nc &lt;- detectCores() - 1

# Calculate scale_pos_weight for imbalanced dataset
scale_pos_weight &lt;- sum(y == 0) / sum(y == 1)

# Validation phase
cat(&quot;\nPhase 1: Validation Phase\n&quot;)</code></pre>
<pre><code>## 
## Phase 1: Validation Phase</code></pre>
<pre class="r"><code>n_validations &lt;- 2
validation_results &lt;- matrix(nrow = nrow(rgrid), ncol = n_validations)

for (j in 1:nrow(rgrid)) {
  cat(&quot;\nTesting parameter set&quot;, j, &quot;of&quot;, nrow(rgrid), &quot;\n&quot;)
  
  for (i in 1:n_validations) {
    # Create validation split
    idx &lt;- unique(sample(nrow(xs), nrow(xs), TRUE))
    train_x &lt;- xs[idx, ]
    train_y &lt;- y[idx]
    val_x &lt;- xs[-idx, ]
    val_y &lt;- y[-idx]
    
    prm &lt;- list(
      booster = &quot;gbtree&quot;,
      objective = &quot;binary:logistic&quot;,
      max_depth = rgrid[j, &quot;max_depth&quot;],
      eta = rgrid[j, &quot;eta&quot;],
      subsample = rgrid[j, &quot;subsample&quot;],
      colsample_bytree = rgrid[j, &quot;colsample_bytree&quot;],
      gamma = rgrid[j, &quot;gamma&quot;],
      min_child_weight = rgrid[j, &quot;min_child_weight&quot;],
      alpha = rgrid[j, &quot;alpha&quot;],
      lambda = rgrid[j, &quot;lambda&quot;],
      scale_pos_weight = scale_pos_weight,
      nthread = nc
    )
    
    dm_train &lt;- xgb.DMatrix(data = train_x, label = train_y)
    mdl &lt;- xgb.train(
      params = prm,
      data = dm_train,
      nrounds = rgrid[j, &quot;nrounds&quot;],
      verbose = FALSE
    )
    
    p &lt;- predict(mdl, xgb.DMatrix(data = val_x))
    pred &lt;- prediction(p, val_y)
    validation_results[j, i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
  }
}</code></pre>
<pre><code>## 
## Testing parameter set 1 of 53 
## 
## Testing parameter set 2 of 53 
## 
## Testing parameter set 3 of 53 
## 
## Testing parameter set 4 of 53 
## 
## Testing parameter set 5 of 53 
## 
## Testing parameter set 6 of 53 
## 
## Testing parameter set 7 of 53 
## 
## Testing parameter set 8 of 53 
## 
## Testing parameter set 9 of 53 
## 
## Testing parameter set 10 of 53 
## 
## Testing parameter set 11 of 53 
## 
## Testing parameter set 12 of 53 
## 
## Testing parameter set 13 of 53 
## 
## Testing parameter set 14 of 53 
## 
## Testing parameter set 15 of 53 
## 
## Testing parameter set 16 of 53 
## 
## Testing parameter set 17 of 53 
## 
## Testing parameter set 18 of 53 
## 
## Testing parameter set 19 of 53 
## 
## Testing parameter set 20 of 53 
## 
## Testing parameter set 21 of 53 
## 
## Testing parameter set 22 of 53 
## 
## Testing parameter set 23 of 53 
## 
## Testing parameter set 24 of 53 
## 
## Testing parameter set 25 of 53 
## 
## Testing parameter set 26 of 53 
## 
## Testing parameter set 27 of 53 
## 
## Testing parameter set 28 of 53 
## 
## Testing parameter set 29 of 53 
## 
## Testing parameter set 30 of 53 
## 
## Testing parameter set 31 of 53 
## 
## Testing parameter set 32 of 53 
## 
## Testing parameter set 33 of 53 
## 
## Testing parameter set 34 of 53 
## 
## Testing parameter set 35 of 53 
## 
## Testing parameter set 36 of 53 
## 
## Testing parameter set 37 of 53 
## 
## Testing parameter set 38 of 53 
## 
## Testing parameter set 39 of 53 
## 
## Testing parameter set 40 of 53 
## 
## Testing parameter set 41 of 53 
## 
## Testing parameter set 42 of 53 
## 
## Testing parameter set 43 of 53 
## 
## Testing parameter set 44 of 53 
## 
## Testing parameter set 45 of 53 
## 
## Testing parameter set 46 of 53 
## 
## Testing parameter set 47 of 53 
## 
## Testing parameter set 48 of 53 
## 
## Testing parameter set 49 of 53 
## 
## Testing parameter set 50 of 53 
## 
## Testing parameter set 51 of 53 
## 
## Testing parameter set 52 of 53 
## 
## Testing parameter set 53 of 53</code></pre>
<pre class="r"><code># Run 100 tests with best parameters
cat(&quot;\nRunning X test iterations with best parameters...\n&quot;)</code></pre>
<pre><code>## 
## Running X test iterations with best parameters...</code></pre>
<pre class="r"><code>test_aucs &lt;- c()

best_params_idx &lt;- which.max(rowMeans(validation_results))
best_params &lt;- rgrid[best_params_idx,]

# Train final model with best parameters
best_params_list &lt;- as.list(best_params[-which(names(best_params) == &quot;nrounds&quot;)])
best_params_list$booster &lt;- &quot;gbtree&quot;
best_params_list$objective &lt;- &quot;binary:logistic&quot;
best_params_list$scale_pos_weight &lt;- scale_pos_weight
best_params_list$nthread &lt;- nc

for(i in 1:10) {
  # Create test split
  idx &lt;- unique(sample(nrow(xs), nrow(xs), T))
  train_x &lt;- xs[idx, ]
  train_y &lt;- y[idx]
  test_x &lt;- xs[-idx, ]
  test_y &lt;- y[-idx]
  
  # Train model on full unbalanced dataset
  dm_train &lt;- xgb.DMatrix(data = train_x, label = train_y)
  mdl &lt;- xgb.train(
    params = best_params_list,
    data = dm_train,
    nrounds = best_params[[&quot;nrounds&quot;]],
    verbose = FALSE
  )
  
  # Test on unbalanced test set
  p &lt;- predict(mdl, xgb.DMatrix(data = test_x))
  pred &lt;- prediction(p, test_y)
  test_aucs[i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
}

# Print results
cat(&quot;\nTest Results over 100 iterations:\n&quot;)</code></pre>
<pre><code>## 
## Test Results over 100 iterations:</code></pre>
<pre class="r"><code>cat(&quot;Mean AUC:&quot;, mean(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## Mean AUC: 0.8868227</code></pre>
<pre class="r"><code>cat(&quot;SD AUC:&quot;, sd(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## SD AUC: 0.004040459</code></pre>
<pre class="r"><code>cat(&quot;95% CI:&quot;, mean(test_aucs) - 1.96 * sd(test_aucs), 
    &quot;to&quot;, mean(test_aucs) + 1.96 * sd(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## 95% CI: 0.8789034 to 0.894742</code></pre>
<pre class="r"><code># Plotting AUC distribution
plot(test_aucs, col=&quot;red&quot;, pch=20,
     main=&quot;AUC Test Distribution&quot;,
     xlab=&quot;Iteration&quot;, ylab=&quot;AUC&quot;)
abline(h=mean(test_aucs) - 1.96 * sd(test_aucs), col=&quot;green&quot;, lwd=2, lty=3)
abline(h=mean(test_aucs) + 1.96 * sd(test_aucs), col=&quot;green&quot;, lwd=2, lty=3)
legend(&quot;bottomright&quot;, 
       legend=c(&quot;AUC Values&quot;, &quot;Mean&quot;, &quot;95% CI Bounds&quot;),
       col=c(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;),
       lty=c(NA, 2, 3),
       pch=c(20, NA, NA))</code></pre>
<p><img src="heckman_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code># Now train final model on full data for z scores
dm_full &lt;- xgb.DMatrix(data = xs, label = y)
final_model &lt;- xgb.train(
  params = best_params_list,
  data = dm_full,
  nrounds = best_params[[&quot;nrounds&quot;]],
  verbose = FALSE
)

# Get probability predictions (z) for ALL data
z &lt;- predict(final_model, xgb.DMatrix(data = xs))</code></pre>
<pre class="r"><code># Calculate residuals for XGBoost predictions
y &lt;- as.numeric(as.character(select_data$attempt))
residuals &lt;- y - z

# Histogram of residuals
hist(residuals, main=&quot;Distribution of XGBoost Model Residuals&quot;, xlab=&quot;Residual&quot;, breaks=100)</code></pre>
<p><img src="heckman_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code># plot out the z values\
plot(density(z), 
     main = &quot;Density of Z Predictions&quot;,
     xlab = &quot;Predicted Probability of Attempt&quot;,
     ylab = &quot;Density&quot;)</code></pre>
<p><img src="heckman_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code># Calculate GIMR (lambda) This is Generalized inverse mills ratio
GIMR &lt;- dnorm(qnorm(z)) / (1 - pnorm(qnorm(z)))

# Add GIMR to the data
select_data[, GIMR := GIMR]

# Print variable importa</code></pre>
<pre class="r"><code># Create a data.table with just my_id and GIMR from select_data
GIMR_dt &lt;- data.table(my_id = select_data$my_id, GIMR = GIMR)

# Add GIMR to outcome_data by matching on my_id
outcome_data[GIMR_dt, GIMR := i.GIMR, on = &quot;my_id&quot;]</code></pre>
<pre class="r"><code>#kill - my_id
outcome_data &lt;- outcome_data[, my_id := NULL]
outcome_data[, year2017_team_ARI := NULL]
outcome_data &lt;- outcome_data[, yardline_1_10:= NULL]</code></pre>
<pre class="r"><code>outcome_data[, conversion := as.numeric(as.character(conversion))]
# Then run OLS with GIMR correction
ols_model &lt;- lm(conversion ~  ., data = outcome_data)</code></pre>
<pre class="r"><code>library(sandwich)
library(lmtest)

# Get HC0-adjusted t-values and p-values
robust_test &lt;- coeftest(ols_model, vcov = vcovHC(ols_model, type = &quot;HC0&quot;))
t_stats &lt;- robust_test[, &quot;t value&quot;]
p_values &lt;- robust_test[, &quot;Pr(&gt;|t|)&quot;]

# Function to add significance stars
get_stars &lt;- function(p) {
    if (p &lt;= 0.01) return(&quot;***&quot;)
    if (p &lt;= 0.05) return(&quot;**&quot;)
    if (p &lt;= 0.1) return(&quot;*&quot;)
    if (p &lt;= 0.15) return(&quot;.&quot;)
    return(&quot;&quot;)
}

# Maximum width for variable names
name_width &lt;- 20

# Print header with alignment
cat(sprintf(&quot;%-*s  %10s  %10s  %4s\n&quot;, name_width, &quot;Variable&quot;, &quot;t-value&quot;, &quot;p-value&quot;, &quot;sig&quot;))</code></pre>
<pre><code>## Variable                 t-value     p-value   sig</code></pre>
<pre class="r"><code>cat(sprintf(&quot;%-*s  %10s  %10s  %4s\n&quot;, name_width, &quot;---------&quot;, &quot;-------&quot;, &quot;-------&quot;, &quot;----&quot;))</code></pre>
<pre><code>## ---------                -------     -------  ----</code></pre>
<pre class="r"><code># Loop through and print values
for (i in 1:length(t_stats)) {
    var_name &lt;- rownames(robust_test)[i]
    # Truncate name if too long
    if (nchar(var_name) &gt; name_width) {
        var_name &lt;- paste0(substr(var_name, 1, name_width-3), &quot;...&quot;)
    }
    cat(sprintf(&quot;%-*s  %10.4f  %10.4f  %4s\n&quot;, 
                name_width, var_name, 
                t_stats[i], p_values[i],
                get_stars(p_values[i])))
}</code></pre>
<pre><code>## (Intercept)              -0.2599      0.7949      
## ydstogo                 -12.7319      0.0000   ***
## posteam_timeouts_...      0.6119      0.5406      
## defteam_timeouts_...      1.0884      0.2765      
## rush_attempt              7.3530      0.0000   ***
## week                      0.8694      0.3847      
## temp                     -0.6144      0.5390      
## wind                      1.1117      0.2663      
## vegas_wp                  1.7709      0.0767     *
## vegas_wp_posteam          1.0463      0.2955      
## total_line                2.3005      0.0215    **
## prep_days                 1.1389      0.2548      
## overall_win_pct           0.4387      0.6609      
## team_win_pct              0.7789      0.4361      
## prev_shotgun_rate         0.1045      0.9168      
## prev_singleback_rate      0.0627      0.9500      
## prev_empty_rate           0.3981      0.6905      
## prev_shotgun_success     -1.0351      0.3007      
## prev_singleback_s...      0.4605      0.6452      
## prev_empty_success        0.4465      0.6553      
## prev_stop_rate_run        0.1023      0.9185      
## prev_stop_rate_pass      -2.8838      0.0040   ***
## shotgun_rate              1.3766      0.1687      
## singleback_rate           1.2041      0.2286      
## empty_rate                0.0783      0.9376      
## shotgun_success          -1.6077      0.1080     .
## singleback_success       -0.4310      0.6665      
## empty_success            -0.5259      0.5990      
## def_stop_rate_run         1.9182      0.0552     *
## def_stop_rate_pass       -0.8306      0.4063      
## avg_pass_rushers         -0.7407      0.4589      
## avg_box_defenders         0.0397      0.9684      
## cover0_rate              -0.3402      0.7337      
## cover1_rate              -0.5544      0.5793      
## cover2_rate              -0.2620      0.7933      
## cover3_rate               1.5078      0.1317     .
## cover4_rate               1.1642      0.2444      
## cover6_rate              -0.2881      0.7733      
## two_man_rate              1.9095      0.0563     *
## prevent_rate              2.6642      0.0078   ***
## attendance_raw           -0.9104      0.3627      
## roof_outdoors            -0.2746      0.7837      
## posteam_type_away         1.0805      0.2800      
## offense_formation...      0.8317      0.4056      
## offense_formation...      0.1882      0.8507      
## offense_formation...      0.2763      0.7823      
## offense_player_1_...      3.0475      0.0023   ***
## offense_player_2_...     -1.2959      0.1951      
## offense_player_4_...      0.3534      0.7238      
## offense_player_5_...     -0.2275      0.8201      
## offense_player_6_...     -0.7091      0.4783      
## offense_player_8_...     -2.3254      0.0201    **
## offense_player_9_...     -2.3912      0.0168    **
## offense_player_10...     -0.7445      0.4566      
## offense_player_11...     -0.7968      0.4256      
## offense_player_12...      2.9488      0.0032   ***
## offense_player_14...     -1.0607      0.2889      
## offense_player_15...     -1.1068      0.2685      
## offense_player_16...     -0.6426      0.5205      
## offense_player_17...      0.0176      0.9860      
## offense_player_20...     -0.3013      0.7632      
## offense_player_22...     -1.2253      0.2205      
## offense_player_23...      1.2977      0.1945      
## offense_player_24...     -5.5802      0.0000   ***
## offense_player_8_...      0.5827      0.5601      
## offense_player_9_...     -0.4596      0.6458      
## offense_player_8_...      0.7756      0.4380      
## offense_player_9_...     -1.0814      0.2796      
## offense_player_1_...      1.3229      0.1859      
## offense_player_9_...      0.0084      0.9933      
## offense_player_9_...     -0.6046      0.5455      
## offense_player_18...      0.2890      0.7726      
## offense_player_1_...      0.2853      0.7754      
## offense_player_1_...     -2.0901      0.0367    **
## offense_player_8_...     -0.8199      0.4123      
## offense_player_14...      3.3770      0.0007   ***
## offense_player_14...      0.9405      0.3470      
## offense_player_8_...      1.8287      0.0675     *
## offense_player_9_...      2.2111      0.0271    **
## offense_player_9_...     -0.8808      0.3785      
## offense_player_9_...     -1.7699      0.0768     *
## offense_player_9_...      2.3442      0.0191    **
## offense_player_1_...      0.6981      0.4852      
## offense_player_1_...      1.1377      0.2553      
## offense_player_10...      1.5768      0.1149     .
## offense_player_9_...      1.3446      0.1788      
## offense_player_1_...      1.6457      0.0999     *
## offense_player_1_...     -1.0355      0.3005      
## offense_player_9_...     -2.2778      0.0228    **
## offense_player_9_...     -0.0964      0.9232      
## offense_player_9_...      1.2905      0.1970      
## offense_player_10...     -0.4093      0.6823      
## defense_player_1_...     -1.5323      0.1255     .
## defense_player_2_...      2.0419      0.0412    **
## defense_player_3_...      0.3013      0.7632      
## defense_player_4_...     -0.6336      0.5264      
## defense_player_5_...     -0.7546      0.4505      
## defense_player_6_...     -0.6852      0.4933      
## defense_player_9_...      0.9816      0.3263      
## defense_player_10...      0.2542      0.7993      
## defense_player_11...     -0.7305      0.4652      
## defense_player_12...      0.4314      0.6662      
## defense_player_13...      2.0812      0.0375    **
## defense_player_14...      1.2062      0.2278      
## defense_player_15...      0.6445      0.5193      
## defense_player_16...      0.6608      0.5088      
## defense_player_17...      1.1584      0.2468      
## defense_player_18...      1.7538      0.0795     *
## defense_player_19...      0.5910      0.5546      
## defense_player_20...     -0.3824      0.7022      
## defense_player_21...      1.3827      0.1668      
## defense_player_22...      1.2585      0.2083      
## defense_player_23...      0.9670      0.3336      
## defense_player_3_...     -0.5494      0.5828      
## defense_player_3_...      0.8585      0.3907      
## defense_player_3_...      1.8773      0.0606     *
## defense_player_3_...     -1.3949      0.1631      
## defense_player_3_...     -1.0342      0.3011      
## defense_player_16...     -1.0070      0.3140      
## defense_player_2_...     -1.3947      0.1632      
## defense_player_3_...      1.5476      0.1218     .
## defense_player_3_...     -0.0227      0.9819      
## defense_player_3_...     -0.7157      0.4742      
## defense_player_16...     -1.3323      0.1828      
## defense_player_11...      1.0847      0.2781      
## defense_player_17...     -0.8092      0.4185      
## defense_player_1_...      1.1857      0.2358      
## defense_player_21...     -0.1959      0.8447      
## defense_player_21...     -1.2467      0.2126      
## defense_player_3_...      2.2812      0.0226    **
## defense_player_16...      2.4609      0.0139    **
## defense_player_9_...     -2.2948      0.0218    **
## defense_player_20...      1.0969      0.2728      
## yardline_11_20            2.4798      0.0132    **
## yardline_21_30            2.2547      0.0242    **
## yardline_31_40            2.1535      0.0313    **
## yardline_41_50            3.8929      0.0001   ***
## yardline_51_60            2.4481      0.0144    **
## yardline_61_70            2.8141      0.0049   ***
## yardline_71_80            3.3255      0.0009   ***
## yardline_81_90            3.0195      0.0025   ***
## yardline_91_100           1.4928      0.1356     .
## year2017_team_BUF        -0.0086      0.9931      
## year2017_team_CHI         0.3682      0.7127      
## year2017_team_CLE         1.0813      0.2796      
## year2017_team_DAL        -0.4723      0.6367      
## year2017_team_DET        -0.0661      0.9473      
## year2017_team_GB          2.1118      0.0348    **
## year2017_team_HOU         1.8520      0.0641     *
## year2017_team_MIA        -0.4423      0.6583      
## year2017_team_MIN        -0.4414      0.6589      
## year2017_team_NE          0.1719      0.8635      
## year2017_team_SF          1.7669      0.0773     *
## year2017_team_BAL         0.5577      0.5771      
## year2017_team_DEN         0.2615      0.7937      
## year2017_team_LA          0.6925      0.4887      
## year2017_team_NYG        -0.1855      0.8529      
## year2017_team_OAK        -0.4383      0.6612      
## year2017_team_SEA         1.3202      0.1869      
## year2017_team_CAR         0.5657      0.5716      
## year2017_team_CIN         0.9447      0.3449      
## year2017_team_IND         1.0208      0.3074      
## year2017_team_NO          1.2218      0.2219      
## year2017_team_PHI         1.3046      0.1921      
## year2017_team_PIT        -0.7279      0.4667      
## year2017_team_TEN         0.4169      0.6767      
## year2017_team_WAS         0.8847      0.3764      
## year2017_team_KC          1.7079      0.0877     *
## year2017_team_LAC         0.7263      0.4677      
## year2017_team_NYJ         1.3060      0.1916      
## year2017_team_TB          0.1340      0.8934      
## year2017_team_ATL         0.1710      0.8642      
## year2017_team_JAX         0.5743      0.5658      
## year2018_team_ARI         0.2026      0.8394      
## year2018_team_BAL         0.4086      0.6828      
## year2018_team_CAR         0.3010      0.7634      
## year2018_team_CLE         0.1600      0.8729      
## year2018_team_DET         0.8922      0.3723      
## year2018_team_HOU         1.2615      0.2072      
## year2018_team_IND        -0.2567      0.7974      
## year2018_team_KC          0.9151      0.3602      
## year2018_team_NYG         1.1265      0.2600      
## year2018_team_OAK        -0.1702      0.8648      
## year2018_team_PHI         1.0228      0.3065      
## year2018_team_SEA         0.1331      0.8941      
## year2018_team_BUF        -0.0805      0.9358      
## year2018_team_CHI         0.3538      0.7235      
## year2018_team_CIN        -0.1696      0.8653      
## year2018_team_DAL        -0.1974      0.8435      
## year2018_team_DEN         0.1808      0.8566      
## year2018_team_GB          0.0690      0.9450      
## year2018_team_LAC         0.3110      0.7558      
## year2018_team_NE          0.0790      0.9370      
## year2018_team_NO          0.8254      0.4092      
## year2018_team_PIT         0.5802      0.5618      
## year2018_team_SF          0.4015      0.6881      
## year2018_team_MIA         0.8616      0.3890      
## year2018_team_MIN         0.2538      0.7997      
## year2018_team_NYJ         0.4913      0.6233      
## year2018_team_TB          0.7628      0.4456      
## year2018_team_ATL         0.4283      0.6684      
## year2018_team_JAX         0.4218      0.6732      
## year2018_team_LA         -0.6816      0.4955      
## year2018_team_TEN         0.9469      0.3437      
## year2018_team_WAS         0.4616      0.6444      
## year2019_team_ARI        -0.0914      0.9272      
## year2019_team_BUF         0.0809      0.9355      
## year2019_team_CHI         0.5616      0.5744      
## year2019_team_CLE         0.8246      0.4096      
## year2019_team_DAL         0.0785      0.9375      
## year2019_team_IND         0.0633      0.9495      
## year2019_team_JAX         0.5046      0.6139      
## year2019_team_KC          0.4274      0.6691      
## year2019_team_LAC        -0.2563      0.7977      
## year2019_team_MIN         0.0833      0.9337      
## year2019_team_NE          0.5304      0.5958      
## year2019_team_NO         -0.7660      0.4437      
## year2019_team_PHI         0.8496      0.3956      
## year2019_team_SEA         0.2485      0.8037      
## year2019_team_SF          0.2911      0.7710      
## year2019_team_TB         -0.3033      0.7617      
## year2019_team_BAL         0.3448      0.7302      
## year2019_team_CAR         0.1522      0.8790      
## year2019_team_DEN         0.8209      0.4118      
## year2019_team_DET        -0.0137      0.9891      
## year2019_team_HOU         0.4355      0.6632      
## year2019_team_LA          0.1818      0.8557      
## year2019_team_MIA        -0.6804      0.4963      
## year2019_team_NYG        -0.3338      0.7385      
## year2019_team_NYJ        -1.0197      0.3080      
## year2019_team_OAK        -0.0100      0.9920      
## year2019_team_PIT        -0.6931      0.4883      
## year2019_team_TEN        -0.2464      0.8054      
## year2019_team_CIN         0.8221      0.4111      
## year2019_team_WAS         0.4033      0.6868      
## year2019_team_ATL         0.0463      0.9631      
## year2019_team_GB          0.1206      0.9040      
## year2020_team_ATL         0.5169      0.6052      
## year2020_team_BAL         0.7871      0.4313      
## year2020_team_BUF         0.3580      0.7204      
## year2020_team_CAR         0.9182      0.3586      
## year2020_team_CIN         1.0707      0.2844      
## year2020_team_DEN         0.0145      0.9884      
## year2020_team_DET        -0.2042      0.8382      
## year2020_team_JAX        -0.1291      0.8973      
## year2020_team_KC          0.8260      0.4089      
## year2020_team_LA         -0.2831      0.7771      
## year2020_team_MIN         1.0406      0.2981      
## year2020_team_NE          0.1785      0.8584      
## year2020_team_NO          0.8337      0.4045      
## year2020_team_NYG         0.4824      0.6296      
## year2020_team_SF          0.5827      0.5602      
## year2020_team_WAS         0.6875      0.4918      
## year2020_team_CHI         0.6172      0.5371      
## year2020_team_DAL         0.3316      0.7402      
## year2020_team_GB          0.2918      0.7704      
## year2020_team_HOU         0.2950      0.7680      
## year2020_team_MIA        -0.2244      0.8225      
## year2020_team_NYJ         0.3912      0.6957      
## year2020_team_TB          0.8902      0.3734      
## year2020_team_TEN         0.1382      0.8901      
## year2020_team_ARI         0.9468      0.3438      
## year2020_team_CLE        -0.3386      0.7349      
## year2020_team_IND         0.0690      0.9450      
## year2020_team_LAC         0.5106      0.6096      
## year2020_team_PHI         0.9639      0.3351      
## year2020_team_SEA         0.1528      0.8786      
## year2020_team_LV         -0.5164      0.6056      
## year2020_team_PIT         0.0169      0.9865      
## year2021_team_ATL         0.0426      0.9660      
## year2021_team_BUF         0.7134      0.4756      
## year2021_team_CIN        -0.5679      0.5701      
## year2021_team_DAL         0.1999      0.8415      
## year2021_team_DEN         0.8572      0.3914      
## year2021_team_DET         0.2446      0.8068      
## year2021_team_KC          0.5723      0.5671      
## year2021_team_LA          0.2060      0.8368      
## year2021_team_LV          0.6593      0.5097      
## year2021_team_MIN         0.2031      0.8391      
## year2021_team_NE          0.4277      0.6689      
## year2021_team_NO          0.2946      0.7683      
## year2021_team_NYG         0.8646      0.3873      
## year2021_team_SF          0.1698      0.8652      
## year2021_team_TEN        -0.1834      0.8545      
## year2021_team_ARI         1.0428      0.2971      
## year2021_team_BAL         0.7210      0.4710      
## year2021_team_CAR         0.3410      0.7331      
## year2021_team_CHI        -0.8106      0.4176      
## year2021_team_GB          0.9138      0.3609      
## year2021_team_IND        -0.0910      0.9275      
## year2021_team_LAC         0.6570      0.5112      
## year2021_team_MIA         0.2937      0.7690      
## year2021_team_NYJ         0.1667      0.8676      
## year2021_team_PHI         0.0522      0.9584      
## year2021_team_SEA        -0.3309      0.7407      
## year2021_team_TB          0.0996      0.9207      
## year2021_team_WAS         0.1760      0.8603      
## year2021_team_CLE        -0.0104      0.9917      
## year2021_team_HOU        -0.1689      0.8659      
## year2021_team_JAX         0.0704      0.9439      
## year2021_team_PIT         0.1071      0.9147      
## year2022_team_ARI        -0.7995      0.4241      
## year2022_team_ATL        -1.0007      0.3171      
## year2022_team_CAR         0.7689      0.4420      
## year2022_team_CHI         0.4385      0.6610      
## year2022_team_CIN         0.1709      0.8643      
## year2022_team_HOU         0.6415      0.5212      
## year2022_team_IND         0.1982      0.8429      
## year2022_team_LAC        -0.1531      0.8783      
## year2022_team_MIA        -0.3169      0.7513      
## year2022_team_SEA         0.2523      0.8008      
## year2022_team_TB          0.1806      0.8567      
## year2022_team_TEN         1.0530      0.2924      
## year2022_team_WAS         0.5413      0.5883      
## year2022_team_BAL        -0.8651      0.3870      
## year2022_team_BUF         0.9305      0.3522      
## year2022_team_DAL         0.6460      0.5183      
## year2022_team_DET         0.1766      0.8598      
## year2022_team_GB         -0.2035      0.8388      
## year2022_team_JAX        -0.5090      0.6108      
## year2022_team_KC         -0.1574      0.8749      
## year2022_team_LA          1.0291      0.3035      
## year2022_team_LV          0.9116      0.3620      
## year2022_team_NO          0.0802      0.9361      
## year2022_team_PHI         1.2288      0.2192      
## year2022_team_PIT         0.7181      0.4727      
## year2022_team_CLE         0.1840      0.8540      
## year2022_team_DEN         0.8088      0.4187      
## year2022_team_MIN        -0.2129      0.8314      
## year2022_team_NE          0.7287      0.4662      
## year2022_team_NYJ        -0.0798      0.9364      
## year2022_team_NYG         0.3113      0.7556      
## year2022_team_SF         -0.3695      0.7118      
## year2023_team_BAL        -0.1212      0.9035      
## year2023_team_CHI        -0.6900      0.4903      
## year2023_team_CLE        -0.8825      0.3775      
## year2023_team_GB          0.5817      0.5608      
## year2023_team_IND         0.5365      0.5916      
## year2023_team_KC          0.2954      0.7677      
## year2023_team_LAC         0.5040      0.6143      
## year2023_team_LV          0.4879      0.6256      
## year2023_team_MIA         0.8236      0.4102      
## year2023_team_MIN         0.9958      0.3194      
## year2023_team_NO          0.2793      0.7801      
## year2023_team_NYG         1.1178      0.2637      
## year2023_team_SEA        -0.1711      0.8641      
## year2023_team_SF          0.6234      0.5330      
## year2023_team_WAS         1.2138      0.2249      
## year2023_team_ATL        -0.0932      0.9258      
## year2023_team_BUF        -0.0576      0.9541      
## year2023_team_CAR        -0.0841      0.9330      
## year2023_team_DAL         0.3237      0.7462      
## year2023_team_DEN         0.0995      0.9207      
## year2023_team_HOU         0.3053      0.7602      
## year2023_team_LA          0.8352      0.4037      
## year2023_team_NE          0.8230      0.4106      
## year2023_team_PHI         0.6671      0.5047      
## year2023_team_PIT         0.1816      0.8559      
## year2023_team_TEN         0.1574      0.8749      
## year2023_team_ARI        -0.7840      0.4331      
## year2023_team_CIN        -0.2700      0.7872      
## year2023_team_DET         0.8467      0.3972      
## year2023_team_TB          0.6801      0.4965      
## year2023_team_JAX        -0.5251      0.5996      
## year2023_team_NYJ         1.3907      0.1644      
## is_first_half            -0.9986      0.3181      
## time_in_half              1.5737      0.1156     .
## attendance_pct            0.8801      0.3789      
## home_attendance           0.1928      0.8471      
## GIMR                      2.0674      0.0388    **</code></pre>
<pre class="r"><code>cat(&quot;\nSignificance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15&quot;)</code></pre>
<pre><code>## 
## Significance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15</code></pre>
<pre class="r"><code># get vifs
library(car)</code></pre>
<pre><code>## Warning: package &#39;car&#39; was built under R version 4.3.3</code></pre>
<pre><code>## Loading required package: carData</code></pre>
<pre><code>## Warning: package &#39;carData&#39; was built under R version 4.3.3</code></pre>
<pre class="r"><code>vif(ols_model)</code></pre>
<pre><code>##                                                                        ydstogo 
##                                                                       1.975070 
##                                                     posteam_timeouts_remaining 
##                                                                       1.717767 
##                                                     defteam_timeouts_remaining 
##                                                                       1.596305 
##                                                                   rush_attempt 
##                                                                       2.073234 
##                                                                           week 
##                                                                       1.945364 
##                                                                           temp 
##                                                                       2.253646 
##                                                                           wind 
##                                                                       2.293219 
##                                                                       vegas_wp 
##                                                                       2.738128 
##                                                               vegas_wp_posteam 
##                                                                       2.047836 
##                                                                     total_line 
##                                                                       3.107644 
##                                                                      prep_days 
##                                                                       1.241205 
##                                                                overall_win_pct 
##                                                                       3.652768 
##                                                                   team_win_pct 
##                                                                       4.159643 
##                                                              prev_shotgun_rate 
##                                                                       3.811702 
##                                                           prev_singleback_rate 
##                                                                       3.622961 
##                                                                prev_empty_rate 
##                                                                       2.095918 
##                                                           prev_shotgun_success 
##                                                                       2.210202 
##                                                        prev_singleback_success 
##                                                                       2.377031 
##                                                             prev_empty_success 
##                                                                       2.263771 
##                                                             prev_stop_rate_run 
##                                                                       2.593682 
##                                                            prev_stop_rate_pass 
##                                                                       2.108599 
##                                                                   shotgun_rate 
##                                                                       2.746451 
##                                                                singleback_rate 
##                                                                       2.371138 
##                                                                     empty_rate 
##                                                                       2.367142 
##                                                                shotgun_success 
##                                                                       1.606177 
##                                                             singleback_success 
##                                                                       1.749542 
##                                                                  empty_success 
##                                                                       1.857706 
##                                                              def_stop_rate_run 
##                                                                       1.733982 
##                                                             def_stop_rate_pass 
##                                                                       1.854868 
##                                                               avg_pass_rushers 
##                                                                       2.515320 
##                                                              avg_box_defenders 
##                                                                       2.392839 
##                                                                    cover0_rate 
##                                                                       2.655419 
##                                                                    cover1_rate 
##                                                                       6.372560 
##                                                                    cover2_rate 
##                                                                       3.532825 
##                                                                    cover3_rate 
##                                                                       6.703192 
##                                                                    cover4_rate 
##                                                                       3.714890 
##                                                                    cover6_rate 
##                                                                       3.139217 
##                                                                   two_man_rate 
##                                                                       1.826151 
##                                                                   prevent_rate 
##                                                                       1.528720 
##                                                                 attendance_raw 
##                                                                     847.447726 
##                                                                  roof_outdoors 
##                                                                       2.565081 
##                                                              posteam_type_away 
##                                                                       1.480187 
##                                                        offense_formation_EMPTY 
##                                                                       3.055687 
##                                                      offense_formation_SHOTGUN 
##                                                                       4.971602 
##                                                   offense_formation_SINGLEBACK 
##                                                                       2.616123 
##                                                       offense_player_1_present 
##                                                                       1.782886 
##                                                       offense_player_2_present 
##                                                                       1.627227 
##                                                       offense_player_4_present 
##                                                                       2.669457 
##                                                       offense_player_5_present 
##                                                                       8.325049 
##                                                       offense_player_6_present 
##                                                                       1.729949 
##                                                       offense_player_8_present 
##                                                                       5.104725 
##                                                       offense_player_9_present 
##                                                                      72.550855 
##                                                      offense_player_10_present 
##                                                                      24.871956 
##                                                      offense_player_11_present 
##                                                                       4.154650 
##                                                      offense_player_12_present 
##                                                                       1.157836 
##                                                      offense_player_14_present 
##                                                                       4.011567 
##                                                      offense_player_15_present 
##                                                                      19.390138 
##                                                      offense_player_16_present 
##                                                                       6.824090 
##                                                      offense_player_17_present 
##                                                                       3.900049 
##                                                      offense_player_20_present 
##                                                                       3.487753 
##                                                      offense_player_22_present 
##                                                                       7.162936 
##                                                      offense_player_23_present 
##                                                                       1.736426 
##                                                      offense_player_24_present 
##                                                                       1.170291 
##    offense_player_8_receiving_depth_medium_yards_after_catch_per_reception_12w 
##                                                                       1.383257 
##                      offense_player_9_receiving_grades_yards_per_reception_12w 
##                                                                       3.830790 
##           offense_player_8_receiving_depth_left_medium_avg_depth_of_target_12w 
##                                                                       1.918600 
##                    offense_player_9_receiving_concept_slot_targets_percent_12w 
##                                                                       2.096339 
##                offense_player_1_passing_pressure_pressure_accuracy_percent_12w 
##                                                                       2.813919 
##                         offense_player_9_blocking_grades_snap_counts_block_12w 
##                                                                       5.631750 
##                   offense_player_9_receiving_depth_center_short_route_rate_12w 
##                                                                      29.429549 
##       offense_player_18_pass_blocking_true_pass_set_snap_counts_pass_block_12w 
##                                                                       1.891794 
##                        offense_player_1_time_in_pocket_less_grades_offense_12w 
##                                                                       3.634595 
##                offense_player_1_passing_pressure_no_pressure_passing_snaps_12w 
##                                                                      36.244989 
##                          offense_player_8_receiving_depth_short_receptions_12w 
##                                                                       1.886221 
##                offense_player_14_receiving_concept_screen_grades_pass_route_2w 
##                                                                       1.384472 
##                         offense_player_14_blocking_grades_grades_pass_block_2w 
##                                                                       1.469261 
##             offense_player_8_receiving_vs_scheme_zone_contested_catch_rate_12w 
##                                                                       1.439859 
##                         offense_player_9_blocking_grades_player_game_count_12w 
##                                                                      75.445897 
##                 offense_player_9_receiving_concept_slot_yards_per_reception_2w 
##                                                                       1.607074 
##          offense_player_9_receiving_depth_center_medium_targeted_qb_rating_12w 
##                                                                       2.404051 
##                        offense_player_9_blocking_grades_snap_counts_offense_2w 
##                                                                       5.405001 
##                                 offense_player_1_passing_concept_dropbacks_12w 
##                                                                      29.921720 
##                              offense_player_1_passing_depth_short_attempts_12w 
##                                                                      15.063577 
##          offense_player_10_receiving_depth_center_medium_grades_pass_route_12w 
##                                                                       2.546026 
##                                offense_player_9_receiving_grades_slot_snaps_2w 
##                                                                       2.429006 
##                             offense_player_1_time_in_pocket_less_dropbacks_12w 
##                                                                      14.176823 
##                       offense_player_1_passing_pressure_no_blitz_qb_rating_12w 
##                                                                       4.251167 
##                        offense_player_9_receiving_depth_center_short_yards_12w 
##                                                                       2.846287 
##                          offense_player_9_receiving_depth_short_route_rate_12w 
##                                                                      20.625786 
##                 offense_player_9_receiving_depth_short_yards_per_reception_12w 
##                                                                       4.911144 
##                          offense_player_10_receiving_grades_caught_percent_12w 
##                                                                       3.954143 
##                                                       defense_player_1_present 
##                                                                       1.423737 
##                                                       defense_player_2_present 
##                                                                       2.549874 
##                                                       defense_player_3_present 
##                                                                      43.278949 
##                                                       defense_player_4_present 
##                                                                       5.358539 
##                                                       defense_player_5_present 
##                                                                       2.275105 
##                                                       defense_player_6_present 
##                                                                       1.704030 
##                                                       defense_player_9_present 
##                                                                       1.181800 
##                                                      defense_player_10_present 
##                                                                       2.234689 
##                                                      defense_player_11_present 
##                                                                       5.941706 
##                                                      defense_player_12_present 
##                                                                       4.212586 
##                                                      defense_player_13_present 
##                                                                       1.976832 
##                                                      defense_player_14_present 
##                                                                       1.200047 
##                                                      defense_player_15_present 
##                                                                       2.264131 
##                                                      defense_player_16_present 
##                                                                       5.672049 
##                                                      defense_player_17_present 
##                                                                       4.565399 
##                                                      defense_player_18_present 
##                                                                       2.030889 
##                                                      defense_player_19_present 
##                                                                       1.255089 
##                                                      defense_player_20_present 
##                                                                       1.316031 
##                                                      defense_player_21_present 
##                                                                       3.652205 
##                                                      defense_player_22_present 
##                                                                       3.308480 
##                                                      defense_player_23_present 
##                                                                       1.691644 
##               defense_player_3_pass_rushing_productivity_pass_rush_percent_12w 
##                                                                      43.372312 
##             defense_player_3_pass_rushing_productivity_lhs_pass_rush_snaps_12w 
##                                                                       2.533307 
##                  defense_player_3_defensive_grades_snap_counts_run_defense_12w 
##                                                                       8.261846 
##                                  defense_player_3_defensive_grades_hurries_12w 
##                                                                       3.058565 
##                      defense_player_3_defense_summary_snap_counts_dl_over_t_3y 
##                                                                       1.824481 
##                        defense_player_16_run_defense_grades_grades_defense_12w 
##                                                                       5.262198 
##                        defense_player_2_pass_rush_grades_true_pass_set_prp_12w 
##                                                                       1.583748 
##                     defense_player_3_run_defense_grades_avg_depth_of_tackle_2w 
##                                                                       1.345727 
##                     defense_player_3_pass_rush_grades_snap_counts_pass_rush_2w 
##                                                                       4.004966 
##                                defense_player_3_run_defense_grades_tackles_12w 
##                                                                       4.377102 
##                 defense_player_16_coverage_grades_forced_incompletion_rate_12w 
##                                                                       1.571150 
##          defense_player_11_coverage_schemes_zone_coverage_snaps_per_target_12w 
##                                                                       2.175153 
##         defense_player_17_defense_coverage_scheme_base_snap_counts_coverage_3y 
##                                                                       2.006398 
##                    defense_player_1_run_defense_grades_avg_depth_of_tackle_12w 
##                                                                       1.367156 
##                         defense_player_21_run_defense_grades_grades_defense_2w 
##                                                                       2.321812 
##                      defense_player_21_coverage_grades_yards_per_reception_12w 
##                                                                       1.837997 
##                              defense_player_3_defense_summary_grades_tackle_3y 
##                                                                       2.103309 
## defense_player_16_defense_coverage_scheme_zone_coverage_snaps_per_reception_3y 
##                                                                       1.598571 
##                       defense_player_9_defensive_grades_yards_per_reception_2w 
##                                                                       1.260130 
## defense_player_20_defense_coverage_scheme_zone_coverage_snaps_per_reception_3y 
##                                                                       1.554771 
##                                                                 yardline_11_20 
##                                                                       1.688895 
##                                                                 yardline_21_30 
##                                                                       1.813488 
##                                                                 yardline_31_40 
##                                                                       2.222003 
##                                                                 yardline_41_50 
##                                                                       2.086117 
##                                                                 yardline_51_60 
##                                                                       1.810733 
##                                                                 yardline_61_70 
##                                                                       1.750533 
##                                                                 yardline_71_80 
##                                                                       1.505682 
##                                                                 yardline_81_90 
##                                                                       1.288830 
##                                                                yardline_91_100 
##                                                                       1.171511 
##                                                              year2017_team_BUF 
##                                                                       2.516473 
##                                                              year2017_team_CHI 
##                                                                       3.111281 
##                                                              year2017_team_CLE 
##                                                                       2.612034 
##                                                              year2017_team_DAL 
##                                                                       2.753154 
##                                                              year2017_team_DET 
##                                                                       2.148190 
##                                                               year2017_team_GB 
##                                                                       5.342428 
##                                                              year2017_team_HOU 
##                                                                       1.752292 
##                                                              year2017_team_MIA 
##                                                                       3.046971 
##                                                              year2017_team_MIN 
##                                                                       2.617090 
##                                                               year2017_team_NE 
##                                                                       2.803574 
##                                                               year2017_team_SF 
##                                                                       2.016694 
##                                                              year2017_team_BAL 
##                                                                       2.891954 
##                                                              year2017_team_DEN 
##                                                                       2.693744 
##                                                               year2017_team_LA 
##                                                                       3.809899 
##                                                              year2017_team_NYG 
##                                                                       3.198150 
##                                                              year2017_team_OAK 
##                                                                       2.801349 
##                                                              year2017_team_SEA 
##                                                                       3.008461 
##                                                              year2017_team_CAR 
##                                                                       1.926927 
##                                                              year2017_team_CIN 
##                                                                       2.422274 
##                                                              year2017_team_IND 
##                                                                       2.716230 
##                                                               year2017_team_NO 
##                                                                       2.329143 
##                                                              year2017_team_PHI 
##                                                                       3.921743 
##                                                              year2017_team_PIT 
##                                                                       1.849072 
##                                                              year2017_team_TEN 
##                                                                       1.833327 
##                                                              year2017_team_WAS 
##                                                                       2.577901 
##                                                               year2017_team_KC 
##                                                                       3.206851 
##                                                              year2017_team_LAC 
##                                                                       3.291462 
##                                                              year2017_team_NYJ 
##                                                                       1.983983 
##                                                               year2017_team_TB 
##                                                                       1.808030 
##                                                              year2017_team_ATL 
##                                                                       2.346436 
##                                                              year2017_team_JAX 
##                                                                       2.041741 
##                                                              year2018_team_ARI 
##                                                                       3.934055 
##                                                              year2018_team_BAL 
##                                                                       4.643550 
##                                                              year2018_team_CAR 
##                                                                       3.887459 
##                                                              year2018_team_CLE 
##                                                                       4.713017 
##                                                              year2018_team_DET 
##                                                                       4.770055 
##                                                              year2018_team_HOU 
##                                                                       3.141406 
##                                                              year2018_team_IND 
##                                                                       3.753138 
##                                                               year2018_team_KC 
##                                                                       3.893658 
##                                                              year2018_team_NYG 
##                                                                       3.671809 
##                                                              year2018_team_OAK 
##                                                                       3.075091 
##                                                              year2018_team_PHI 
##                                                                       6.797371 
##                                                              year2018_team_SEA 
##                                                                       2.962949 
##                                                              year2018_team_BUF 
##                                                                       3.013317 
##                                                              year2018_team_CHI 
##                                                                       4.619878 
##                                                              year2018_team_CIN 
##                                                                       3.230062 
##                                                              year2018_team_DAL 
##                                                                       4.111310 
##                                                              year2018_team_DEN 
##                                                                       3.526770 
##                                                               year2018_team_GB 
##                                                                       3.137262 
##                                                              year2018_team_LAC 
##                                                                       3.543751 
##                                                               year2018_team_NE 
##                                                                       2.867100 
##                                                               year2018_team_NO 
##                                                                       5.591799 
##                                                              year2018_team_PIT 
##                                                                       2.415324 
##                                                               year2018_team_SF 
##                                                                       2.778260 
##                                                              year2018_team_MIA 
##                                                                       3.287766 
##                                                              year2018_team_MIN 
##                                                                       3.511711 
##                                                              year2018_team_NYJ 
##                                                                       1.982000 
##                                                               year2018_team_TB 
##                                                                       4.557947 
##                                                              year2018_team_ATL 
##                                                                       4.403537 
##                                                              year2018_team_JAX 
##                                                                       4.685119 
##                                                               year2018_team_LA 
##                                                                       2.713836 
##                                                              year2018_team_TEN 
##                                                                       3.201286 
##                                                              year2018_team_WAS 
##                                                                       3.726129 
##                                                              year2019_team_ARI 
##                                                                       3.722399 
##                                                              year2019_team_BUF 
##                                                                       6.571665 
##                                                              year2019_team_CHI 
##                                                                       4.295788 
##                                                              year2019_team_CLE 
##                                                                       3.580781 
##                                                              year2019_team_DAL 
##                                                                       3.494497 
##                                                              year2019_team_IND 
##                                                                       4.336295 
##                                                              year2019_team_JAX 
##                                                                       3.727448 
##                                                               year2019_team_KC 
##                                                                       3.580849 
##                                                              year2019_team_LAC 
##                                                                       3.591526 
##                                                              year2019_team_MIN 
##                                                                       5.599682 
##                                                               year2019_team_NE 
##                                                                       3.921833 
##                                                               year2019_team_NO 
##                                                                       3.933439 
##                                                              year2019_team_PHI 
##                                                                       6.382567 
##                                                              year2019_team_SEA 
##                                                                       2.673303 
##                                                               year2019_team_SF 
##                                                                       4.568434 
##                                                               year2019_team_TB 
##                                                                       4.292236 
##                                                              year2019_team_BAL 
##                                                                       4.065242 
##                                                              year2019_team_CAR 
##                                                                       3.370389 
##                                                              year2019_team_DEN 
##                                                                       3.591307 
##                                                              year2019_team_DET 
##                                                                       3.221945 
##                                                              year2019_team_HOU 
##                                                                       4.763830 
##                                                               year2019_team_LA 
##                                                                       3.778642 
##                                                              year2019_team_MIA 
##                                                                       4.527295 
##                                                              year2019_team_NYG 
##                                                                       3.695431 
##                                                              year2019_team_NYJ 
##                                                                       3.373075 
##                                                              year2019_team_OAK 
##                                                                       4.065106 
##                                                              year2019_team_PIT 
##                                                                       2.465448 
##                                                              year2019_team_TEN 
##                                                                       3.684121 
##                                                              year2019_team_CIN 
##                                                                       4.497408 
##                                                              year2019_team_WAS 
##                                                                       4.791208 
##                                                              year2019_team_ATL 
##                                                                       3.769976 
##                                                               year2019_team_GB 
##                                                                       3.466771 
##                                                              year2020_team_ATL 
##                                                                       6.066094 
##                                                              year2020_team_BAL 
##                                                                       6.528989 
##                                                              year2020_team_BUF 
##                                                                       3.985606 
##                                                              year2020_team_CAR 
##                                                                       3.965222 
##                                                              year2020_team_CIN 
##                                                                       5.256816 
##                                                              year2020_team_DEN 
##                                                                       4.079006 
##                                                              year2020_team_DET 
##                                                                       4.730929 
##                                                              year2020_team_JAX 
##                                                                       5.140320 
##                                                               year2020_team_KC 
##                                                                       3.952657 
##                                                               year2020_team_LA 
##                                                                       4.484931 
##                                                              year2020_team_MIN 
##                                                                       7.021252 
##                                                               year2020_team_NE 
##                                                                       4.912141 
##                                                               year2020_team_NO 
##                                                                       7.171685 
##                                                              year2020_team_NYG 
##                                                                       4.684835 
##                                                               year2020_team_SF 
##                                                                       4.069624 
##                                                              year2020_team_WAS 
##                                                                       4.822535 
##                                                              year2020_team_CHI 
##                                                                       4.896626 
##                                                              year2020_team_DAL 
##                                                                       6.304094 
##                                                               year2020_team_GB 
##                                                                       4.076217 
##                                                              year2020_team_HOU 
##                                                                       4.414915 
##                                                              year2020_team_MIA 
##                                                                       4.796597 
##                                                              year2020_team_NYJ 
##                                                                       3.777571 
##                                                               year2020_team_TB 
##                                                                       4.598130 
##                                                              year2020_team_TEN 
##                                                                       4.134041 
##                                                              year2020_team_ARI 
##                                                                       4.095989 
##                                                              year2020_team_CLE 
##                                                                       4.988176 
##                                                              year2020_team_IND 
##                                                                       4.079926 
##                                                              year2020_team_LAC 
##                                                                       4.393334 
##                                                              year2020_team_PHI 
##                                                                       5.444895 
##                                                              year2020_team_SEA 
##                                                                       4.450719 
##                                                               year2020_team_LV 
##                                                                      23.812197 
##                                                              year2020_team_PIT 
##                                                                       3.460043 
##                                                              year2021_team_ATL 
##                                                                       7.546852 
##                                                              year2021_team_BUF 
##                                                                       5.906128 
##                                                              year2021_team_CIN 
##                                                                       4.098657 
##                                                              year2021_team_DAL 
##                                                                       4.336889 
##                                                              year2021_team_DEN 
##                                                                       7.613018 
##                                                              year2021_team_DET 
##                                                                       4.693388 
##                                                               year2021_team_KC 
##                                                                       4.544327 
##                                                               year2021_team_LA 
##                                                                       5.291435 
##                                                               year2021_team_LV 
##                                                                       3.383093 
##                                                              year2021_team_MIN 
##                                                                       5.296883 
##                                                               year2021_team_NE 
##                                                                       4.337796 
##                                                               year2021_team_NO 
##                                                                       4.455354 
##                                                              year2021_team_NYG 
##                                                                       7.005584 
##                                                               year2021_team_SF 
##                                                                       3.905843 
##                                                              year2021_team_TEN 
##                                                                       4.839544 
##                                                              year2021_team_ARI 
##                                                                       7.814723 
##                                                              year2021_team_BAL 
##                                                                       3.237387 
##                                                              year2021_team_CAR 
##                                                                       9.161808 
##                                                              year2021_team_CHI 
##                                                                       4.891841 
##                                                               year2021_team_GB 
##                                                                       5.109195 
##                                                              year2021_team_IND 
##                                                                       4.704839 
##                                                              year2021_team_LAC 
##                                                                       4.462036 
##                                                              year2021_team_MIA 
##                                                                       4.236407 
##                                                              year2021_team_NYJ 
##                                                                       3.896910 
##                                                              year2021_team_PHI 
##                                                                       8.031533 
##                                                              year2021_team_SEA 
##                                                                       3.389509 
##                                                               year2021_team_TB 
##                                                                       4.189905 
##                                                              year2021_team_WAS 
##                                                                       9.187787 
##                                                              year2021_team_CLE 
##                                                                       5.033804 
##                                                              year2021_team_HOU 
##                                                                       4.458017 
##                                                              year2021_team_JAX 
##                                                                       3.888458 
##                                                              year2021_team_PIT 
##                                                                       4.355318 
##                                                              year2022_team_ARI 
##                                                                       5.421534 
##                                                              year2022_team_ATL 
##                                                                       4.111766 
##                                                              year2022_team_CAR 
##                                                                       3.224142 
##                                                              year2022_team_CHI 
##                                                                       4.096967 
##                                                              year2022_team_CIN 
##                                                                       4.838227 
##                                                              year2022_team_HOU 
##                                                                       6.994707 
##                                                              year2022_team_IND 
##                                                                       6.607821 
##                                                              year2022_team_LAC 
##                                                                       4.786794 
##                                                              year2022_team_MIA 
##                                                                       6.015911 
##                                                              year2022_team_SEA 
##                                                                       4.523011 
##                                                               year2022_team_TB 
##                                                                       5.535521 
##                                                              year2022_team_TEN 
##                                                                       5.315146 
##                                                              year2022_team_WAS 
##                                                                       7.001267 
##                                                              year2022_team_BAL 
##                                                                       4.198053 
##                                                              year2022_team_BUF 
##                                                                       5.003836 
##                                                              year2022_team_DAL 
##                                                                       2.960683 
##                                                              year2022_team_DET 
##                                                                       5.987138 
##                                                               year2022_team_GB 
##                                                                       4.274011 
##                                                              year2022_team_JAX 
##                                                                       6.056602 
##                                                               year2022_team_KC 
##                                                                       2.990210 
##                                                               year2022_team_LA 
##                                                                       3.777653 
##                                                               year2022_team_LV 
##                                                                       3.830303 
##                                                               year2022_team_NO 
##                                                                       3.198202 
##                                                              year2022_team_PHI 
##                                                                       6.877218 
##                                                              year2022_team_PIT 
##                                                                       3.870853 
##                                                              year2022_team_CLE 
##                                                                       5.806634 
##                                                              year2022_team_DEN 
##                                                                       5.740211 
##                                                              year2022_team_MIN 
##                                                                       3.859230 
##                                                               year2022_team_NE 
##                                                                       4.271668 
##                                                              year2022_team_NYJ 
##                                                                       4.789724 
##                                                              year2022_team_NYG 
##                                                                       5.768556 
##                                                               year2022_team_SF 
##                                                                       2.494137 
##                                                              year2023_team_BAL 
##                                                                       4.500713 
##                                                              year2023_team_CHI 
##                                                                       4.192485 
##                                                              year2023_team_CLE 
##                                                                       3.477680 
##                                                               year2023_team_GB 
##                                                                       4.521280 
##                                                              year2023_team_IND 
##                                                                       4.253069 
##                                                               year2023_team_KC 
##                                                                       3.960992 
##                                                              year2023_team_LAC 
##                                                                       4.364830 
##                                                               year2023_team_LV 
##                                                                       4.669334 
##                                                              year2023_team_MIA 
##                                                                       4.404541 
##                                                              year2023_team_MIN 
##                                                                       4.978439 
##                                                               year2023_team_NO 
##                                                                       3.800355 
##                                                              year2023_team_NYG 
##                                                                       8.487239 
##                                                              year2023_team_SEA 
##                                                                       6.920941 
##                                                               year2023_team_SF 
##                                                                       3.767714 
##                                                              year2023_team_WAS 
##                                                                       7.383142 
##                                                              year2023_team_ATL 
##                                                                       4.136162 
##                                                              year2023_team_BUF 
##                                                                       2.985897 
##                                                              year2023_team_CAR 
##                                                                       4.868817 
##                                                              year2023_team_DAL 
##                                                                       3.831226 
##                                                              year2023_team_DEN 
##                                                                       4.370470 
##                                                              year2023_team_HOU 
##                                                                       2.756414 
##                                                               year2023_team_LA 
##                                                                       4.694739 
##                                                               year2023_team_NE 
##                                                                       5.340766 
##                                                              year2023_team_PHI 
##                                                                       6.507402 
##                                                              year2023_team_PIT 
##                                                                       2.814935 
##                                                              year2023_team_TEN 
##                                                                       3.458716 
##                                                              year2023_team_ARI 
##                                                                       3.831945 
##                                                              year2023_team_CIN 
##                                                                       3.185148 
##                                                              year2023_team_DET 
##                                                                       8.966760 
##                                                               year2023_team_TB 
##                                                                       4.705029 
##                                                              year2023_team_JAX 
##                                                                       3.524015 
##                                                              year2023_team_NYJ 
##                                                                       3.412020 
##                                                                  is_first_half 
##                                                                       1.416347 
##                                                                   time_in_half 
##                                                                       1.992529 
##                                                                 attendance_pct 
##                                                                     915.513870 
##                                                                home_attendance 
##                                                                      20.014956 
##                                                                           GIMR 
##                                                                       1.846693</code></pre>
<pre class="r"><code># Create a copy of outcome_data without GIMR
outcome_data_no_gimr &lt;- copy(outcome_data)
outcome_data_no_gimr[, GIMR := NULL]

# Run OLS without GIMR correction
ols_model_no_gimr &lt;- lm(conversion ~ ., data = outcome_data_no_gimr)

# Get HC0-adjusted t-values and p-values for model without GIMR
robust_test_no_gimr &lt;- coeftest(ols_model_no_gimr, vcov = vcovHC(ols_model_no_gimr, type = &quot;HC0&quot;))
t_stats_no_gimr &lt;- robust_test_no_gimr[, &quot;t value&quot;]
p_values_no_gimr &lt;- robust_test_no_gimr[, &quot;Pr(&gt;|t|)&quot;]
coefficients_no_gimr &lt;- coef(ols_model_no_gimr)

# Print results for model without GIMR
cat(&quot;\nModel Results WITHOUT GIMR:\n&quot;)</code></pre>
<pre><code>## 
## Model Results WITHOUT GIMR:</code></pre>
<pre class="r"><code>cat(sprintf(&quot;%-*s  %10s  %10s  %10s  %4s\n&quot;, name_width, &quot;Variable&quot;, &quot;Coef&quot;, &quot;t-value&quot;, &quot;p-value&quot;, &quot;sig&quot;))</code></pre>
<pre><code>## Variable                    Coef     t-value     p-value   sig</code></pre>
<pre class="r"><code>cat(sprintf(&quot;%-*s  %10s  %10s  %10s  %4s\n&quot;, name_width, &quot;---------&quot;, &quot;----&quot;, &quot;-------&quot;, &quot;-------&quot;, &quot;---&quot;))</code></pre>
<pre><code>## ---------                   ----     -------     -------   ---</code></pre>
<pre class="r"><code>for (i in 1:length(t_stats_no_gimr)) {
    var_name &lt;- rownames(robust_test_no_gimr)[i]
    if (nchar(var_name) &gt; name_width) {
        var_name &lt;- paste0(substr(var_name, 1, name_width-3), &quot;...&quot;)
    }
    cat(sprintf(&quot;%-*s  %10.4f  %10.4f  %10.4f  %4s\n&quot;, 
                name_width, var_name,
                coefficients_no_gimr[i],
                t_stats_no_gimr[i], 
                p_values_no_gimr[i],
                get_stars(p_values_no_gimr[i])))
}</code></pre>
<pre><code>## (Intercept)              -0.0623     -0.1387      0.8897      
## ydstogo                  -0.1187    -13.7528      0.0000   ***
## posteam_timeouts_...      0.0019      0.2072      0.8359      
## defteam_timeouts_...      0.0103      1.1491      0.2506      
## rush_attempt              0.1641      7.7811      0.0000   ***
## week                      0.0091      0.9379      0.3483      
## temp                     -0.0066     -0.6259      0.5314      
## wind                      0.0111      1.0488      0.2943      
## vegas_wp                  0.0102      0.9751      0.3296      
## vegas_wp_posteam          0.0106      1.0620      0.2883      
## total_line                0.0301      2.4020      0.0164    **
## prep_days                 0.0094      1.1853      0.2360      
## overall_win_pct           0.0056      0.4168      0.6768      
## team_win_pct              0.0130      0.9198      0.3577      
## prev_shotgun_rate         0.0023      0.1631      0.8705      
## prev_singleback_rate      0.0016      0.1212      0.9036      
## prev_empty_rate           0.0044      0.4457      0.6558      
## prev_shotgun_success     -0.0106     -1.0129      0.3112      
## prev_singleback_s...      0.0044      0.4469      0.6550      
## prev_empty_success        0.0045      0.4283      0.6685      
## prev_stop_rate_run        0.0007      0.0619      0.9506      
## prev_stop_rate_pass      -0.0289     -2.8543      0.0043   ***
## shotgun_rate              0.0153      1.3204      0.1868      
## singleback_rate           0.0134      1.2380      0.2158      
## empty_rate                0.0009      0.0879      0.9300      
## shotgun_success          -0.0136     -1.5299      0.1261     .
## singleback_success       -0.0034     -0.3720      0.7099      
## empty_success            -0.0048     -0.5086      0.6110      
## def_stop_rate_run         0.0175      1.8723      0.0613     *
## def_stop_rate_pass       -0.0083     -0.8707      0.3840      
## avg_pass_rushers         -0.0086     -0.7581      0.4484      
## avg_box_defenders         0.0003      0.0243      0.9806      
## cover0_rate              -0.0038     -0.3301      0.7414      
## cover1_rate              -0.0099     -0.5426      0.5874      
## cover2_rate              -0.0034     -0.2556      0.7982      
## cover3_rate               0.0271      1.4703      0.1416     .
## cover4_rate               0.0163      1.1951      0.2321      
## cover6_rate              -0.0036     -0.2921      0.7702      
## two_man_rate              0.0181      1.8945      0.0582     *
## prevent_rate              0.0210      2.6715      0.0076   ***
## attendance_raw           -0.1872     -0.9432      0.3456      
## roof_outdoors            -0.0043     -0.1737      0.8621      
## posteam_type_away         0.0168      0.9845      0.3249      
## offense_formation...      0.0221      0.5927      0.5534      
## offense_formation...     -0.0019     -0.0602      0.9520      
## offense_formation...      0.0088      0.2939      0.7689      
## offense_player_1_...      0.5382      3.1523      0.0016   ***
## offense_player_2_...     -0.1388     -1.2321      0.2180      
## offense_player_4_...      0.0182      0.2769      0.7819      
## offense_player_5_...     -0.0178     -0.2635      0.7922      
## offense_player_6_...     -0.2014     -0.7550      0.4503      
## offense_player_8_...     -0.2139     -2.3441      0.0191    **
## offense_player_9_...     -0.3738     -2.3637      0.0181    **
## offense_player_10...     -0.0537     -0.7210      0.4710      
## offense_player_11...     -0.0750     -0.8246      0.4096      
## offense_player_12...      0.5041      2.8531      0.0044   ***
## offense_player_14...     -0.1018     -1.0923      0.2748      
## offense_player_15...     -0.0766     -1.1158      0.2646      
## offense_player_16...     -0.0522     -0.7044      0.4812      
## offense_player_17...      0.0430      0.0874      0.9304      
## offense_player_20...     -0.1388     -0.4272      0.6693      
## offense_player_22...     -0.0924     -1.2441      0.2135      
## offense_player_23...      0.1756      1.2780      0.2013      
## offense_player_24...     -0.9625     -5.5635      0.0000   ***
## offense_player_8_...      0.0051      0.5729      0.5667      
## offense_player_9_...     -0.0057     -0.4316      0.6661      
## offense_player_8_...      0.0074      0.7552      0.4502      
## offense_player_9_...     -0.0109     -1.0719      0.2839      
## offense_player_1_...      0.0155      1.2884      0.1977      
## offense_player_9_...      0.0007      0.0421      0.9664      
## offense_player_9_...     -0.0218     -0.5697      0.5689      
## offense_player_18...      0.0026      0.2725      0.7853      
## offense_player_1_...      0.0044      0.3294      0.7419      
## offense_player_1_...     -0.0896     -2.1194      0.0341    **
## offense_player_8_...     -0.0079     -0.8046      0.4211      
## offense_player_14...      0.0272      3.3211      0.0009   ***
## offense_player_14...      0.0085      0.9969      0.3189      
## offense_player_8_...      0.0155      1.8378      0.0662     *
## offense_player_9_...      0.3401      2.1432      0.0322    **
## offense_player_9_...     -0.0081     -0.9043      0.3659      
## offense_player_9_...     -0.0190     -1.7498      0.0802     *
## offense_player_9_...      0.0386      2.3232      0.0202    **
## offense_player_1_...      0.0274      0.7175      0.4731      
## offense_player_1_...      0.0319      1.1955      0.2320      
## offense_player_10...      0.0164      1.4471      0.1479     .
## offense_player_9_...      0.0151      1.3605      0.1737      
## offense_player_1_...      0.0426      1.6303      0.1031     .
## offense_player_1_...     -0.0157     -1.0831      0.2788      
## offense_player_9_...     -0.0272     -2.2766      0.0229    **
## offense_player_9_...     -0.0035     -0.1059      0.9157      
## offense_player_9_...      0.0195      1.2711      0.2038      
## offense_player_10...     -0.0057     -0.4084      0.6830      
## defense_player_1_...     -0.1674     -1.5383      0.1241     .
## defense_player_2_...      0.1014      2.1096      0.0350    **
## defense_player_3_...      0.0387      0.3298      0.7415      
## defense_player_4_...     -0.0190     -0.5792      0.5625      
## defense_player_5_...     -0.0283     -0.6254      0.5317      
## defense_player_6_...     -0.0560     -0.6771      0.4984      
## defense_player_9_...      0.1778      0.9776      0.3283      
## defense_player_10...      0.0144      0.3737      0.7086      
## defense_player_11...     -0.0230     -0.6598      0.5095      
## defense_player_12...      0.0155      0.4838      0.6286      
## defense_player_13...      0.1158      2.0983      0.0359    **
## defense_player_14...      0.2569      1.2473      0.2124      
## defense_player_15...      0.0601      0.7048      0.4810      
## defense_player_16...      0.0486      0.7058      0.4804      
## defense_player_17...      0.0369      1.1840      0.2365      
## defense_player_18...      0.0665      1.7562      0.0791     *
## defense_player_19...      0.0794      0.6001      0.5485      
## defense_player_20...     -0.0287     -0.3222      0.7473      
## defense_player_21...      0.0622      1.4383      0.1504      
## defense_player_22...      0.0381      1.2863      0.1984      
## defense_player_23...      0.0504      0.9746      0.3298      
## defense_player_3_...     -0.0280     -0.5440      0.5865      
## defense_player_3_...      0.0097      0.8511      0.3948      
## defense_player_3_...      0.0387      1.9377      0.0527     *
## defense_player_3_...     -0.0179     -1.4679      0.1422     .
## defense_player_3_...     -0.0091     -0.9984      0.3182      
## defense_player_16...     -0.0177     -1.0606      0.2889      
## defense_player_2_...     -0.0128     -1.4327      0.1520      
## defense_player_3_...      0.0123      1.5459      0.1222     .
## defense_player_3_...     -0.0013     -0.0937      0.9254      
## defense_player_3_...     -0.0105     -0.7146      0.4749      
## defense_player_16...     -0.0116     -1.3470      0.1781      
## defense_player_11...      0.0114      1.0826      0.2791      
## defense_player_17...     -0.0089     -0.8903      0.3734      
## defense_player_1_...      0.0101      1.2353      0.2168      
## defense_player_21...     -0.0029     -0.2693      0.7877      
## defense_player_21...     -0.0125     -1.2693      0.2044      
## defense_player_3_...      0.0236      2.2853      0.0224    **
## defense_player_16...      0.0223      2.4725      0.0135    **
## defense_player_9_...     -0.0180     -2.3164      0.0206    **
## defense_player_20...      0.0093      1.0444      0.2963      
## yardline_11_20            0.0724      2.3139      0.0207    **
## yardline_21_30            0.0623      2.0399      0.0414    **
## yardline_31_40            0.0624      2.3124      0.0208    **
## yardline_41_50            0.1107      4.0279      0.0001   ***
## yardline_51_60            0.0695      2.2129      0.0270    **
## yardline_61_70            0.0864      2.5256      0.0116    **
## yardline_71_80            0.1321      3.1765      0.0015   ***
## yardline_81_90            0.1782      2.9311      0.0034   ***
## yardline_91_100           0.1625      1.5529      0.1205     .
## year2017_team_BUF        -0.0074     -0.0369      0.9706      
## year2017_team_CHI         0.0717      0.4270      0.6694      
## year2017_team_CLE         0.2265      1.1731      0.2408      
## year2017_team_DAL        -0.0799     -0.4637      0.6429      
## year2017_team_DET        -0.0054     -0.0309      0.9753      
## year2017_team_GB          0.4698      2.1973      0.0281    **
## year2017_team_HOU         0.3847      1.8783      0.0604     *
## year2017_team_MIA        -0.0726     -0.3975      0.6910      
## year2017_team_MIN        -0.0714     -0.3918      0.6952      
## year2017_team_NE          0.0431      0.2342      0.8149      
## year2017_team_SF          0.3625      1.8126      0.0700     *
## year2017_team_BAL         0.1284      0.5983      0.5497      
## year2017_team_DEN         0.0563      0.3046      0.7607      
## year2017_team_LA          0.1648      0.7405      0.4591      
## year2017_team_NYG        -0.0287     -0.1744      0.8615      
## year2017_team_OAK        -0.0762     -0.4143      0.6787      
## year2017_team_SEA         0.3072      1.3916      0.1641      
## year2017_team_CAR         0.1301      0.5730      0.5667      
## year2017_team_CIN         0.1925      0.9520      0.3412      
## year2017_team_IND         0.1720      0.9949      0.3198      
## year2017_team_NO          0.2774      1.2377      0.2159      
## year2017_team_PHI         0.2937      1.3175      0.1877      
## year2017_team_PIT        -0.1201     -0.7237      0.4693      
## year2017_team_TEN         0.0994      0.4651      0.6419      
## year2017_team_WAS         0.2018      0.9076      0.3641      
## year2017_team_KC          0.4088      1.7063      0.0880     *
## year2017_team_LAC         0.1708      0.7446      0.4566      
## year2017_team_NYJ         0.2692      1.3080      0.1910      
## year2017_team_TB          0.0311      0.1326      0.8946      
## year2017_team_ATL         0.0280      0.1446      0.8850      
## year2017_team_JAX         0.1232      0.6296      0.5290      
## year2018_team_ARI         0.0502      0.2384      0.8116      
## year2018_team_BAL         0.0950      0.4445      0.6567      
## year2018_team_CAR         0.0729      0.3396      0.7342      
## year2018_team_CLE         0.0419      0.1937      0.8464      
## year2018_team_DET         0.2227      0.9352      0.3497      
## year2018_team_HOU         0.2831      1.2660      0.2056      
## year2018_team_IND        -0.0477     -0.2290      0.8189      
## year2018_team_KC          0.2052      0.9581      0.3381      
## year2018_team_NYG         0.3182      1.1737      0.2406      
## year2018_team_OAK        -0.0273     -0.1214      0.9034      
## year2018_team_PHI         0.2782      1.0552      0.2914      
## year2018_team_SEA         0.0379      0.1544      0.8773      
## year2018_team_BUF        -0.0138     -0.0602      0.9520      
## year2018_team_CHI         0.0768      0.3756      0.7072      
## year2018_team_CIN        -0.0374     -0.1623      0.8711      
## year2018_team_DAL        -0.0334     -0.1520      0.8792      
## year2018_team_DEN         0.0458      0.2113      0.8327      
## year2018_team_GB          0.0239      0.1043      0.9170      
## year2018_team_LAC         0.0819      0.3689      0.7122      
## year2018_team_NE          0.0281      0.1228      0.9023      
## year2018_team_NO          0.2179      0.8842      0.3767      
## year2018_team_PIT         0.1477      0.6188      0.5361      
## year2018_team_SF          0.0926      0.4139      0.6790      
## year2018_team_MIA         0.2001      0.9133      0.3611      
## year2018_team_MIN         0.0659      0.2899      0.7719      
## year2018_team_NYJ         0.1503      0.4927      0.6223      
## year2018_team_TB          0.2097      0.8055      0.4206      
## year2018_team_ATL         0.1070      0.5011      0.6163      
## year2018_team_JAX         0.1234      0.4879      0.6257      
## year2018_team_LA         -0.1527     -0.6691      0.5035      
## year2018_team_TEN         0.2639      1.0249      0.3055      
## year2018_team_WAS         0.1520      0.5306      0.5957      
## year2019_team_ARI        -0.0147     -0.0669      0.9466      
## year2019_team_BUF         0.0327      0.1384      0.8899      
## year2019_team_CHI         0.1236      0.5769      0.5640      
## year2019_team_CLE         0.1912      0.8547      0.3928      
## year2019_team_DAL         0.0255      0.1094      0.9129      
## year2019_team_IND         0.0123      0.0591      0.9529      
## year2019_team_JAX         0.1211      0.5522      0.5809      
## year2019_team_KC          0.0921      0.4367      0.6624      
## year2019_team_LAC        -0.0399     -0.1881      0.8508      
## year2019_team_MIN         0.0220      0.0902      0.9281      
## year2019_team_NE          0.1296      0.5547      0.5791      
## year2019_team_NO         -0.1579     -0.7186      0.4725      
## year2019_team_PHI         0.2239      0.8971      0.3697      
## year2019_team_SEA         0.0736      0.2901      0.7718      
## year2019_team_SF          0.0729      0.3438      0.7310      
## year2019_team_TB         -0.0561     -0.2664      0.7899      
## year2019_team_BAL         0.0809      0.3819      0.7025      
## year2019_team_CAR         0.0488      0.2120      0.8321      
## year2019_team_DEN         0.1872      0.8708      0.3839      
## year2019_team_DET         0.0048      0.0215      0.9828      
## year2019_team_HOU         0.1116      0.4792      0.6318      
## year2019_team_LA          0.0520      0.2069      0.8361      
## year2019_team_MIA        -0.1568     -0.6229      0.5334      
## year2019_team_NYG        -0.0648     -0.2916      0.7706      
## year2019_team_NYJ        -0.1943     -0.9628      0.3357      
## year2019_team_OAK         0.0034      0.0154      0.9877      
## year2019_team_PIT        -0.1193     -0.6193      0.5358      
## year2019_team_TEN        -0.0407     -0.1897      0.8495      
## year2019_team_CIN         0.1904      0.8534      0.3935      
## year2019_team_WAS         0.1112      0.4464      0.6554      
## year2019_team_ATL         0.0165      0.0753      0.9400      
## year2019_team_GB          0.0393      0.1856      0.8528      
## year2020_team_ATL         0.1320      0.5746      0.5656      
## year2020_team_BAL         0.1919      0.8394      0.4013      
## year2020_team_BUF         0.1082      0.4331      0.6650      
## year2020_team_CAR         0.2365      0.9900      0.3222      
## year2020_team_CIN         0.2410      1.0996      0.2716      
## year2020_team_DEN         0.0135      0.0565      0.9550      
## year2020_team_DET        -0.0354     -0.1524      0.8789      
## year2020_team_JAX        -0.0196     -0.0855      0.9318      
## year2020_team_KC          0.2051      0.8896      0.3737      
## year2020_team_LA         -0.0624     -0.2597      0.7951      
## year2020_team_MIN         0.2476      1.0996      0.2716      
## year2020_team_NE          0.0545      0.2399      0.8104      
## year2020_team_NO          0.1956      0.8739      0.3823      
## year2020_team_NYG         0.1232      0.5421      0.5878      
## year2020_team_SF          0.1409      0.5893      0.5557      
## year2020_team_WAS         0.1612      0.7141      0.4752      
## year2020_team_CHI         0.1583      0.6628      0.5075      
## year2020_team_DAL         0.0882      0.3905      0.6962      
## year2020_team_GB          0.0832      0.3479      0.7279      
## year2020_team_HOU         0.0827      0.3526      0.7244      
## year2020_team_MIA        -0.0411     -0.1745      0.8615      
## year2020_team_NYJ         0.1043      0.4469      0.6550      
## year2020_team_TB          0.2159      0.9283      0.3533      
## year2020_team_TEN         0.0372      0.1553      0.8766      
## year2020_team_ARI         0.2369      1.0053      0.3148      
## year2020_team_CLE        -0.0685     -0.2804      0.7792      
## year2020_team_IND         0.0355      0.1476      0.8827      
## year2020_team_LAC         0.1355      0.5519      0.5811      
## year2020_team_PHI         0.2296      1.0110      0.3121      
## year2020_team_SEA         0.0428      0.1796      0.8575      
## year2020_team_LV         -0.2671     -0.5289      0.5969      
## year2020_team_PIT         0.0152      0.0651      0.9481      
## year2021_team_ATL         0.0201      0.0823      0.9344      
## year2021_team_BUF         0.1537      0.7489      0.4540      
## year2021_team_CIN        -0.1104     -0.5306      0.5957      
## year2021_team_DAL         0.0507      0.2323      0.8163      
## year2021_team_DEN         0.2152      0.8772      0.3804      
## year2021_team_DET         0.0612      0.3004      0.7639      
## year2021_team_KC          0.1305      0.6422      0.5208      
## year2021_team_LA          0.0508      0.2454      0.8062      
## year2021_team_LV          0.1484      0.6862      0.4926      
## year2021_team_MIN         0.0418      0.2051      0.8375      
## year2021_team_NE          0.1040      0.4925      0.6224      
## year2021_team_NO          0.0704      0.3366      0.7365      
## year2021_team_NYG         0.2276      0.9237      0.3557      
## year2021_team_SF          0.0438      0.2105      0.8333      
## year2021_team_TEN        -0.0307     -0.1527      0.8787      
## year2021_team_ARI         0.2658      1.0923      0.2748      
## year2021_team_BAL         0.1837      0.7516      0.4523      
## year2021_team_CAR         0.0950      0.3964      0.6918      
## year2021_team_CHI        -0.1572     -0.7647      0.4445      
## year2021_team_GB          0.1897      0.9328      0.3510      
## year2021_team_IND        -0.0167     -0.0821      0.9345      
## year2021_team_LAC         0.1421      0.6496      0.5160      
## year2021_team_MIA         0.0655      0.2982      0.7656      
## year2021_team_NYJ         0.0438      0.2065      0.8364      
## year2021_team_PHI         0.0275      0.1141      0.9092      
## year2021_team_SEA        -0.0654     -0.2904      0.7716      
## year2021_team_TB          0.0219      0.1038      0.9173      
## year2021_team_WAS         0.0556      0.2245      0.8224      
## year2021_team_CLE         0.0046      0.0225      0.9820      
## year2021_team_HOU        -0.0304     -0.1437      0.8858      
## year2021_team_JAX         0.0222      0.1031      0.9179      
## year2021_team_PIT         0.0296      0.1452      0.8846      
## year2022_team_ARI        -0.1539     -0.7570      0.4491      
## year2022_team_ATL        -0.2021     -0.9721      0.3311      
## year2022_team_CAR         0.1700      0.7931      0.4278      
## year2022_team_CHI         0.1237      0.4826      0.6294      
## year2022_team_CIN         0.0574      0.2274      0.8201      
## year2022_team_HOU         0.1718      0.6899      0.4903      
## year2022_team_IND         0.0620      0.2556      0.7982      
## year2022_team_LAC        -0.0266     -0.1304      0.8962      
## year2022_team_MIA        -0.0586     -0.2769      0.7819      
## year2022_team_SEA         0.0568      0.2704      0.7869      
## year2022_team_TB          0.0412      0.2035      0.8388      
## year2022_team_TEN         0.2160      1.0821      0.2793      
## year2022_team_WAS         0.1367      0.5707      0.5682      
## year2022_team_BAL        -0.1860     -0.8450      0.3982      
## year2022_team_BUF         0.2029      0.9381      0.3482      
## year2022_team_DAL         0.1528      0.6697      0.5031      
## year2022_team_DET         0.0430      0.2118      0.8323      
## year2022_team_GB         -0.0339     -0.1629      0.8706      
## year2022_team_JAX        -0.0909     -0.4605      0.6452      
## year2022_team_KC         -0.0317     -0.1397      0.8889      
## year2022_team_LA          0.2116      1.0225      0.3066      
## year2022_team_LV          0.2032      0.9383      0.3481      
## year2022_team_NO          0.0233      0.1065      0.9152      
## year2022_team_PHI         0.3191      1.2724      0.2033      
## year2022_team_PIT         0.1530      0.7420      0.4581      
## year2022_team_CLE         0.0463      0.2347      0.8144      
## year2022_team_DEN         0.1938      0.8704      0.3842      
## year2022_team_MIN        -0.0429     -0.1970      0.8438      
## year2022_team_NE          0.1800      0.7903      0.4294      
## year2022_team_NYJ        -0.0138     -0.0666      0.9469      
## year2022_team_NYG         0.0933      0.3694      0.7119      
## year2022_team_SF         -0.0725     -0.3083      0.7579      
## year2023_team_BAL        -0.0145     -0.0695      0.9446      
## year2023_team_CHI        -0.1356     -0.6580      0.5106      
## year2023_team_CLE        -0.1722     -0.8359      0.4033      
## year2023_team_GB          0.1229      0.5960      0.5512      
## year2023_team_IND         0.1132      0.5665      0.5711      
## year2023_team_KC          0.0628      0.3028      0.7621      
## year2023_team_LAC         0.1090      0.5222      0.6016      
## year2023_team_LV          0.1058      0.5171      0.6051      
## year2023_team_MIA         0.1822      0.8561      0.3920      
## year2023_team_MIN         0.2101      1.0509      0.2934      
## year2023_team_NO          0.0632      0.2894      0.7723      
## year2023_team_NYG         0.2880      1.1933      0.2328      
## year2023_team_SEA        -0.0276     -0.1146      0.9088      
## year2023_team_SF          0.1484      0.6564      0.5116      
## year2023_team_WAS         0.3120      1.2788      0.2011      
## year2023_team_ATL        -0.0098     -0.0426      0.9660      
## year2023_team_BUF         0.0017      0.0082      0.9934      
## year2023_team_CAR        -0.0089     -0.0450      0.9641      
## year2023_team_DAL         0.0793      0.3786      0.7050      
## year2023_team_DEN         0.0273      0.1358      0.8920      
## year2023_team_HOU         0.0711      0.3490      0.7271      
## year2023_team_LA          0.2182      0.8776      0.3802      
## year2023_team_NE          0.2214      0.8751      0.3816      
## year2023_team_PHI         0.1827      0.7131      0.4759      
## year2023_team_PIT         0.0515      0.2380      0.8119      
## year2023_team_TEN         0.0371      0.1748      0.8613      
## year2023_team_ARI        -0.1530     -0.7352      0.4623      
## year2023_team_CIN        -0.0478     -0.2224      0.8240      
## year2023_team_DET         0.2202      0.8800      0.3789      
## year2023_team_TB          0.1540      0.7222      0.4702      
## year2023_team_JAX        -0.1078     -0.4889      0.6250      
## year2023_team_NYJ         0.3098      1.4158      0.1569      
## is_first_half            -0.0264     -1.5133      0.1303     .
## time_in_half              0.0122      1.2487      0.2119      
## attendance_pct            0.1881      0.9115      0.3621      
## home_attendance           0.0207      0.2373      0.8124</code></pre>
<pre class="r"><code>cat(&quot;\nSignificance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15\n&quot;)</code></pre>
<pre><code>## 
## Significance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15</code></pre>
<pre class="r"><code>vif(ols_model_no_gimr)</code></pre>
<pre><code>##                                                                        ydstogo 
##                                                                       1.832390 
##                                                     posteam_timeouts_remaining 
##                                                                       1.651966 
##                                                     defteam_timeouts_remaining 
##                                                                       1.595010 
##                                                                   rush_attempt 
##                                                                       2.022849 
##                                                                           week 
##                                                                       1.943358 
##                                                                           temp 
##                                                                       2.253577 
##                                                                           wind 
##                                                                       2.291180 
##                                                                       vegas_wp 
##                                                                       2.260175 
##                                                               vegas_wp_posteam 
##                                                                       2.047703 
##                                                                     total_line 
##                                                                       3.100331 
##                                                                      prep_days 
##                                                                       1.240607 
##                                                                overall_win_pct 
##                                                                       3.652382 
##                                                                   team_win_pct 
##                                                                       4.141748 
##                                                              prev_shotgun_rate 
##                                                                       3.808664 
##                                                           prev_singleback_rate 
##                                                                       3.620142 
##                                                                prev_empty_rate 
##                                                                       2.094919 
##                                                           prev_shotgun_success 
##                                                                       2.209979 
##                                                        prev_singleback_success 
##                                                                       2.376992 
##                                                             prev_empty_success 
##                                                                       2.263609 
##                                                             prev_stop_rate_run 
##                                                                       2.592712 
##                                                            prev_stop_rate_pass 
##                                                                       2.108221 
##                                                                   shotgun_rate 
##                                                                       2.744557 
##                                                                singleback_rate 
##                                                                       2.370511 
##                                                                     empty_rate 
##                                                                       2.367093 
##                                                                shotgun_success 
##                                                                       1.604028 
##                                                             singleback_success 
##                                                                       1.748170 
##                                                                  empty_success 
##                                                                       1.857584 
##                                                              def_stop_rate_run 
##                                                                       1.733231 
##                                                             def_stop_rate_pass 
##                                                                       1.854193 
##                                                               avg_pass_rushers 
##                                                                       2.515144 
##                                                              avg_box_defenders 
##                                                                       2.392716 
##                                                                    cover0_rate 
##                                                                       2.655352 
##                                                                    cover1_rate 
##                                                                       6.372357 
##                                                                    cover2_rate 
##                                                                       3.532788 
##                                                                    cover3_rate 
##                                                                       6.700954 
##                                                                    cover4_rate 
##                                                                       3.714185 
##                                                                    cover6_rate 
##                                                                       3.139206 
##                                                                   two_man_rate 
##                                                                       1.826007 
##                                                                   prevent_rate 
##                                                                       1.528716 
##                                                                 attendance_raw 
##                                                                     847.251449 
##                                                                  roof_outdoors 
##                                                                       2.559125 
##                                                              posteam_type_away 
##                                                                       1.477062 
##                                                        offense_formation_EMPTY 
##                                                                       3.016035 
##                                                      offense_formation_SHOTGUN 
##                                                                       4.904605 
##                                                   offense_formation_SINGLEBACK 
##                                                                       2.615938 
##                                                       offense_player_1_present 
##                                                                       1.781181 
##                                                       offense_player_2_present 
##                                                                       1.626085 
##                                                       offense_player_4_present 
##                                                                       2.666310 
##                                                       offense_player_5_present 
##                                                                       8.322544 
##                                                       offense_player_6_present 
##                                                                       1.729142 
##                                                       offense_player_8_present 
##                                                                       5.103998 
##                                                       offense_player_9_present 
##                                                                      72.550285 
##                                                      offense_player_10_present 
##                                                                      24.869645 
##                                                      offense_player_11_present 
##                                                                       4.153885 
##                                                      offense_player_12_present 
##                                                                       1.157470 
##                                                      offense_player_14_present 
##                                                                       4.010544 
##                                                      offense_player_15_present 
##                                                                      19.389339 
##                                                      offense_player_16_present 
##                                                                       6.818057 
##                                                      offense_player_17_present 
##                                                                       3.898705 
##                                                      offense_player_20_present 
##                                                                       3.483766 
##                                                      offense_player_22_present 
##                                                                       7.162037 
##                                                      offense_player_23_present 
##                                                                       1.736286 
##                                                      offense_player_24_present 
##                                                                       1.170283 
##    offense_player_8_receiving_depth_medium_yards_after_catch_per_reception_12w 
##                                                                       1.383233 
##                      offense_player_9_receiving_grades_yards_per_reception_12w 
##                                                                       3.830123 
##           offense_player_8_receiving_depth_left_medium_avg_depth_of_target_12w 
##                                                                       1.918456 
##                    offense_player_9_receiving_concept_slot_targets_percent_12w 
##                                                                       2.096304 
##                offense_player_1_passing_pressure_pressure_accuracy_percent_12w 
##                                                                       2.813244 
##                         offense_player_9_blocking_grades_snap_counts_block_12w 
##                                                                       5.630324 
##                   offense_player_9_receiving_depth_center_short_route_rate_12w 
##                                                                      29.421100 
##       offense_player_18_pass_blocking_true_pass_set_snap_counts_pass_block_12w 
##                                                                       1.891682 
##                        offense_player_1_time_in_pocket_less_grades_offense_12w 
##                                                                       3.632977 
##                offense_player_1_passing_pressure_no_pressure_passing_snaps_12w 
##                                                                      36.238190 
##                          offense_player_8_receiving_depth_short_receptions_12w 
##                                                                       1.886135 
##                offense_player_14_receiving_concept_screen_grades_pass_route_2w 
##                                                                       1.383562 
##                         offense_player_14_blocking_grades_grades_pass_block_2w 
##                                                                       1.468228 
##             offense_player_8_receiving_vs_scheme_zone_contested_catch_rate_12w 
##                                                                       1.439809 
##                         offense_player_9_blocking_grades_player_game_count_12w 
##                                                                      75.403813 
##                 offense_player_9_receiving_concept_slot_yards_per_reception_2w 
##                                                                       1.606831 
##          offense_player_9_receiving_depth_center_medium_targeted_qb_rating_12w 
##                                                                       2.403774 
##                        offense_player_9_blocking_grades_snap_counts_offense_2w 
##                                                                       5.404395 
##                                 offense_player_1_passing_concept_dropbacks_12w 
##                                                                      29.919306 
##                              offense_player_1_passing_depth_short_attempts_12w 
##                                                                      15.052864 
##          offense_player_10_receiving_depth_center_medium_grades_pass_route_12w 
##                                                                       2.535842 
##                                offense_player_9_receiving_grades_slot_snaps_2w 
##                                                                       2.428903 
##                             offense_player_1_time_in_pocket_less_dropbacks_12w 
##                                                                      14.176384 
##                       offense_player_1_passing_pressure_no_blitz_qb_rating_12w 
##                                                                       4.248869 
##                        offense_player_9_receiving_depth_center_short_yards_12w 
##                                                                       2.846286 
##                          offense_player_9_receiving_depth_short_route_rate_12w 
##                                                                      20.625383 
##                 offense_player_9_receiving_depth_short_yards_per_reception_12w 
##                                                                       4.910718 
##                          offense_player_10_receiving_grades_caught_percent_12w 
##                                                                       3.954143 
##                                                       defense_player_1_present 
##                                                                       1.423691 
##                                                       defense_player_2_present 
##                                                                       2.547353 
##                                                       defense_player_3_present 
##                                                                      43.268148 
##                                                       defense_player_4_present 
##                                                                       5.355147 
##                                                       defense_player_5_present 
##                                                                       2.266774 
##                                                       defense_player_6_present 
##                                                                       1.703990 
##                                                       defense_player_9_present 
##                                                                       1.181782 
##                                                      defense_player_10_present 
##                                                                       2.227741 
##                                                      defense_player_11_present 
##                                                                       5.935246 
##                                                      defense_player_12_present 
##                                                                       4.210010 
##                                                      defense_player_13_present 
##                                                                       1.976702 
##                                                      defense_player_14_present 
##                                                                       1.199976 
##                                                      defense_player_15_present 
##                                                                       2.262477 
##                                                      defense_player_16_present 
##                                                                       5.669399 
##                                                      defense_player_17_present 
##                                                                       4.564686 
##                                                      defense_player_18_present 
##                                                                       2.030887 
##                                                      defense_player_19_present 
##                                                                       1.255072 
##                                                      defense_player_20_present 
##                                                                       1.315138 
##                                                      defense_player_21_present 
##                                                                       3.649603 
##                                                      defense_player_22_present 
##                                                                       3.307800 
##                                                      defense_player_23_present 
##                                                                       1.691620 
##               defense_player_3_pass_rushing_productivity_pass_rush_percent_12w 
##                                                                      43.372229 
##             defense_player_3_pass_rushing_productivity_lhs_pass_rush_snaps_12w 
##                                                                       2.533272 
##                  defense_player_3_defensive_grades_snap_counts_run_defense_12w 
##                                                                       8.255227 
##                                  defense_player_3_defensive_grades_hurries_12w 
##                                                                       3.055042 
##                      defense_player_3_defense_summary_snap_counts_dl_over_t_3y 
##                                                                       1.824084 
##                        defense_player_16_run_defense_grades_grades_defense_12w 
##                                                                       5.258833 
##                        defense_player_2_pass_rush_grades_true_pass_set_prp_12w 
##                                                                       1.583188 
##                     defense_player_3_run_defense_grades_avg_depth_of_tackle_2w 
##                                                                       1.345727 
##                     defense_player_3_pass_rush_grades_snap_counts_pass_rush_2w 
##                                                                       4.000239 
##                                defense_player_3_run_defense_grades_tackles_12w 
##                                                                       4.377101 
##                 defense_player_16_coverage_grades_forced_incompletion_rate_12w 
##                                                                       1.571061 
##          defense_player_11_coverage_schemes_zone_coverage_snaps_per_target_12w 
##                                                                       2.175148 
##         defense_player_17_defense_coverage_scheme_base_snap_counts_coverage_3y 
##                                                                       2.003531 
##                    defense_player_1_run_defense_grades_avg_depth_of_tackle_12w 
##                                                                       1.366417 
##                         defense_player_21_run_defense_grades_grades_defense_2w 
##                                                                       2.319065 
##                      defense_player_21_coverage_grades_yards_per_reception_12w 
##                                                                       1.837784 
##                              defense_player_3_defense_summary_grades_tackle_3y 
##                                                                       2.103279 
## defense_player_16_defense_coverage_scheme_zone_coverage_snaps_per_reception_3y 
##                                                                       1.598521 
##                       defense_player_9_defensive_grades_yards_per_reception_2w 
##                                                                       1.259994 
## defense_player_20_defense_coverage_scheme_zone_coverage_snaps_per_reception_3y 
##                                                                       1.553739 
##                                                                 yardline_11_20 
##                                                                       1.677589 
##                                                                 yardline_21_30 
##                                                                       1.792213 
##                                                                 yardline_31_40 
##                                                                       2.208913 
##                                                                 yardline_41_50 
##                                                                       2.078089 
##                                                                 yardline_51_60 
##                                                                       1.784476 
##                                                                 yardline_61_70 
##                                                                       1.710085 
##                                                                 yardline_71_80 
##                                                                       1.497686 
##                                                                 yardline_81_90 
##                                                                       1.286477 
##                                                                yardline_91_100 
##                                                                       1.170368 
##                                                              year2017_team_BUF 
##                                                                       2.515961 
##                                                              year2017_team_CHI 
##                                                                       3.109107 
##                                                              year2017_team_CLE 
##                                                                       2.606596 
##                                                              year2017_team_DAL 
##                                                                       2.753096 
##                                                              year2017_team_DET 
##                                                                       2.147722 
##                                                               year2017_team_GB 
##                                                                       5.335278 
##                                                              year2017_team_HOU 
##                                                                       1.752039 
##                                                              year2017_team_MIA 
##                                                                       3.045514 
##                                                              year2017_team_MIN 
##                                                                       2.615694 
##                                                               year2017_team_NE 
##                                                                       2.801070 
##                                                               year2017_team_SF 
##                                                                       2.015861 
##                                                              year2017_team_BAL 
##                                                                       2.890689 
##                                                              year2017_team_DEN 
##                                                                       2.692489 
##                                                               year2017_team_LA 
##                                                                       3.808080 
##                                                              year2017_team_NYG 
##                                                                       3.198062 
##                                                              year2017_team_OAK 
##                                                                       2.800984 
##                                                              year2017_team_SEA 
##                                                                       3.005413 
##                                                              year2017_team_CAR 
##                                                                       1.926891 
##                                                              year2017_team_CIN 
##                                                                       2.422247 
##                                                              year2017_team_IND 
##                                                                       2.715802 
##                                                               year2017_team_NO 
##                                                                       2.329135 
##                                                              year2017_team_PHI 
##                                                                       3.921632 
##                                                              year2017_team_PIT 
##                                                                       1.849045 
##                                                              year2017_team_TEN 
##                                                                       1.832454 
##                                                              year2017_team_WAS 
##                                                                       2.577669 
##                                                               year2017_team_KC 
##                                                                       3.206844 
##                                                              year2017_team_LAC 
##                                                                       3.291211 
##                                                              year2017_team_NYJ 
##                                                                       1.983914 
##                                                               year2017_team_TB 
##                                                                       1.808029 
##                                                              year2017_team_ATL 
##                                                                       2.346057 
##                                                              year2017_team_JAX 
##                                                                       2.040386 
##                                                              year2018_team_ARI 
##                                                                       3.932860 
##                                                              year2018_team_BAL 
##                                                                       4.642173 
##                                                              year2018_team_CAR 
##                                                                       3.886176 
##                                                              year2018_team_CLE 
##                                                                       4.711701 
##                                                              year2018_team_DET 
##                                                                       4.768175 
##                                                              year2018_team_HOU 
##                                                                       3.141406 
##                                                              year2018_team_IND 
##                                                                       3.752457 
##                                                               year2018_team_KC 
##                                                                       3.892309 
##                                                              year2018_team_NYG 
##                                                                       3.669795 
##                                                              year2018_team_OAK 
##                                                                       3.073328 
##                                                              year2018_team_PHI 
##                                                                       6.795879 
##                                                              year2018_team_SEA 
##                                                                       2.962650 
##                                                              year2018_team_BUF 
##                                                                       3.013006 
##                                                              year2018_team_CHI 
##                                                                       4.619413 
##                                                              year2018_team_CIN 
##                                                                       3.230031 
##                                                              year2018_team_DAL 
##                                                                       4.109066 
##                                                              year2018_team_DEN 
##                                                                       3.526007 
##                                                               year2018_team_GB 
##                                                                       3.136318 
##                                                              year2018_team_LAC 
##                                                                       3.541004 
##                                                               year2018_team_NE 
##                                                                       2.865874 
##                                                               year2018_team_NO 
##                                                                       5.587868 
##                                                              year2018_team_PIT 
##                                                                       2.414396 
##                                                               year2018_team_SF 
##                                                                       2.778146 
##                                                              year2018_team_MIA 
##                                                                       3.285833 
##                                                              year2018_team_MIN 
##                                                                       3.510552 
##                                                              year2018_team_NYJ 
##                                                                       1.981995 
##                                                               year2018_team_TB 
##                                                                       4.556048 
##                                                              year2018_team_ATL 
##                                                                       4.398241 
##                                                              year2018_team_JAX 
##                                                                       4.680533 
##                                                               year2018_team_LA 
##                                                                       2.713754 
##                                                              year2018_team_TEN 
##                                                                       3.197635 
##                                                              year2018_team_WAS 
##                                                                       3.721491 
##                                                              year2019_team_ARI 
##                                                                       3.721834 
##                                                              year2019_team_BUF 
##                                                                       6.566708 
##                                                              year2019_team_CHI 
##                                                                       4.295547 
##                                                              year2019_team_CLE 
##                                                                       3.579971 
##                                                              year2019_team_DAL 
##                                                                       3.493697 
##                                                              year2019_team_IND 
##                                                                       4.336277 
##                                                              year2019_team_JAX 
##                                                                       3.725523 
##                                                               year2019_team_KC 
##                                                                       3.580793 
##                                                              year2019_team_LAC 
##                                                                       3.587361 
##                                                              year2019_team_MIN 
##                                                                       5.599622 
##                                                               year2019_team_NE 
##                                                                       3.921247 
##                                                               year2019_team_NO 
##                                                                       3.931256 
##                                                              year2019_team_PHI 
##                                                                       6.379296 
##                                                              year2019_team_SEA 
##                                                                       2.672122 
##                                                               year2019_team_SF 
##                                                                       4.565328 
##                                                               year2019_team_TB 
##                                                                       4.290844 
##                                                              year2019_team_BAL 
##                                                                       4.063989 
##                                                              year2019_team_CAR 
##                                                                       3.367396 
##                                                              year2019_team_DEN 
##                                                                       3.589512 
##                                                              year2019_team_DET 
##                                                                       3.221042 
##                                                              year2019_team_HOU 
##                                                                       4.761653 
##                                                               year2019_team_LA 
##                                                                       3.778127 
##                                                              year2019_team_MIA 
##                                                                       4.523763 
##                                                              year2019_team_NYG 
##                                                                       3.693760 
##                                                              year2019_team_NYJ 
##                                                                       3.370496 
##                                                              year2019_team_OAK 
##                                                                       4.064457 
##                                                              year2019_team_PIT 
##                                                                       2.463467 
##                                                              year2019_team_TEN 
##                                                                       3.681218 
##                                                              year2019_team_CIN 
##                                                                       4.496515 
##                                                              year2019_team_WAS 
##                                                                       4.789106 
##                                                              year2019_team_ATL 
##                                                                       3.769207 
##                                                               year2019_team_GB 
##                                                                       3.463602 
##                                                              year2020_team_ATL 
##                                                                       6.061633 
##                                                              year2020_team_BAL 
##                                                                       6.524814 
##                                                              year2020_team_BUF 
##                                                                       3.980247 
##                                                              year2020_team_CAR 
##                                                                       3.961093 
##                                                              year2020_team_CIN 
##                                                                       5.255687 
##                                                              year2020_team_DEN 
##                                                                       4.077300 
##                                                              year2020_team_DET 
##                                                                       4.728025 
##                                                              year2020_team_JAX 
##                                                                       5.138048 
##                                                               year2020_team_KC 
##                                                                       3.949205 
##                                                               year2020_team_LA 
##                                                                       4.484253 
##                                                              year2020_team_MIN 
##                                                                       7.016104 
##                                                               year2020_team_NE 
##                                                                       4.907812 
##                                                               year2020_team_NO 
##                                                                       7.169116 
##                                                              year2020_team_NYG 
##                                                                       4.681176 
##                                                               year2020_team_SF 
##                                                                       4.069601 
##                                                              year2020_team_WAS 
##                                                                       4.821884 
##                                                              year2020_team_CHI 
##                                                                       4.894158 
##                                                              year2020_team_DAL 
##                                                                       6.298931 
##                                                               year2020_team_GB 
##                                                                       4.073174 
##                                                              year2020_team_HOU 
##                                                                       4.411362 
##                                                              year2020_team_MIA 
##                                                                       4.793778 
##                                                              year2020_team_NYJ 
##                                                                       3.774999 
##                                                               year2020_team_TB 
##                                                                       4.596870 
##                                                              year2020_team_TEN 
##                                                                       4.133758 
##                                                              year2020_team_ARI 
##                                                                       4.093009 
##                                                              year2020_team_CLE 
##                                                                       4.983813 
##                                                              year2020_team_IND 
##                                                                       4.073904 
##                                                              year2020_team_LAC 
##                                                                       4.391407 
##                                                              year2020_team_PHI 
##                                                                       5.442225 
##                                                              year2020_team_SEA 
##                                                                       4.449986 
##                                                               year2020_team_LV 
##                                                                      23.811299 
##                                                              year2020_team_PIT 
##                                                                       3.458186 
##                                                              year2021_team_ATL 
##                                                                       7.544232 
##                                                              year2021_team_BUF 
##                                                                       5.904441 
##                                                              year2021_team_CIN 
##                                                                       4.097429 
##                                                              year2021_team_DAL 
##                                                                       4.335768 
##                                                              year2021_team_DEN 
##                                                                       7.612422 
##                                                              year2021_team_DET 
##                                                                       4.689910 
##                                                               year2021_team_KC 
##                                                                       4.539554 
##                                                               year2021_team_LA 
##                                                                       5.289531 
##                                                               year2021_team_LV 
##                                                                       3.382554 
##                                                              year2021_team_MIN 
##                                                                       5.296878 
##                                                               year2021_team_NE 
##                                                                       4.333749 
##                                                               year2021_team_NO 
##                                                                       4.453557 
##                                                              year2021_team_NYG 
##                                                                       7.000294 
##                                                               year2021_team_SF 
##                                                                       3.904380 
##                                                              year2021_team_TEN 
##                                                                       4.838489 
##                                                              year2021_team_ARI 
##                                                                       7.810420 
##                                                              year2021_team_BAL 
##                                                                       3.236631 
##                                                              year2021_team_CAR 
##                                                                       9.155606 
##                                                              year2021_team_CHI 
##                                                                       4.889183 
##                                                               year2021_team_GB 
##                                                                       5.108774 
##                                                              year2021_team_IND 
##                                                                       4.704754 
##                                                              year2021_team_LAC 
##                                                                       4.461967 
##                                                              year2021_team_MIA 
##                                                                       4.236393 
##                                                              year2021_team_NYJ 
##                                                                       3.895472 
##                                                              year2021_team_PHI 
##                                                                       8.024537 
##                                                              year2021_team_SEA 
##                                                                       3.388187 
##                                                               year2021_team_TB 
##                                                                       4.189890 
##                                                              year2021_team_WAS 
##                                                                       9.182868 
##                                                              year2021_team_CLE 
##                                                                       5.032554 
##                                                              year2021_team_HOU 
##                                                                       4.457316 
##                                                              year2021_team_JAX 
##                                                                       3.887458 
##                                                              year2021_team_PIT 
##                                                                       4.353898 
##                                                              year2022_team_ARI 
##                                                                       5.419006 
##                                                              year2022_team_ATL 
##                                                                       4.111000 
##                                                              year2022_team_CAR 
##                                                                       3.223706 
##                                                              year2022_team_CHI 
##                                                                       4.095349 
##                                                              year2022_team_CIN 
##                                                                       4.834821 
##                                                              year2022_team_HOU 
##                                                                       6.990759 
##                                                              year2022_team_IND 
##                                                                       6.602808 
##                                                              year2022_team_LAC 
##                                                                       4.786194 
##                                                              year2022_team_MIA 
##                                                                       6.013637 
##                                                              year2022_team_SEA 
##                                                                       4.522667 
##                                                               year2022_team_TB 
##                                                                       5.534830 
##                                                              year2022_team_TEN 
##                                                                       5.314278 
##                                                              year2022_team_WAS 
##                                                                       6.999998 
##                                                              year2022_team_BAL 
##                                                                       4.197501 
##                                                              year2022_team_BUF 
##                                                                       5.003773 
##                                                              year2022_team_DAL 
##                                                                       2.960362 
##                                                              year2022_team_DET 
##                                                                       5.985401 
##                                                               year2022_team_GB 
##                                                                       4.272258 
##                                                              year2022_team_JAX 
##                                                                       6.053266 
##                                                               year2022_team_KC 
##                                                                       2.989944 
##                                                               year2022_team_LA 
##                                                                       3.777629 
##                                                               year2022_team_LV 
##                                                                       3.829444 
##                                                               year2022_team_NO 
##                                                                       3.197674 
##                                                              year2022_team_PHI 
##                                                                       6.874685 
##                                                              year2022_team_PIT 
##                                                                       3.870243 
##                                                              year2022_team_CLE 
##                                                                       5.803169 
##                                                              year2022_team_DEN 
##                                                                       5.735374 
##                                                              year2022_team_MIN 
##                                                                       3.858927 
##                                                               year2022_team_NE 
##                                                                       4.267580 
##                                                              year2022_team_NYJ 
##                                                                       4.789518 
##                                                              year2022_team_NYG 
##                                                                       5.763996 
##                                                               year2022_team_SF 
##                                                                       2.492005 
##                                                              year2023_team_BAL 
##                                                                       4.497922 
##                                                              year2023_team_CHI 
##                                                                       4.191489 
##                                                              year2023_team_CLE 
##                                                                       3.475985 
##                                                               year2023_team_GB 
##                                                                       4.521082 
##                                                              year2023_team_IND 
##                                                                       4.252272 
##                                                               year2023_team_KC 
##                                                                       3.960942 
##                                                              year2023_team_LAC 
##                                                                       4.364505 
##                                                               year2023_team_LV 
##                                                                       4.668414 
##                                                              year2023_team_MIA 
##                                                                       4.403568 
##                                                              year2023_team_MIN 
##                                                                       4.975302 
##                                                               year2023_team_NO 
##                                                                       3.800233 
##                                                              year2023_team_NYG 
##                                                                       8.476617 
##                                                              year2023_team_SEA 
##                                                                       6.916057 
##                                                               year2023_team_SF 
##                                                                       3.766925 
##                                                              year2023_team_WAS 
##                                                                       7.376908 
##                                                              year2023_team_ATL 
##                                                                       4.133688 
##                                                              year2023_team_BUF 
##                                                                       2.983039 
##                                                              year2023_team_CAR 
##                                                                       4.867125 
##                                                              year2023_team_DAL 
##                                                                       3.828473 
##                                                              year2023_team_DEN 
##                                                                       4.369163 
##                                                              year2023_team_HOU 
##                                                                       2.755429 
##                                                               year2023_team_LA 
##                                                                       4.692863 
##                                                               year2023_team_NE 
##                                                                       5.337452 
##                                                              year2023_team_PHI 
##                                                                       6.504447 
##                                                              year2023_team_PIT 
##                                                                       2.812953 
##                                                              year2023_team_TEN 
##                                                                       3.458498 
##                                                              year2023_team_ARI 
##                                                                       3.829979 
##                                                              year2023_team_CIN 
##                                                                       3.183394 
##                                                              year2023_team_DET 
##                                                                       8.964665 
##                                                               year2023_team_TB 
##                                                                       4.703205 
##                                                              year2023_team_JAX 
##                                                                       3.522899 
##                                                              year2023_team_NYJ 
##                                                                       3.411579 
##                                                                  is_first_half 
##                                                                       1.344463 
##                                                                   time_in_half 
##                                                                       1.939674 
##                                                                 attendance_pct 
##                                                                     915.322225 
##                                                                home_attendance 
##                                                                      20.005964</code></pre>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIkhlY2ttYW4gU2VsZWN0aW9uIE1vZGVsIEFuYWx5c2lzIg0Kb3V0cHV0OiBodG1sX2RvY3VtZW50DQotLS0NCg0KYGBge3Igb3B0aW9ucywgaW5jbHVkZT1GQUxTRX0NCm9wdGlvbnMobWF4LnByaW50PTEwMDAwKQ0KYGBgDQoNCmBgYHtyfQ0KbGlicmFyeShkYXRhLnRhYmxlKQ0Kb3V0Y29tZV9kYXRhIDwtIGZyZWFkKCJwcmVkaWN0X291dGNvbWUuY3N2Lmd6IikNCnNlbGVjdF9kYXRhIDwtIGZyZWFkKCJwcmVkaWN0X3NlbGVjdC5jc3YuZ3oiKQ0KYGBgDQoNCmBgYHtyfQ0Kc2VsZWN0X2RhdGFbLCBhdHRlbXB0IDo9IGFzLm51bWVyaWMoYXMuY2hhcmFjdGVyKGF0dGVtcHQpKV0NCmBgYA0KDQoNCg0KYGBge3J9DQojIENvbW1lbnRlZCBvdXQgb3JpZ2luYWwgdmVyc2lvbg0KIyAjIExvYWQgcmVxdWlyZWQgbGlicmFyaWVzDQojIGxpYnJhcnkoZGF0YS50YWJsZSkNCiMgbGlicmFyeSh4Z2Jvb3N0KQ0KIyBsaWJyYXJ5KFJPQ1IpDQojIGxpYnJhcnkocGFyYWxsZWwpDQojIA0KIyAjIFByZXBhcmUgdGhlIFhHQm9vc3QgbWF0cmljZXMNCiMgeHMgPC0gbW9kZWwubWF0cml4KH4gLiAtIDEgLSBhdHRlbXB0IC0gbXlfaWQsIGRhdGEgPSBzZWxlY3RfZGF0YSkNCiMgeSA8LSBhcy5udW1lcmljKGFzLmNoYXJhY3RlcihzZWxlY3RfZGF0YSRhdHRlbXB0KSkNCiMgDQojICMgQ3JlYXRlIHBhcmFtZXRlciBncmlkDQojIGdyaWQgPC0gZXhwYW5kLmdyaWQoDQojICAgZXRhID0gc2VxKDAuMDAxLCAwLjEsIGJ5ID0gMC4wMiksDQojICAgbWF4X2RlcHRoID0gc2VxKDUsIDcsIGJ5ID0gMiksDQojICAgbWluX2NoaWxkX3dlaWdodCA9IHNlcSgxLCAxLCBieSA9IDEpLCAgICAgICAgDQojICAgc3Vic2FtcGxlID0gc2VxKDAuOCwgMC44LCBieSA9IDAuMiksDQojICAgY29sc2FtcGxlX2J5dHJlZSA9IHNlcSgwLjgsIDAuOCwgYnkgPSAwLjIpLA0KIyAgIGxhbWJkYSA9IHNlcSgxLCAxLCBieSA9IDEpLCAgICAgICAgICAgICAgICANCiMgICBhbHBoYSA9IHNlcSgwLCAwLCBieSA9IDEpLCAgICAgICAgICAgICAgICAgIA0KIyAgIGdhbW1hID0gc2VxKDAsIDAsIGJ5ID0gMC4xKSwgICAgICAgICAgICAgICANCiMgICBucm91bmRzID0gc2VxKDEwMCwgNTAwLCBieSA9IDUwMCkNCiMgKQ0KIyANCiMgIyBTYW1wbGUgZ3JpZCBwb2ludHMNCiMgY29uZl9sZXYgPC0gLjk1DQojIG51bV9tYXggPC0gNQ0KIyBuIDwtIGNlaWxpbmcobG9nKDEtY29uZl9sZXYpL2xvZygxLW51bV9tYXgvbnJvdyhncmlkKSkpDQojIGluZCA8LSBzYW1wbGUobnJvdyhncmlkKSwgbiwgcmVwbGFjZSA9IEZBTFNFKQ0KIyByZ3JpZCA8LSBncmlkW2luZCwgXQ0KIyANCiMgIyBTZXQgdXAgcGFyYWxsZWwgcHJvY2Vzc2luZw0KIyBuYyA8LSBkZXRlY3RDb3JlcygpIC0gMQ0KIyANCiMgIyBWYWxpZGF0aW9uIHBoYXNlDQojIGNhdCgiXG5QaGFzZSAxOiBWYWxpZGF0aW9uIFBoYXNlXG4iKQ0KIyBuX3ZhbGlkYXRpb25zIDwtIDINCiMgdmFsaWRhdGlvbl9yZXN1bHRzIDwtIG1hdHJpeChucm93ID0gbnJvdyhyZ3JpZCksIG5jb2wgPSBuX3ZhbGlkYXRpb25zKQ0KIyANCiMgZm9yIChqIGluIDE6bnJvdyhyZ3JpZCkpIHsNCiMgICBjYXQoIlxuVGVzdGluZyBwYXJhbWV0ZXIgc2V0IiwgaiwgIm9mIiwgbnJvdyhyZ3JpZCksICJcbiIpDQojICAgDQojICAgZm9yIChpIGluIDE6bl92YWxpZGF0aW9ucykgew0KIyAgICAgIyBDcmVhdGUgdmFsaWRhdGlvbiBzcGxpdA0KIyAgICAgaWR4IDwtIHVuaXF1ZShzYW1wbGUobnJvdyh4cyksIG5yb3coeHMpLCBUUlVFKSkNCiMgICAgIHRyYWluX3ggPC0geHNbaWR4LCBdDQojICAgICB0cmFpbl95IDwtIHlbaWR4XQ0KIyAgICAgdmFsX3ggPC0geHNbLWlkeCwgXQ0KIyAgICAgdmFsX3kgPC0geVstaWR4XQ0KIyAgICAgDQojICAgICAjIFVuZGVyc2FtcGxlIG1ham9yaXR5IGNsYXNzIGluIHRyYWluaW5nIGRhdGENCiMgICAgIHRyYWluX2lkeF8wIDwtIHdoaWNoKHRyYWluX3kgPT0gMCkNCiMgICAgIHRyYWluX2lkeF8xIDwtIHdoaWNoKHRyYWluX3kgPT0gMSkNCiMgICAgIA0KIyAgICAgIyBHZXQgbnVtYmVyIG9mIG1pbm9yaXR5IGNsYXNzIHNhbXBsZXMNCiMgICAgIG5fbWlub3JpdHkgPC0gbGVuZ3RoKHRyYWluX2lkeF8xKQ0KIyAgICAgDQojICAgICAjIFJhbmRvbWx5IHNhbXBsZSBmcm9tIG1ham9yaXR5IGNsYXNzDQojICAgICB0cmFpbl9pZHhfMF9zYW1wbGVkIDwtIHNhbXBsZSh0cmFpbl9pZHhfMCwgbl9taW5vcml0eSkNCiMgICAgIA0KIyAgICAgIyBDb21iaW5lIGluZGljZXMgZm9yIGJhbGFuY2VkIGRhdGFzZXQNCiMgICAgIGJhbGFuY2VkX2lkeCA8LSBjKHRyYWluX2lkeF8wX3NhbXBsZWQsIHRyYWluX2lkeF8xKQ0KIyAgICAgDQojICAgICAjIENyZWF0ZSBiYWxhbmNlZCB0cmFpbmluZyBkYXRhc2V0DQojICAgICB0cmFpbl94X2JhbGFuY2VkIDwtIHRyYWluX3hbYmFsYW5jZWRfaWR4LCBdDQojICAgICB0cmFpbl95X2JhbGFuY2VkIDwtIHRyYWluX3lbYmFsYW5jZWRfaWR4XQ0KIyAgICAgDQojICAgICBwcm0gPC0gbGlzdCgNCiMgICAgICAgYm9vc3RlciA9ICJnYnRyZWUiLA0KIyAgICAgICBvYmplY3RpdmUgPSAiYmluYXJ5OmxvZ2lzdGljIiwNCiMgICAgICAgbWF4X2RlcHRoID0gcmdyaWRbaiwgIm1heF9kZXB0aCJdLA0KIyAgICAgICBldGEgPSByZ3JpZFtqLCAiZXRhIl0sDQojICAgICAgIHN1YnNhbXBsZSA9IHJncmlkW2osICJzdWJzYW1wbGUiXSwNCiMgICAgICAgY29sc2FtcGxlX2J5dHJlZSA9IHJncmlkW2osICJjb2xzYW1wbGVfYnl0cmVlIl0sDQojICAgICAgIGdhbW1hID0gcmdyaWRbaiwgImdhbW1hIl0sDQojICAgICAgIG1pbl9jaGlsZF93ZWlnaHQgPSByZ3JpZFtqLCAibWluX2NoaWxkX3dlaWdodCJdLA0KIyAgICAgICBhbHBoYSA9IHJncmlkW2osICJhbHBoYSJdLA0KIyAgICAgICBsYW1iZGEgPSByZ3JpZFtqLCAibGFtYmRhIl0sDQojICAgICAgIG50aHJlYWQgPSBuYw0KIyAgICAgKQ0KIyAgICAgDQojICAgICBkbV90cmFpbiA8LSB4Z2IuRE1hdHJpeChkYXRhID0gdHJhaW5feF9iYWxhbmNlZCwgbGFiZWwgPSB0cmFpbl95X2JhbGFuY2VkKQ0KIyAgICAgbWRsIDwtIHhnYi50cmFpbigNCiMgICAgICAgcGFyYW1zID0gcHJtLA0KIyAgICAgICBkYXRhID0gZG1fdHJhaW4sDQojICAgICAgIG5yb3VuZHMgPSByZ3JpZFtqLCAibnJvdW5kcyJdLA0KIyAgICAgICB2ZXJib3NlID0gRkFMU0UNCiMgICAgICkNCiMgICAgIA0KIyAgICAgcCA8LSBwcmVkaWN0KG1kbCwgeGdiLkRNYXRyaXgoZGF0YSA9IHZhbF94KSkNCiMgICAgIHByZWQgPC0gcHJlZGljdGlvbihwLCB2YWxfeSkNCiMgICAgIHZhbGlkYXRpb25fcmVzdWx0c1tqLCBpXSA8LSBwZXJmb3JtYW5jZShwcmVkLCAiYXVjIilAeS52YWx1ZXNbWzFdXQ0KIyAgIH0NCiMgfQ0KIyANCiMgIyBSdW4gMTAwIHRlc3RzIHdpdGggYmVzdCBwYXJhbWV0ZXJzDQojIGNhdCgiXG5SdW5uaW5nIFggdGVzdCBpdGVyYXRpb25zIHdpdGggYmVzdCBwYXJhbWV0ZXJzLi4uXG4iKQ0KIyB0ZXN0X2F1Y3MgPC0gYygpDQojIA0KIyBiZXN0X3BhcmFtc19pZHggPC0gd2hpY2gubWF4KHJvd01lYW5zKHZhbGlkYXRpb25fcmVzdWx0cykpDQojIGJlc3RfcGFyYW1zIDwtIHJncmlkW2Jlc3RfcGFyYW1zX2lkeCxdDQojIA0KIyAjIFRyYWluIGZpbmFsIG1vZGVsIHdpdGggYmVzdCBwYXJhbWV0ZXJzDQojIGJlc3RfcGFyYW1zX2xpc3QgPC0gYXMubGlzdChiZXN0X3BhcmFtc1std2hpY2gobmFtZXMoYmVzdF9wYXJhbXMpID09ICJucm91bmRzIildKQ0KIyBiZXN0X3BhcmFtc19saXN0JGJvb3N0ZXIgPC0gImdidHJlZSINCiMgYmVzdF9wYXJhbXNfbGlzdCRvYmplY3RpdmUgPC0gImJpbmFyeTpsb2dpc3RpYyINCiMgYmVzdF9wYXJhbXNfbGlzdCRudGhyZWFkIDwtIG5jDQojIA0KIyBmb3IoaSBpbiAxOjEwMCkgew0KIyAgICMgQ3JlYXRlIHRlc3Qgc3BsaXQNCiMgICBpZHggPC0gdW5pcXVlKHNhbXBsZShucm93KHhzKSwgbnJvdyh4cyksIFQpKQ0KIyAgIHRyYWluX3ggPC0geHNbaWR4LCBdDQojICAgdHJhaW5feSA8LSB5W2lkeF0NCiMgICB0ZXN0X3ggPC0geHNbLWlkeCwgXQ0KIyAgIHRlc3RfeSA8LSB5Wy1pZHhdDQojICAgDQojICAgIyBVbmRlcnNhbXBsZSB0cmFpbmluZyBkYXRhDQojICAgdHJhaW5faWR4XzAgPC0gd2hpY2godHJhaW5feSA9PSAwKQ0KIyAgIHRyYWluX2lkeF8xIDwtIHdoaWNoKHRyYWluX3kgPT0gMSkNCiMgICBuX21pbm9yaXR5IDwtIGxlbmd0aCh0cmFpbl9pZHhfMSkNCiMgICB0cmFpbl9pZHhfMF9zYW1wbGVkIDwtIHNhbXBsZSh0cmFpbl9pZHhfMCwgbl9taW5vcml0eSkNCiMgICBiYWxhbmNlZF9pZHggPC0gYyh0cmFpbl9pZHhfMF9zYW1wbGVkLCB0cmFpbl9pZHhfMSkNCiMgICANCiMgICAjIENyZWF0ZSBiYWxhbmNlZCB0cmFpbmluZyBkYXRhc2V0DQojICAgdHJhaW5feF9iYWxhbmNlZCA8LSB0cmFpbl94W2JhbGFuY2VkX2lkeCwgXQ0KIyAgIHRyYWluX3lfYmFsYW5jZWQgPC0gdHJhaW5feVtiYWxhbmNlZF9pZHhdDQojICAgDQojICAgIyBUcmFpbiBtb2RlbA0KIyAgIGRtX3RyYWluIDwtIHhnYi5ETWF0cml4KGRhdGEgPSB0cmFpbl94X2JhbGFuY2VkLCBsYWJlbCA9IHRyYWluX3lfYmFsYW5jZWQpDQojICAgbWRsIDwtIHhnYi50cmFpbigNCiMgICAgIHBhcmFtcyA9IGJlc3RfcGFyYW1zX2xpc3QsDQojICAgICBkYXRhID0gZG1fdHJhaW4sDQojICAgICBucm91bmRzID0gYmVzdF9wYXJhbXNbWyJucm91bmRzIl1dLA0KIyAgICAgdmVyYm9zZSA9IEZBTFNFDQojICAgKQ0KIyAgIA0KIyAgICMgVGVzdCBvbiB1bmJhbGFuY2VkIHRlc3Qgc2V0DQojICAgcCA8LSBwcmVkaWN0KG1kbCwgeGdiLkRNYXRyaXgoZGF0YSA9IHRlc3RfeCkpDQojICAgcHJlZCA8LSBwcmVkaWN0aW9uKHAsIHRlc3RfeSkNCiMgICB0ZXN0X2F1Y3NbaV0gPC0gcGVyZm9ybWFuY2UocHJlZCwgImF1YyIpQHkudmFsdWVzW1sxXV0NCiMgfQ0KIyANCiMgIyBQcmludCByZXN1bHRzDQojIGNhdCgiXG5UZXN0IFJlc3VsdHMgb3ZlciAxMDAgaXRlcmF0aW9uczpcbiIpDQojIGNhdCgiTWVhbiBBVUM6IiwgbWVhbih0ZXN0X2F1Y3MpLCAiXG4iKQ0KIyBjYXQoIlNEIEFVQzoiLCBzZCh0ZXN0X2F1Y3MpLCAiXG4iKQ0KIyBjYXQoIjk1JSBDSToiLCBtZWFuKHRlc3RfYXVjcykgLSAxLjk2ICogc2QodGVzdF9hdWNzKSwgDQojICAgICAidG8iLCBtZWFuKHRlc3RfYXVjcykgKyAxLjk2ICogc2QodGVzdF9hdWNzKSwgIlxuIikNCiMgDQojICMgUGxvdHRpbmcgQVVDIGRpc3RyaWJ1dGlvbg0KIyBwbG90KHRlc3RfYXVjcywgY29sPSJyZWQiLCBwY2g9MjAsDQojICAgICAgbWFpbj0iQVVDIFRlc3QgRGlzdHJpYnV0aW9uIiwNCiMgICAgICB4bGFiPSJJdGVyYXRpb24iLCB5bGFiPSJBVUMiKQ0KIyBhYmxpbmUoaD1tZWFuKHRlc3RfYXVjcyksIGNvbD0iYmx1ZSIsIGx3ZD0yLCBsdHk9MikNCiMgYWJsaW5lKGg9bWVhbih0ZXN0X2F1Y3MpIC0gMS45NiAqIHNkKHRlc3RfYXVjcyksIGNvbD0iZ3JlZW4iLCBsd2Q9MiwgbHR5PTMpDQojIGFibGluZShoPW1lYW4odGVzdF9hdWNzKSArIDEuOTYgKiBzZCh0ZXN0X2F1Y3MpLCBjb2w9ImdyZWVuIiwgbHdkPTIsIGx0eT0zKQ0KIyBsZWdlbmQoImJvdHRvbXJpZ2h0IiwgDQojICAgICAgICBsZWdlbmQ9YygiQVVDIFZhbHVlcyIsICJNZWFuIiwgIjk1JSBDSSBCb3VuZHMiKSwNCiMgICAgICAgIGNvbD1jKCJyZWQiLCAiYmx1ZSIsICJncmVlbiIpLA0KIyAgICAgICAgbHR5PWMoTkEsIDIsIDMpLA0KIyAgICAgICAgcGNoPWMoMjAsIE5BLCBOQSkpDQojIA0KIyAjIE5vdyB0cmFpbiBmaW5hbCBtb2RlbCBvbiBmdWxsIGRhdGEgZm9yIHogc2NvcmVzDQojIGZpbmFsX2lkeF8wIDwtIHdoaWNoKHkgPT0gMCkNCiMgZmluYWxfaWR4XzEgPC0gd2hpY2goeSA9PSAxKQ0KIyBuX21pbm9yaXR5X2ZpbmFsIDwtIGxlbmd0aChmaW5hbF9pZHhfMSkNCiMgZmluYWxfaWR4XzBfc2FtcGxlZCA8LSBzYW1wbGUoZmluYWxfaWR4XzAsIG5fbWlub3JpdHlfZmluYWwpDQojIGZpbmFsX2JhbGFuY2VkX2lkeCA8LSBjKGZpbmFsX2lkeF8wX3NhbXBsZWQsIGZpbmFsX2lkeF8xKQ0KIyANCiMgIyBDcmVhdGUgYmFsYW5jZWQgZmluYWwgZGF0YXNldA0KIyB4c19iYWxhbmNlZCA8LSB4c1tmaW5hbF9iYWxhbmNlZF9pZHgsIF0NCiMgeV9iYWxhbmNlZCA8LSB5W2ZpbmFsX2JhbGFuY2VkX2lkeF0NCiMgDQojIGRtX2Z1bGwgPC0geGdiLkRNYXRyaXgoZGF0YSA9IHhzX2JhbGFuY2VkLCBsYWJlbCA9IHlfYmFsYW5jZWQpDQojIGZpbmFsX21vZGVsIDwtIHhnYi50cmFpbigNCiMgICBwYXJhbXMgPSBiZXN0X3BhcmFtc19saXN0LA0KIyAgIGRhdGEgPSBkbV9mdWxsLA0KIyAgIG5yb3VuZHMgPSBiZXN0X3BhcmFtc1tbIm5yb3VuZHMiXV0sDQojICAgdmVyYm9zZSA9IEZBTFNFDQojICkNCiMgDQojICMgR2V0IHByb2JhYmlsaXR5IHByZWRpY3Rpb25zICh6KSBmb3IgQUxMIGRhdGENCiMgeiA8LSBwcmVkaWN0KGZpbmFsX21vZGVsLCB4Z2IuRE1hdHJpeChkYXRhID0geHMpKQ0KYGBgDQoNCmBgYHtyfQ0KbGlicmFyeShkYXRhLnRhYmxlKQ0KbGlicmFyeSh4Z2Jvb3N0KQ0KbGlicmFyeShST0NSKQ0KbGlicmFyeShwYXJhbGxlbCkNCg0KIyBQcmVwYXJlIHRoZSBYR0Jvb3N0IG1hdHJpY2VzDQp4cyA8LSBtb2RlbC5tYXRyaXgofiAuIC0gMSAtIGF0dGVtcHQgLSBteV9pZCwgZGF0YSA9IHNlbGVjdF9kYXRhKQ0KeSA8LSBhcy5udW1lcmljKGFzLmNoYXJhY3RlcihzZWxlY3RfZGF0YSRhdHRlbXB0KSkNCg0KIyBDcmVhdGUgcGFyYW1ldGVyIGdyaWQNCmdyaWQgPC0gZXhwYW5kLmdyaWQoDQogIGV0YSA9IHNlcSgwLjAwMSwgMC4xLCBieSA9IDAuMDIpLA0KICBtYXhfZGVwdGggPSBzZXEoNSwgNywgYnkgPSAyKSwNCiAgbWluX2NoaWxkX3dlaWdodCA9IHNlcSgxLCAxLCBieSA9IDEpLCAgICAgICAgDQogIHN1YnNhbXBsZSA9IHNlcSgwLjgsIDAuOCwgYnkgPSAwLjIpLA0KICBjb2xzYW1wbGVfYnl0cmVlID0gc2VxKDAuOCwgMC44LCBieSA9IDAuMiksDQogIGxhbWJkYSA9IHNlcSgxLCAxLCBieSA9IDEpLCAgICAgICAgICAgICAgICANCiAgYWxwaGEgPSBzZXEoMCwgMCwgYnkgPSAxKSwgICAgICAgICAgICAgICAgICANCiAgZ2FtbWEgPSBzZXEoMCwgMCwgYnkgPSAwLjEpLCAgICAgICAgICAgICAgIA0KICBucm91bmRzID0gc2VxKDEwMCwgNTAwLCBieSA9IDUwKQ0KKQ0KDQojIFNhbXBsZSBncmlkIHBvaW50cw0KY29uZl9sZXYgPC0gLjk1DQpudW1fbWF4IDwtIDUNCm4gPC0gY2VpbGluZyhsb2coMS1jb25mX2xldikvbG9nKDEtbnVtX21heC9ucm93KGdyaWQpKSkNCmluZCA8LSBzYW1wbGUobnJvdyhncmlkKSwgbiwgcmVwbGFjZSA9IEZBTFNFKQ0KcmdyaWQgPC0gZ3JpZFtpbmQsIF0NCg0KIyBTZXQgdXAgcGFyYWxsZWwgcHJvY2Vzc2luZw0KbmMgPC0gZGV0ZWN0Q29yZXMoKSAtIDENCg0KIyBDYWxjdWxhdGUgc2NhbGVfcG9zX3dlaWdodCBmb3IgaW1iYWxhbmNlZCBkYXRhc2V0DQpzY2FsZV9wb3Nfd2VpZ2h0IDwtIHN1bSh5ID09IDApIC8gc3VtKHkgPT0gMSkNCg0KIyBWYWxpZGF0aW9uIHBoYXNlDQpjYXQoIlxuUGhhc2UgMTogVmFsaWRhdGlvbiBQaGFzZVxuIikNCm5fdmFsaWRhdGlvbnMgPC0gMg0KdmFsaWRhdGlvbl9yZXN1bHRzIDwtIG1hdHJpeChucm93ID0gbnJvdyhyZ3JpZCksIG5jb2wgPSBuX3ZhbGlkYXRpb25zKQ0KDQpmb3IgKGogaW4gMTpucm93KHJncmlkKSkgew0KICBjYXQoIlxuVGVzdGluZyBwYXJhbWV0ZXIgc2V0IiwgaiwgIm9mIiwgbnJvdyhyZ3JpZCksICJcbiIpDQogIA0KICBmb3IgKGkgaW4gMTpuX3ZhbGlkYXRpb25zKSB7DQogICAgIyBDcmVhdGUgdmFsaWRhdGlvbiBzcGxpdA0KICAgIGlkeCA8LSB1bmlxdWUoc2FtcGxlKG5yb3coeHMpLCBucm93KHhzKSwgVFJVRSkpDQogICAgdHJhaW5feCA8LSB4c1tpZHgsIF0NCiAgICB0cmFpbl95IDwtIHlbaWR4XQ0KICAgIHZhbF94IDwtIHhzWy1pZHgsIF0NCiAgICB2YWxfeSA8LSB5Wy1pZHhdDQogICAgDQogICAgcHJtIDwtIGxpc3QoDQogICAgICBib29zdGVyID0gImdidHJlZSIsDQogICAgICBvYmplY3RpdmUgPSAiYmluYXJ5OmxvZ2lzdGljIiwNCiAgICAgIG1heF9kZXB0aCA9IHJncmlkW2osICJtYXhfZGVwdGgiXSwNCiAgICAgIGV0YSA9IHJncmlkW2osICJldGEiXSwNCiAgICAgIHN1YnNhbXBsZSA9IHJncmlkW2osICJzdWJzYW1wbGUiXSwNCiAgICAgIGNvbHNhbXBsZV9ieXRyZWUgPSByZ3JpZFtqLCAiY29sc2FtcGxlX2J5dHJlZSJdLA0KICAgICAgZ2FtbWEgPSByZ3JpZFtqLCAiZ2FtbWEiXSwNCiAgICAgIG1pbl9jaGlsZF93ZWlnaHQgPSByZ3JpZFtqLCAibWluX2NoaWxkX3dlaWdodCJdLA0KICAgICAgYWxwaGEgPSByZ3JpZFtqLCAiYWxwaGEiXSwNCiAgICAgIGxhbWJkYSA9IHJncmlkW2osICJsYW1iZGEiXSwNCiAgICAgIHNjYWxlX3Bvc193ZWlnaHQgPSBzY2FsZV9wb3Nfd2VpZ2h0LA0KICAgICAgbnRocmVhZCA9IG5jDQogICAgKQ0KICAgIA0KICAgIGRtX3RyYWluIDwtIHhnYi5ETWF0cml4KGRhdGEgPSB0cmFpbl94LCBsYWJlbCA9IHRyYWluX3kpDQogICAgbWRsIDwtIHhnYi50cmFpbigNCiAgICAgIHBhcmFtcyA9IHBybSwNCiAgICAgIGRhdGEgPSBkbV90cmFpbiwNCiAgICAgIG5yb3VuZHMgPSByZ3JpZFtqLCAibnJvdW5kcyJdLA0KICAgICAgdmVyYm9zZSA9IEZBTFNFDQogICAgKQ0KICAgIA0KICAgIHAgPC0gcHJlZGljdChtZGwsIHhnYi5ETWF0cml4KGRhdGEgPSB2YWxfeCkpDQogICAgcHJlZCA8LSBwcmVkaWN0aW9uKHAsIHZhbF95KQ0KICAgIHZhbGlkYXRpb25fcmVzdWx0c1tqLCBpXSA8LSBwZXJmb3JtYW5jZShwcmVkLCAiYXVjIilAeS52YWx1ZXNbWzFdXQ0KICB9DQp9DQoNCiMgUnVuIDEwMCB0ZXN0cyB3aXRoIGJlc3QgcGFyYW1ldGVycw0KY2F0KCJcblJ1bm5pbmcgWCB0ZXN0IGl0ZXJhdGlvbnMgd2l0aCBiZXN0IHBhcmFtZXRlcnMuLi5cbiIpDQp0ZXN0X2F1Y3MgPC0gYygpDQoNCmJlc3RfcGFyYW1zX2lkeCA8LSB3aGljaC5tYXgocm93TWVhbnModmFsaWRhdGlvbl9yZXN1bHRzKSkNCmJlc3RfcGFyYW1zIDwtIHJncmlkW2Jlc3RfcGFyYW1zX2lkeCxdDQoNCiMgVHJhaW4gZmluYWwgbW9kZWwgd2l0aCBiZXN0IHBhcmFtZXRlcnMNCmJlc3RfcGFyYW1zX2xpc3QgPC0gYXMubGlzdChiZXN0X3BhcmFtc1std2hpY2gobmFtZXMoYmVzdF9wYXJhbXMpID09ICJucm91bmRzIildKQ0KYmVzdF9wYXJhbXNfbGlzdCRib29zdGVyIDwtICJnYnRyZWUiDQpiZXN0X3BhcmFtc19saXN0JG9iamVjdGl2ZSA8LSAiYmluYXJ5OmxvZ2lzdGljIg0KYmVzdF9wYXJhbXNfbGlzdCRzY2FsZV9wb3Nfd2VpZ2h0IDwtIHNjYWxlX3Bvc193ZWlnaHQNCmJlc3RfcGFyYW1zX2xpc3QkbnRocmVhZCA8LSBuYw0KDQpmb3IoaSBpbiAxOjEwKSB7DQogICMgQ3JlYXRlIHRlc3Qgc3BsaXQNCiAgaWR4IDwtIHVuaXF1ZShzYW1wbGUobnJvdyh4cyksIG5yb3coeHMpLCBUKSkNCiAgdHJhaW5feCA8LSB4c1tpZHgsIF0NCiAgdHJhaW5feSA8LSB5W2lkeF0NCiAgdGVzdF94IDwtIHhzWy1pZHgsIF0NCiAgdGVzdF95IDwtIHlbLWlkeF0NCiAgDQogICMgVHJhaW4gbW9kZWwgb24gZnVsbCB1bmJhbGFuY2VkIGRhdGFzZXQNCiAgZG1fdHJhaW4gPC0geGdiLkRNYXRyaXgoZGF0YSA9IHRyYWluX3gsIGxhYmVsID0gdHJhaW5feSkNCiAgbWRsIDwtIHhnYi50cmFpbigNCiAgICBwYXJhbXMgPSBiZXN0X3BhcmFtc19saXN0LA0KICAgIGRhdGEgPSBkbV90cmFpbiwNCiAgICBucm91bmRzID0gYmVzdF9wYXJhbXNbWyJucm91bmRzIl1dLA0KICAgIHZlcmJvc2UgPSBGQUxTRQ0KICApDQogIA0KICAjIFRlc3Qgb24gdW5iYWxhbmNlZCB0ZXN0IHNldA0KICBwIDwtIHByZWRpY3QobWRsLCB4Z2IuRE1hdHJpeChkYXRhID0gdGVzdF94KSkNCiAgcHJlZCA8LSBwcmVkaWN0aW9uKHAsIHRlc3RfeSkNCiAgdGVzdF9hdWNzW2ldIDwtIHBlcmZvcm1hbmNlKHByZWQsICJhdWMiKUB5LnZhbHVlc1tbMV1dDQp9DQoNCiMgUHJpbnQgcmVzdWx0cw0KY2F0KCJcblRlc3QgUmVzdWx0cyBvdmVyIDEwMCBpdGVyYXRpb25zOlxuIikNCmNhdCgiTWVhbiBBVUM6IiwgbWVhbih0ZXN0X2F1Y3MpLCAiXG4iKQ0KY2F0KCJTRCBBVUM6Iiwgc2QodGVzdF9hdWNzKSwgIlxuIikNCmNhdCgiOTUlIENJOiIsIG1lYW4odGVzdF9hdWNzKSAtIDEuOTYgKiBzZCh0ZXN0X2F1Y3MpLCANCiAgICAidG8iLCBtZWFuKHRlc3RfYXVjcykgKyAxLjk2ICogc2QodGVzdF9hdWNzKSwgIlxuIikNCg0KIyBQbG90dGluZyBBVUMgZGlzdHJpYnV0aW9uDQpwbG90KHRlc3RfYXVjcywgY29sPSJyZWQiLCBwY2g9MjAsDQogICAgIG1haW49IkFVQyBUZXN0IERpc3RyaWJ1dGlvbiIsDQogICAgIHhsYWI9Ikl0ZXJhdGlvbiIsIHlsYWI9IkFVQyIpDQphYmxpbmUoaD1tZWFuKHRlc3RfYXVjcykgLSAxLjk2ICogc2QodGVzdF9hdWNzKSwgY29sPSJncmVlbiIsIGx3ZD0yLCBsdHk9MykNCmFibGluZShoPW1lYW4odGVzdF9hdWNzKSArIDEuOTYgKiBzZCh0ZXN0X2F1Y3MpLCBjb2w9ImdyZWVuIiwgbHdkPTIsIGx0eT0zKQ0KbGVnZW5kKCJib3R0b21yaWdodCIsIA0KICAgICAgIGxlZ2VuZD1jKCJBVUMgVmFsdWVzIiwgIk1lYW4iLCAiOTUlIENJIEJvdW5kcyIpLA0KICAgICAgIGNvbD1jKCJyZWQiLCAiYmx1ZSIsICJncmVlbiIpLA0KICAgICAgIGx0eT1jKE5BLCAyLCAzKSwNCiAgICAgICBwY2g9YygyMCwgTkEsIE5BKSkNCg0KIyBOb3cgdHJhaW4gZmluYWwgbW9kZWwgb24gZnVsbCBkYXRhIGZvciB6IHNjb3Jlcw0KZG1fZnVsbCA8LSB4Z2IuRE1hdHJpeChkYXRhID0geHMsIGxhYmVsID0geSkNCmZpbmFsX21vZGVsIDwtIHhnYi50cmFpbigNCiAgcGFyYW1zID0gYmVzdF9wYXJhbXNfbGlzdCwNCiAgZGF0YSA9IGRtX2Z1bGwsDQogIG5yb3VuZHMgPSBiZXN0X3BhcmFtc1tbIm5yb3VuZHMiXV0sDQogIHZlcmJvc2UgPSBGQUxTRQ0KKQ0KDQojIEdldCBwcm9iYWJpbGl0eSBwcmVkaWN0aW9ucyAoeikgZm9yIEFMTCBkYXRhDQp6IDwtIHByZWRpY3QoZmluYWxfbW9kZWwsIHhnYi5ETWF0cml4KGRhdGEgPSB4cykpDQpgYGANCg0KDQpgYGB7cn0NCiMgQ2FsY3VsYXRlIHJlc2lkdWFscyBmb3IgWEdCb29zdCBwcmVkaWN0aW9ucw0KeSA8LSBhcy5udW1lcmljKGFzLmNoYXJhY3RlcihzZWxlY3RfZGF0YSRhdHRlbXB0KSkNCnJlc2lkdWFscyA8LSB5IC0geg0KDQojIEhpc3RvZ3JhbSBvZiByZXNpZHVhbHMNCmhpc3QocmVzaWR1YWxzLCBtYWluPSJEaXN0cmlidXRpb24gb2YgWEdCb29zdCBNb2RlbCBSZXNpZHVhbHMiLCB4bGFiPSJSZXNpZHVhbCIsIGJyZWFrcz0xMDApDQpgYGANCg0KYGBge3J9DQojIHBsb3Qgb3V0IHRoZSB6IHZhbHVlc1wNCnBsb3QoZGVuc2l0eSh6KSwgDQogICAgIG1haW4gPSAiRGVuc2l0eSBvZiBaIFByZWRpY3Rpb25zIiwNCiAgICAgeGxhYiA9ICJQcmVkaWN0ZWQgUHJvYmFiaWxpdHkgb2YgQXR0ZW1wdCIsDQogICAgIHlsYWIgPSAiRGVuc2l0eSIpDQpgYGANCg0KYGBge3J9DQojIENhbGN1bGF0ZSBHSU1SIChsYW1iZGEpIFRoaXMgaXMgR2VuZXJhbGl6ZWQgaW52ZXJzZSBtaWxscyByYXRpbw0KR0lNUiA8LSBkbm9ybShxbm9ybSh6KSkgLyAoMSAtIHBub3JtKHFub3JtKHopKSkNCg0KIyBBZGQgR0lNUiB0byB0aGUgZGF0YQ0Kc2VsZWN0X2RhdGFbLCBHSU1SIDo9IEdJTVJdDQoNCiMgUHJpbnQgdmFyaWFibGUgaW1wb3J0YQ0KYGBgDQoNCmBgYHtyfQ0KIyBDcmVhdGUgYSBkYXRhLnRhYmxlIHdpdGgganVzdCBteV9pZCBhbmQgR0lNUiBmcm9tIHNlbGVjdF9kYXRhDQpHSU1SX2R0IDwtIGRhdGEudGFibGUobXlfaWQgPSBzZWxlY3RfZGF0YSRteV9pZCwgR0lNUiA9IEdJTVIpDQoNCiMgQWRkIEdJTVIgdG8gb3V0Y29tZV9kYXRhIGJ5IG1hdGNoaW5nIG9uIG15X2lkDQpvdXRjb21lX2RhdGFbR0lNUl9kdCwgR0lNUiA6PSBpLkdJTVIsIG9uID0gIm15X2lkIl0NCmBgYA0KDQpgYGB7cn0NCiNraWxsIC0gbXlfaWQNCm91dGNvbWVfZGF0YSA8LSBvdXRjb21lX2RhdGFbLCBteV9pZCA6PSBOVUxMXQ0Kb3V0Y29tZV9kYXRhWywgeWVhcjIwMTdfdGVhbV9BUkkgOj0gTlVMTF0NCm91dGNvbWVfZGF0YSA8LSBvdXRjb21lX2RhdGFbLCB5YXJkbGluZV8xXzEwOj0gTlVMTF0NCmBgYA0KDQpgYGB7cn0NCm91dGNvbWVfZGF0YVssIGNvbnZlcnNpb24gOj0gYXMubnVtZXJpYyhhcy5jaGFyYWN0ZXIoY29udmVyc2lvbikpXQ0KIyBUaGVuIHJ1biBPTFMgd2l0aCBHSU1SIGNvcnJlY3Rpb24NCm9sc19tb2RlbCA8LSBsbShjb252ZXJzaW9uIH4gIC4sIGRhdGEgPSBvdXRjb21lX2RhdGEpDQpgYGANCg0KYGBge3J9DQpsaWJyYXJ5KHNhbmR3aWNoKQ0KbGlicmFyeShsbXRlc3QpDQoNCiMgR2V0IEhDMC1hZGp1c3RlZCB0LXZhbHVlcyBhbmQgcC12YWx1ZXMNCnJvYnVzdF90ZXN0IDwtIGNvZWZ0ZXN0KG9sc19tb2RlbCwgdmNvdiA9IHZjb3ZIQyhvbHNfbW9kZWwsIHR5cGUgPSAiSEMwIikpDQp0X3N0YXRzIDwtIHJvYnVzdF90ZXN0WywgInQgdmFsdWUiXQ0KcF92YWx1ZXMgPC0gcm9idXN0X3Rlc3RbLCAiUHIoPnx0fCkiXQ0KDQojIEZ1bmN0aW9uIHRvIGFkZCBzaWduaWZpY2FuY2Ugc3RhcnMNCmdldF9zdGFycyA8LSBmdW5jdGlvbihwKSB7DQogICAgaWYgKHAgPD0gMC4wMSkgcmV0dXJuKCIqKioiKQ0KICAgIGlmIChwIDw9IDAuMDUpIHJldHVybigiKioiKQ0KICAgIGlmIChwIDw9IDAuMSkgcmV0dXJuKCIqIikNCiAgICBpZiAocCA8PSAwLjE1KSByZXR1cm4oIi4iKQ0KICAgIHJldHVybigiIikNCn0NCg0KIyBNYXhpbXVtIHdpZHRoIGZvciB2YXJpYWJsZSBuYW1lcw0KbmFtZV93aWR0aCA8LSAyMA0KDQojIFByaW50IGhlYWRlciB3aXRoIGFsaWdubWVudA0KY2F0KHNwcmludGYoIiUtKnMgICUxMHMgICUxMHMgICU0c1xuIiwgbmFtZV93aWR0aCwgIlZhcmlhYmxlIiwgInQtdmFsdWUiLCAicC12YWx1ZSIsICJzaWciKSkNCmNhdChzcHJpbnRmKCIlLSpzICAlMTBzICAlMTBzICAlNHNcbiIsIG5hbWVfd2lkdGgsICItLS0tLS0tLS0iLCAiLS0tLS0tLSIsICItLS0tLS0tIiwgIi0tLS0iKSkNCg0KIyBMb29wIHRocm91Z2ggYW5kIHByaW50IHZhbHVlcw0KZm9yIChpIGluIDE6bGVuZ3RoKHRfc3RhdHMpKSB7DQogICAgdmFyX25hbWUgPC0gcm93bmFtZXMocm9idXN0X3Rlc3QpW2ldDQogICAgIyBUcnVuY2F0ZSBuYW1lIGlmIHRvbyBsb25nDQogICAgaWYgKG5jaGFyKHZhcl9uYW1lKSA+IG5hbWVfd2lkdGgpIHsNCiAgICAgICAgdmFyX25hbWUgPC0gcGFzdGUwKHN1YnN0cih2YXJfbmFtZSwgMSwgbmFtZV93aWR0aC0zKSwgIi4uLiIpDQogICAgfQ0KICAgIGNhdChzcHJpbnRmKCIlLSpzICAlMTAuNGYgICUxMC40ZiAgJTRzXG4iLCANCiAgICAgICAgICAgICAgICBuYW1lX3dpZHRoLCB2YXJfbmFtZSwgDQogICAgICAgICAgICAgICAgdF9zdGF0c1tpXSwgcF92YWx1ZXNbaV0sDQogICAgICAgICAgICAgICAgZ2V0X3N0YXJzKHBfdmFsdWVzW2ldKSkpDQp9DQoNCmNhdCgiXG5TaWduaWZpY2FuY2UgY29kZXM6IDAgJyoqKicgMC4wMSAnKionIDAuMDUgJyonIDAuMSAnLicgMC4xNSIpDQpgYGANCg0KYGBge3J9DQojIGdldCB2aWZzDQpsaWJyYXJ5KGNhcikNCnZpZihvbHNfbW9kZWwpDQpgYGANCg0KYGBge3J9DQojIENyZWF0ZSBhIGNvcHkgb2Ygb3V0Y29tZV9kYXRhIHdpdGhvdXQgR0lNUg0Kb3V0Y29tZV9kYXRhX25vX2dpbXIgPC0gY29weShvdXRjb21lX2RhdGEpDQpvdXRjb21lX2RhdGFfbm9fZ2ltclssIEdJTVIgOj0gTlVMTF0NCg0KIyBSdW4gT0xTIHdpdGhvdXQgR0lNUiBjb3JyZWN0aW9uDQpvbHNfbW9kZWxfbm9fZ2ltciA8LSBsbShjb252ZXJzaW9uIH4gLiwgZGF0YSA9IG91dGNvbWVfZGF0YV9ub19naW1yKQ0KDQojIEdldCBIQzAtYWRqdXN0ZWQgdC12YWx1ZXMgYW5kIHAtdmFsdWVzIGZvciBtb2RlbCB3aXRob3V0IEdJTVINCnJvYnVzdF90ZXN0X25vX2dpbXIgPC0gY29lZnRlc3Qob2xzX21vZGVsX25vX2dpbXIsIHZjb3YgPSB2Y292SEMob2xzX21vZGVsX25vX2dpbXIsIHR5cGUgPSAiSEMwIikpDQp0X3N0YXRzX25vX2dpbXIgPC0gcm9idXN0X3Rlc3Rfbm9fZ2ltclssICJ0IHZhbHVlIl0NCnBfdmFsdWVzX25vX2dpbXIgPC0gcm9idXN0X3Rlc3Rfbm9fZ2ltclssICJQcig+fHR8KSJdDQpjb2VmZmljaWVudHNfbm9fZ2ltciA8LSBjb2VmKG9sc19tb2RlbF9ub19naW1yKQ0KDQojIFByaW50IHJlc3VsdHMgZm9yIG1vZGVsIHdpdGhvdXQgR0lNUg0KY2F0KCJcbk1vZGVsIFJlc3VsdHMgV0lUSE9VVCBHSU1SOlxuIikNCmNhdChzcHJpbnRmKCIlLSpzICAlMTBzICAlMTBzICAlMTBzICAlNHNcbiIsIG5hbWVfd2lkdGgsICJWYXJpYWJsZSIsICJDb2VmIiwgInQtdmFsdWUiLCAicC12YWx1ZSIsICJzaWciKSkNCmNhdChzcHJpbnRmKCIlLSpzICAlMTBzICAlMTBzICAlMTBzICAlNHNcbiIsIG5hbWVfd2lkdGgsICItLS0tLS0tLS0iLCAiLS0tLSIsICItLS0tLS0tIiwgIi0tLS0tLS0iLCAiLS0tIikpDQoNCmZvciAoaSBpbiAxOmxlbmd0aCh0X3N0YXRzX25vX2dpbXIpKSB7DQogICAgdmFyX25hbWUgPC0gcm93bmFtZXMocm9idXN0X3Rlc3Rfbm9fZ2ltcilbaV0NCiAgICBpZiAobmNoYXIodmFyX25hbWUpID4gbmFtZV93aWR0aCkgew0KICAgICAgICB2YXJfbmFtZSA8LSBwYXN0ZTAoc3Vic3RyKHZhcl9uYW1lLCAxLCBuYW1lX3dpZHRoLTMpLCAiLi4uIikNCiAgICB9DQogICAgY2F0KHNwcmludGYoIiUtKnMgICUxMC40ZiAgJTEwLjRmICAlMTAuNGYgICU0c1xuIiwgDQogICAgICAgICAgICAgICAgbmFtZV93aWR0aCwgdmFyX25hbWUsDQogICAgICAgICAgICAgICAgY29lZmZpY2llbnRzX25vX2dpbXJbaV0sDQogICAgICAgICAgICAgICAgdF9zdGF0c19ub19naW1yW2ldLCANCiAgICAgICAgICAgICAgICBwX3ZhbHVlc19ub19naW1yW2ldLA0KICAgICAgICAgICAgICAgIGdldF9zdGFycyhwX3ZhbHVlc19ub19naW1yW2ldKSkpDQp9DQoNCmNhdCgiXG5TaWduaWZpY2FuY2UgY29kZXM6IDAgJyoqKicgMC4wMSAnKionIDAuMDUgJyonIDAuMSAnLicgMC4xNVxuIikNCg0KdmlmKG9sc19tb2RlbF9ub19naW1yKQ0KDQpgYGANCg0KDQo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("heckman.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>

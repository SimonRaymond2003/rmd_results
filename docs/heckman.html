<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Heckman Selection Model Analysis</title>

<script src="site_libs/header-attrs-2.22/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">4th Downs in the NFL</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="heckman.html">Heckman Selection</a>
</li>
<li>
  <a href="xgboost.html">XGBoost Prediction</a>
</li>
<li>
  <a href="attendance.html">Attendance Impact</a>
</li>
<li>
  <a href="thirddown.html">Third Down Analysis</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Heckman Selection Model Analysis</h1>

</div>


<pre class="r"><code>library(data.table)
outcome_data &lt;- fread(&quot;predict_outcome.csv.gz&quot;)
select_data &lt;- fread(&quot;predict_select.csv.gz&quot;)</code></pre>
<pre class="r"><code>select_data[, attempt := as.numeric(as.character(attempt))]</code></pre>
<pre class="r"><code># Load required libraries
library(data.table)
library(xgboost)
library(ROCR)
library(parallel)

# Prepare the XGBoost matrices
xs &lt;- model.matrix(~ . - 1 - attempt - my_id, data = select_data)
y &lt;- as.numeric(as.character(select_data$attempt))

# Create parameter grid
grid &lt;- expand.grid(
  eta = seq(0.001, 0.1, by = 0.01),
  max_depth = seq(5, 7, by = 2),
  min_child_weight = seq(1, 1, by = 1),        
  subsample = seq(0.8, 0.8, by = 0.2),
  colsample_bytree = seq(0.8, 0.8, by = 0.2),
  lambda = seq(1, 1, by = 1),                
  alpha = seq(0, 0, by = 1),                  
  gamma = seq(0, 0, by = 0.1),               
  nrounds = seq(100, 500, by = 50)
)

# Sample grid points
conf_lev &lt;- .95
num_max &lt;- 5
n &lt;- ceiling(log(1-conf_lev)/log(1-num_max/nrow(grid)))
ind &lt;- sample(nrow(grid), n, replace = FALSE)
rgrid &lt;- grid[ind, ]

# Set up parallel processing
nc &lt;- detectCores() - 1

# Validation phase
cat(&quot;\nPhase 1: Validation Phase\n&quot;)</code></pre>
<pre><code>## 
## Phase 1: Validation Phase</code></pre>
<pre class="r"><code>n_validations &lt;- 20
validation_results &lt;- matrix(nrow = nrow(rgrid), ncol = n_validations)

for (j in 1:nrow(rgrid)) {
  #cat(&quot;\nTesting parameter set&quot;, j, &quot;of&quot;, nrow(rgrid), &quot;\n&quot;)
  
  for (i in 1:n_validations) {
    # Create validation split
    idx &lt;- unique(sample(nrow(xs), nrow(xs), T))
    train_x &lt;- xs[idx, ]
    train_y &lt;- y[idx]
    val_x &lt;- xs[-idx, ]
    val_y &lt;- y[-idx]
    
    # Undersample majority class in training data
    train_idx_0 &lt;- which(train_y == 0)
    train_idx_1 &lt;- which(train_y == 1)
    
    # Get number of minority class samples
    n_minority &lt;- length(train_idx_1)
    
    # Randomly sample from majority class
    train_idx_0_sampled &lt;- sample(train_idx_0, n_minority)
    
    # Combine indices for balanced dataset
    balanced_idx &lt;- c(train_idx_0_sampled, train_idx_1)
    
    # Create balanced training dataset
    train_x_balanced &lt;- train_x[balanced_idx, ]
    train_y_balanced &lt;- train_y[balanced_idx]
    
    prm &lt;- list(
      booster = &quot;gbtree&quot;,
      objective = &quot;binary:logistic&quot;,
      max_depth = rgrid[j, &quot;max_depth&quot;],
      eta = rgrid[j, &quot;eta&quot;],
      subsample = rgrid[j, &quot;subsample&quot;],
      colsample_bytree = rgrid[j, &quot;colsample_bytree&quot;],
      gamma = rgrid[j, &quot;gamma&quot;],
      min_child_weight = rgrid[j, &quot;min_child_weight&quot;],
      alpha = rgrid[j, &quot;alpha&quot;],
      lambda = rgrid[j, &quot;lambda&quot;],
      nthread = nc
    )
    
    dm_train &lt;- xgb.DMatrix(data = train_x_balanced, label = train_y_balanced)
    mdl &lt;- xgb.train(
      params = prm,
      data = dm_train,
      nrounds = rgrid[j, &quot;nrounds&quot;],
      verbose = FALSE
    )
    
    p &lt;- predict(mdl, xgb.DMatrix(data = val_x))
    pred &lt;- prediction(p, val_y)
    validation_results[j, i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
  }
  
  #cat(&quot;Mean AUC:&quot;, mean(validation_results[j,]), &quot;\n&quot;)
  #cat(&quot;SD AUC:&quot;, sd(validation_results[j,]), &quot;\n&quot;)
}

# Run 100 tests with best parameters
cat(&quot;\nRunning X test iterations with best parameters...\n&quot;)</code></pre>
<pre><code>## 
## Running X test iterations with best parameters...</code></pre>
<pre class="r"><code>test_aucs &lt;- c()

best_params_idx &lt;- which.max(rowMeans(validation_results))
best_params &lt;- rgrid[best_params_idx,]

# Train final model with best parameters
best_params_list &lt;- as.list(best_params[-which(names(best_params) == &quot;nrounds&quot;)])
best_params_list$booster &lt;- &quot;gbtree&quot;
best_params_list$objective &lt;- &quot;binary:logistic&quot;
best_params_list$nthread &lt;- nc

for(i in 1:100) {
  #cat(&quot;\nIteration&quot;, i, &quot;of 100\n&quot;)       
  # Create test split
  idx &lt;- unique(sample(nrow(xs), nrow(xs), T))
  train_x &lt;- xs[idx, ]
  train_y &lt;- y[idx]
  test_x &lt;- xs[-idx, ]
  test_y &lt;- y[-idx]
  
  # Undersample training data
  train_idx_0 &lt;- which(train_y == 0)
  train_idx_1 &lt;- which(train_y == 1)
  n_minority &lt;- length(train_idx_1)
  train_idx_0_sampled &lt;- sample(train_idx_0, n_minority)
  balanced_idx &lt;- c(train_idx_0_sampled, train_idx_1)
  
  # Create balanced training dataset
  train_x_balanced &lt;- train_x[balanced_idx, ]
  train_y_balanced &lt;- train_y[balanced_idx]
  
  # Train model
  dm_train &lt;- xgb.DMatrix(data = train_x_balanced, label = train_y_balanced)
  mdl &lt;- xgb.train(
    params = best_params_list,
    data = dm_train,
    nrounds = best_params[[&quot;nrounds&quot;]],
    verbose = FALSE
  )
  
  # Test on unbalanced test set
  p &lt;- predict(mdl, xgb.DMatrix(data = test_x))
  pred &lt;- prediction(p, test_y)
  test_aucs[i] &lt;- performance(pred, &quot;auc&quot;)@y.values[[1]]
}

# Print results
cat(&quot;\nTest Results over 100 iterations:\n&quot;)</code></pre>
<pre><code>## 
## Test Results over 100 iterations:</code></pre>
<pre class="r"><code>cat(&quot;Mean AUC:&quot;, mean(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## Mean AUC: 0.894789</code></pre>
<pre class="r"><code>cat(&quot;SD AUC:&quot;, sd(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## SD AUC: 0.003478208</code></pre>
<pre class="r"><code>cat(&quot;95% CI:&quot;, mean(test_aucs) - 1.96 * sd(test_aucs), 
    &quot;to&quot;, mean(test_aucs) + 1.96 * sd(test_aucs), &quot;\n&quot;)</code></pre>
<pre><code>## 95% CI: 0.8879717 to 0.9016062</code></pre>
<pre class="r"><code># Now train final model on full data for z scores
final_idx_0 &lt;- which(y == 0)
final_idx_1 &lt;- which(y == 1)
n_minority_final &lt;- length(final_idx_1)
final_idx_0_sampled &lt;- sample(final_idx_0, n_minority_final)
final_balanced_idx &lt;- c(final_idx_0_sampled, final_idx_1)

# Create balanced final dataset
xs_balanced &lt;- xs[final_balanced_idx, ]
y_balanced &lt;- y[final_balanced_idx]

dm_full &lt;- xgb.DMatrix(data = xs_balanced, label = y_balanced)
final_model &lt;- xgb.train(
  params = best_params_list,
  data = dm_full,
  nrounds = best_params[[&quot;nrounds&quot;]],
  verbose = FALSE
)

# Get probability predictions (z) for ALL data
z &lt;- predict(final_model, xgb.DMatrix(data = xs))</code></pre>
<pre class="r"><code># Calculate residuals for XGBoost predictions
y &lt;- as.numeric(as.character(select_data$attempt))
residuals &lt;- y - z

# Histogram of residuals
hist(residuals, main=&quot;Distribution of XGBoost Model Residuals&quot;, xlab=&quot;Residual&quot;, breaks=100)</code></pre>
<p><img src="heckman_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code># plot out the z values\
plot(density(z), 
     main = &quot;Density of Z Predictions&quot;,
     xlab = &quot;Predicted Probability of Attempt&quot;,
     ylab = &quot;Density&quot;)</code></pre>
<p><img src="heckman_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code># Calculate GIMR (lambda) This is Generalized inverse mills ratio
GIMR &lt;- dnorm(qnorm(z)) / (1 - pnorm(qnorm(z)))

# Add GIMR to the data
select_data[, GIMR := GIMR]

# Print variable importa</code></pre>
<pre class="r"><code># Create a data.table with just my_id and GIMR from select_data
GIMR_dt &lt;- data.table(my_id = select_data$my_id, GIMR = GIMR)

# Add GIMR to outcome_data by matching on my_id
outcome_data[GIMR_dt, GIMR := i.GIMR, on = &quot;my_id&quot;]</code></pre>
<div id="step-2-outcome_data" class="section level1">
<h1>step 2 outcome_data</h1>
<pre class="r"><code>#kill - my_id
outcome_data &lt;- outcome_data[, my_id := NULL]
outcome_data[, year2017_team_ARI := NULL]
outcome_data &lt;- outcome_data[, yardline_1_10:= NULL]</code></pre>
<pre class="r"><code>outcome_data[, conversion := as.numeric(as.character(conversion))]
# Then run OLS with GIMR correction
ols_model &lt;- lm(conversion ~  ., data = outcome_data)</code></pre>
<pre class="r"><code>library(sandwich)</code></pre>
<pre><code>## Warning: package &#39;sandwich&#39; was built under R version 4.3.3</code></pre>
<pre class="r"><code>library(lmtest)</code></pre>
<pre><code>## Warning: package &#39;lmtest&#39; was built under R version 4.3.3</code></pre>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## Warning: package &#39;zoo&#39; was built under R version 4.3.3</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<pre class="r"><code># Get HC0-adjusted t-values and p-values
robust_test &lt;- coeftest(ols_model, vcov = vcovHC(ols_model, type = &quot;HC0&quot;))
t_stats &lt;- robust_test[, &quot;t value&quot;]
p_values &lt;- robust_test[, &quot;Pr(&gt;|t|)&quot;]

# Function to add significance stars
get_stars &lt;- function(p) {
    if (p &lt;= 0.01) return(&quot;***&quot;)
    if (p &lt;= 0.05) return(&quot;**&quot;)
    if (p &lt;= 0.1) return(&quot;*&quot;)
    if (p &lt;= 0.15) return(&quot;.&quot;)
    return(&quot;&quot;)
}

# Maximum width for variable names
name_width &lt;- 20

# Print header with alignment
cat(sprintf(&quot;%-*s  %10s  %10s  %4s\n&quot;, name_width, &quot;Variable&quot;, &quot;t-value&quot;, &quot;p-value&quot;, &quot;sig&quot;))</code></pre>
<pre><code>## Variable                 t-value     p-value   sig</code></pre>
<pre class="r"><code>cat(sprintf(&quot;%-*s  %10s  %10s  %4s\n&quot;, name_width, &quot;---------&quot;, &quot;-------&quot;, &quot;-------&quot;, &quot;----&quot;))</code></pre>
<pre><code>## ---------                -------     -------  ----</code></pre>
<pre class="r"><code># Loop through and print values
for (i in 1:length(t_stats)) {
    var_name &lt;- rownames(robust_test)[i]
    # Truncate name if too long
    if (nchar(var_name) &gt; name_width) {
        var_name &lt;- paste0(substr(var_name, 1, name_width-3), &quot;...&quot;)
    }
    cat(sprintf(&quot;%-*s  %10.4f  %10.4f  %4s\n&quot;, 
                name_width, var_name, 
                t_stats[i], p_values[i],
                get_stars(p_values[i])))
}</code></pre>
<pre><code>## (Intercept)               1.6459      0.0999     *
## ydstogo                 -12.7395      0.0000   ***
## posteam_timeouts_...      1.1984      0.2308      
## defteam_timeouts_...      0.9128      0.3614      
## rush_attempt              7.0293      0.0000   ***
## week                      0.9579      0.3382      
## temp                     -0.5323      0.5946      
## wind                      0.9486      0.3429      
## vegas_wp                  1.5498      0.1213     .
## vegas_wp_posteam          0.7991      0.4243      
## total_line                2.2091      0.0272    **
## prep_days                 0.6791      0.4971      
## overall_win_pct          -0.0455      0.9637      
## team_win_pct              0.4446      0.6566      
## prev_shotgun_rate         1.0376      0.2995      
## prev_singleback_rate      0.5664      0.5712      
## prev_empty_rate           1.0819      0.2794      
## prev_shotgun_success     -1.6361      0.1019     .
## prev_singleback_s...      0.8947      0.3710      
## prev_empty_success        0.5347      0.5929      
## prev_stop_rate_run        0.6671      0.5048      
## prev_stop_rate_pass      -3.1635      0.0016   ***
## shotgun_rate              1.6923      0.0907     *
## singleback_rate           0.8731      0.3827      
## empty_rate                0.0506      0.9596      
## shotgun_success          -2.1116      0.0348    **
## singleback_success       -1.1752      0.2400      
## empty_success            -0.6020      0.5472      
## def_stop_rate_run         1.8947      0.0582     *
## def_stop_rate_pass       -1.0830      0.2789      
## avg_pass_rushers         -0.7974      0.4253      
## avg_box_defenders        -0.5862      0.5578      
## cover0_rate              -0.3847      0.7005      
## cover1_rate              -0.5015      0.6161      
## cover2_rate               0.0793      0.9368      
## cover3_rate               1.5466      0.1221     .
## cover4_rate               1.4254      0.1541      
## cover6_rate              -0.2846      0.7760      
## two_man_rate              1.4837      0.1380     .
## prevent_rate              2.6101      0.0091   ***
## home_attendance           0.1192      0.9051      
## roof_outdoors             0.0854      0.9319      
## posteam_type_away         0.8508      0.3949      
## offense_formation...      0.8434      0.3990      
## offense_formation...      0.2516      0.8014      
## offense_formation...      0.1388      0.8896      
## offense_player_1_...      2.7245      0.0065   ***
## offense_player_2_...     -1.3400      0.1803      
## offense_player_4_...      0.0079      0.9937      
## offense_player_5_...     -0.1403      0.8884      
## offense_player_6_...     -0.7152      0.4745      
## offense_player_8_...     -2.7707      0.0056   ***
## offense_player_9_...     -2.5362      0.0112    **
## offense_player_10...     -0.3979      0.6908      
## offense_player_11...     -0.8170      0.4140      
## offense_player_12...      3.1094      0.0019   ***
## offense_player_14...     -0.2531      0.8002      
## offense_player_15...     -1.0356      0.3005      
## offense_player_16...     -0.7839      0.4331      
## offense_player_17...     -0.7784      0.4364      
## offense_player_20...      0.2791      0.7802      
## offense_player_22...     -1.2989      0.1941      
## offense_player_23...      1.2332      0.2176      
## offense_player_24...     -5.8798      0.0000   ***
## offense_player_9_...     -2.2347      0.0255    **
## offense_player_9_...     -3.1311      0.0018   ***
## offense_player_9_...     -0.7261      0.4678      
## offense_player_9_...      1.7737      0.0762     *
## offense_player_9_...      1.4532      0.1462     .
## offense_player_1_...      1.2354      0.2168      
## offense_player_9_...      1.7000      0.0892     *
## offense_player_9_...     -0.7256      0.4681      
## offense_player_1_...      0.1145      0.9088      
## offense_player_1_...      0.7763      0.4376      
## offense_player_9_...      0.0351      0.9720      
## offense_player_9_...     -2.1962      0.0281    **
## offense_player_14...      0.5654      0.5718      
## offense_player_4_...      0.6623      0.5078      
## offense_player_8_...      2.0221      0.0432    **
## offense_player_9_...     -1.0130      0.3111      
## offense_player_9_...     -0.4650      0.6419      
## offense_player_14...      1.8864      0.0593     *
## offense_player_9_...      1.1643      0.2444      
## offense_player_9_...     -1.8649      0.0623     *
## offense_player_9_...      2.3006      0.0215    **
## defense_player_1_...     -1.7096      0.0874     *
## defense_player_2_...      1.7532      0.0796     *
## defense_player_3_...      0.3919      0.6951      
## defense_player_4_...     -1.0149      0.3102      
## defense_player_5_...     -1.2847      0.1990      
## defense_player_6_...     -0.6041      0.5458      
## defense_player_9_...      0.4407      0.6595      
## defense_player_10...     -0.1705      0.8646      
## defense_player_11...     -0.4880      0.6255      
## defense_player_12...     -0.2205      0.8255      
## defense_player_13...      2.2929      0.0219    **
## defense_player_14...      0.4615      0.6445      
## defense_player_15...      0.6469      0.5177      
## defense_player_16...      0.0894      0.9287      
## defense_player_17...      0.4336      0.6646      
## defense_player_18...      1.3869      0.1656      
## defense_player_19...      0.6504      0.5155      
## defense_player_20...     -0.7691      0.4419      
## defense_player_21...      1.4080      0.1592      
## defense_player_22...      0.9107      0.3625      
## defense_player_23...      1.0580      0.2901      
## defense_player_3_...     -0.2323      0.8163      
## defense_player_3_...     -0.7266      0.4675      
## defense_player_3_...      3.7118      0.0002   ***
## defense_player_3_...      0.5123      0.6085      
## defense_player_3_...     -3.4936      0.0005   ***
## defense_player_3_...      1.2641      0.2063      
## defense_player_3_...     -0.2861      0.7748      
## defense_player_3_...     -0.4980      0.6185      
## defense_player_3_...      0.0918      0.9269      
## defense_player_3_...      0.6175      0.5370      
## defense_player_3_...     -0.6629      0.5075      
## defense_player_3_...     -0.1285      0.8978      
## defense_player_3_...     -0.4259      0.6702      
## defense_player_3_...      1.4040      0.1604      
## defense_player_3_...     -1.6720      0.0946     *
## defense_player_3_...     -0.2240      0.8228      
## defense_player_3_...     -0.8038      0.4216      
## defense_player_3_...     -0.2079      0.8353      
## defense_player_3_...      1.0582      0.2900      
## defense_player_3_...     -0.7181      0.4727      
## defense_player_3_...      0.3740      0.7084      
## defense_player_20...      1.7445      0.0811     *
## defense_player_3_...      0.6512      0.5150      
## defense_player_3_...     -1.8211      0.0687     *
## defense_player_3_...     -0.1030      0.9179      
## yardline_11_20            2.3995      0.0165    **
## yardline_21_30            2.1938      0.0283    **
## yardline_31_40            2.3527      0.0187    **
## yardline_41_50            3.9236      0.0001   ***
## yardline_51_60            2.4646      0.0138    **
## yardline_61_70            3.2766      0.0011   ***
## yardline_71_80            3.3533      0.0008   ***
## yardline_81_90            3.2102      0.0013   ***
## yardline_91_100           1.2644      0.2062      
## year2017_team_BUF        -0.8105      0.4177      
## year2017_team_CHI         0.2889      0.7726      
## year2017_team_CLE         1.1023      0.2704      
## year2017_team_DAL        -1.0165      0.3095      
## year2017_team_DET        -0.4390      0.6607      
## year2017_team_GB          2.1626      0.0306    **
## year2017_team_HOU         1.3167      0.1880      
## year2017_team_MIA        -1.3772      0.1685      
## year2017_team_MIN        -0.7192      0.4721      
## year2017_team_NE         -0.2707      0.7866      
## year2017_team_SF          1.5477      0.1218     .
## year2017_team_BAL         0.1684      0.8663      
## year2017_team_DEN        -0.0072      0.9943      
## year2017_team_LA          0.1575      0.8749      
## year2017_team_NYG        -0.7280      0.4667      
## year2017_team_OAK        -0.9225      0.3563      
## year2017_team_SEA         0.6274      0.5305      
## year2017_team_CAR         0.4279      0.6687      
## year2017_team_CIN         0.9084      0.3637      
## year2017_team_IND         0.8693      0.3848      
## year2017_team_NO          0.7946      0.4269      
## year2017_team_PHI         0.5424      0.5876      
## year2017_team_PIT        -0.9493      0.3425      
## year2017_team_TEN        -0.1704      0.8647      
## year2017_team_WAS         0.2622      0.7932      
## year2017_team_KC          1.2567      0.2089      
## year2017_team_LAC        -0.3658      0.7145      
## year2017_team_NYJ         0.6918      0.4891      
## year2017_team_TB          0.0982      0.9218      
## year2017_team_ATL         0.0426      0.9660      
## year2017_team_JAX         0.3956      0.6924      
## year2018_team_ARI        -0.1439      0.8856      
## year2018_team_BAL         0.1604      0.8726      
## year2018_team_CAR         0.1108      0.9118      
## year2018_team_CLE        -0.2504      0.8023      
## year2018_team_DET         0.3116      0.7553      
## year2018_team_HOU         0.6175      0.5369      
## year2018_team_IND        -0.5598      0.5756      
## year2018_team_KC          0.3966      0.6917      
## year2018_team_NYG         0.4396      0.6602      
## year2018_team_OAK        -0.5053      0.6134      
## year2018_team_PHI         0.1399      0.8888      
## year2018_team_SEA        -0.5852      0.5585      
## year2018_team_BUF        -0.5485      0.5833      
## year2018_team_CHI        -0.1356      0.8921      
## year2018_team_CIN        -0.5537      0.5798      
## year2018_team_DAL        -0.3549      0.7227      
## year2018_team_DEN        -0.1492      0.8814      
## year2018_team_GB         -0.3488      0.7272      
## year2018_team_LAC        -0.1021      0.9187      
## year2018_team_NE         -0.3200      0.7490      
## year2018_team_NO          0.4019      0.6878      
## year2018_team_PIT         0.4376      0.6617      
## year2018_team_SF          0.3850      0.7002      
## year2018_team_MIA         0.1281      0.8981      
## year2018_team_MIN        -0.1444      0.8852      
## year2018_team_NYJ         0.4709      0.6377      
## year2018_team_TB          0.4387      0.6609      
## year2018_team_ATL         0.3120      0.7551      
## year2018_team_JAX        -0.1683      0.8663      
## year2018_team_LA         -0.9158      0.3599      
## year2018_team_TEN         0.3695      0.7118      
## year2018_team_WAS        -0.0608      0.9515      
## year2019_team_ARI        -0.4080      0.6833      
## year2019_team_BUF        -0.6352      0.5254      
## year2019_team_CHI         0.2229      0.8236      
## year2019_team_CLE         0.4798      0.6314      
## year2019_team_DAL        -0.4065      0.6844      
## year2019_team_IND        -0.5104      0.6098      
## year2019_team_JAX         0.2222      0.8242      
## year2019_team_KC         -0.0909      0.9276      
## year2019_team_LAC        -0.7556      0.4499      
## year2019_team_MIN        -0.6971      0.4858      
## year2019_team_NE          0.1719      0.8635      
## year2019_team_NO         -0.8944      0.3712      
## year2019_team_PHI        -0.1285      0.8977      
## year2019_team_SEA        -0.0570      0.9545      
## year2019_team_SF         -0.1199      0.9045      
## year2019_team_TB         -0.2644      0.7915      
## year2019_team_BAL         0.0942      0.9250      
## year2019_team_CAR        -0.3941      0.6936      
## year2019_team_DEN         0.3429      0.7317      
## year2019_team_DET        -0.6998      0.4841      
## year2019_team_HOU        -0.3945      0.6932      
## year2019_team_LA         -0.7123      0.4764      
## year2019_team_MIA        -1.2081      0.2271      
## year2019_team_NYG        -0.6002      0.5484      
## year2019_team_NYJ        -1.2449      0.2132      
## year2019_team_OAK        -0.4976      0.6188      
## year2019_team_PIT        -1.5864      0.1127     .
## year2019_team_TEN        -0.8086      0.4188      
## year2019_team_CIN         0.4475      0.6545      
## year2019_team_WAS        -0.4598      0.6457      
## year2019_team_ATL        -0.0329      0.9738      
## year2019_team_GB         -0.4935      0.6217      
## year2020_team_ATL         0.0958      0.9237      
## year2020_team_BAL         0.3994      0.6896      
## year2020_team_BUF         0.0047      0.9962      
## year2020_team_CAR         0.4607      0.6450      
## year2020_team_CIN         0.8676      0.3857      
## year2020_team_DEN        -0.3994      0.6896      
## year2020_team_DET        -0.6599      0.5093      
## year2020_team_JAX        -0.5378      0.5908      
## year2020_team_KC          0.2879      0.7735      
## year2020_team_LA         -0.9184      0.3585      
## year2020_team_MIN         0.5411      0.5885      
## year2020_team_NE         -0.4288      0.6681      
## year2020_team_NO          0.0391      0.9688      
## year2020_team_NYG        -0.0896      0.9286      
## year2020_team_SF         -0.0755      0.9398      
## year2020_team_WAS        -0.0541      0.9569      
## year2020_team_CHI        -0.0912      0.9273      
## year2020_team_DAL        -0.1098      0.9126      
## year2020_team_GB         -0.2276      0.8199      
## year2020_team_HOU        -0.4284      0.6684      
## year2020_team_MIA        -0.6985      0.4849      
## year2020_team_NYJ        -0.0827      0.9341      
## year2020_team_TB          0.3979      0.6908      
## year2020_team_TEN        -0.3479      0.7280      
## year2020_team_ARI         0.4039      0.6863      
## year2020_team_CLE        -0.9935      0.3205      
## year2020_team_IND        -0.3664      0.7141      
## year2020_team_LAC         0.2681      0.7886      
## year2020_team_PHI         0.3692      0.7120      
## year2020_team_SEA        -0.2771      0.7817      
## year2020_team_LV          0.4817      0.6301      
## year2020_team_PIT        -0.4680      0.6398      
## year2021_team_ATL        -0.9507      0.3418      
## year2021_team_BUF         0.3102      0.7564      
## year2021_team_CIN        -0.9326      0.3511      
## year2021_team_DAL        -0.2618      0.7935      
## year2021_team_DEN         0.0913      0.9273      
## year2021_team_DET        -0.3784      0.7051      
## year2021_team_KC          0.0322      0.9743      
## year2021_team_LA         -0.4413      0.6590      
## year2021_team_LV          0.2088      0.8346      
## year2021_team_MIN        -0.3160      0.7520      
## year2021_team_NE          0.2988      0.7651      
## year2021_team_NO         -0.2145      0.8302      
## year2021_team_NYG         0.1312      0.8956      
## year2021_team_SF         -0.1255      0.9001      
## year2021_team_TEN        -0.3717      0.7102      
## year2021_team_ARI         0.2650      0.7910      
## year2021_team_BAL         0.4697      0.6386      
## year2021_team_CAR        -0.4936      0.6216      
## year2021_team_CHI        -1.3029      0.1927      
## year2021_team_GB          0.3492      0.7269      
## year2021_team_IND        -0.3386      0.7349      
## year2021_team_LAC        -0.0051      0.9959      
## year2021_team_MIA         0.1610      0.8721      
## year2021_team_NYJ        -0.0709      0.9435      
## year2021_team_PHI        -0.8804      0.3787      
## year2021_team_SEA        -1.0710      0.2843      
## year2021_team_TB          0.0550      0.9562      
## year2021_team_WAS        -0.7067      0.4798      
## year2021_team_CLE        -0.7019      0.4828      
## year2021_team_HOU        -0.0585      0.9533      
## year2021_team_JAX        -0.1056      0.9159      
## year2021_team_PIT        -0.2461      0.8056      
## year2022_team_ARI        -1.2446      0.2133      
## year2022_team_ATL        -1.5070      0.1319     .
## year2022_team_CAR         0.2827      0.7774      
## year2022_team_CHI        -0.4921      0.6227      
## year2022_team_CIN        -0.6092      0.5425      
## year2022_team_HOU        -0.4851      0.6276      
## year2022_team_IND        -0.5784      0.5630      
## year2022_team_LAC        -0.5196      0.6034      
## year2022_team_MIA        -0.9124      0.3616      
## year2022_team_SEA        -0.2152      0.8296      
## year2022_team_TB          0.0201      0.9840      
## year2022_team_TEN         0.5356      0.5922      
## year2022_team_WAS        -0.3431      0.7316      
## year2022_team_BAL        -1.1067      0.2685      
## year2022_team_BUF         0.4416      0.6588      
## year2022_team_DAL        -0.0944      0.9248      
## year2022_team_DET        -0.4559      0.6485      
## year2022_team_GB         -0.8170      0.4140      
## year2022_team_JAX        -0.8131      0.4162      
## year2022_team_KC         -0.5594      0.5759      
## year2022_team_LA          0.5309      0.5956      
## year2022_team_LV          0.3848      0.7004      
## year2022_team_NO         -0.3171      0.7512      
## year2022_team_PHI         0.3125      0.7547      
## year2022_team_PIT         0.6133      0.5397      
## year2022_team_CLE        -0.1374      0.8907      
## year2022_team_DEN        -0.0596      0.9525      
## year2022_team_MIN        -0.5534      0.5801      
## year2022_team_NE          0.0368      0.9707      
## year2022_team_NYJ        -0.6956      0.4867      
## year2022_team_NYG        -0.5028      0.6151      
## year2022_team_SF         -1.0270      0.3045      
## year2023_team_BAL        -0.5928      0.5534      
## year2023_team_CHI        -0.9447      0.3449      
## year2023_team_CLE        -1.0303      0.3029      
## year2023_team_GB          0.0239      0.9809      
## year2023_team_IND         0.1057      0.9158      
## year2023_team_KC         -0.0182      0.9855      
## year2023_team_LAC         0.0373      0.9702      
## year2023_team_LV          0.0590      0.9530      
## year2023_team_MIA         0.1707      0.8645      
## year2023_team_MIN         0.5318      0.5949      
## year2023_team_NO         -0.4011      0.6884      
## year2023_team_NYG         0.2253      0.8218      
## year2023_team_SEA        -1.2944      0.1956      
## year2023_team_SF          0.0454      0.9638      
## year2023_team_WAS         0.3579      0.7204      
## year2023_team_ATL        -0.8704      0.3841      
## year2023_team_BUF        -0.5313      0.5952      
## year2023_team_CAR         0.0167      0.9867      
## year2023_team_DAL         0.1619      0.8714      
## year2023_team_DEN        -0.1775      0.8591      
## year2023_team_HOU        -0.0062      0.9951      
## year2023_team_LA          0.1093      0.9130      
## year2023_team_NE         -0.2465      0.8053      
## year2023_team_PHI        -0.3330      0.7391      
## year2023_team_PIT        -0.1995      0.8418      
## year2023_team_TEN        -0.1103      0.9121      
## year2023_team_ARI        -1.1680      0.2429      
## year2023_team_CIN        -0.7798      0.4356      
## year2023_team_DET        -0.0095      0.9924      
## year2023_team_TB          0.3458      0.7295      
## year2023_team_JAX        -0.7966      0.4257      
## year2023_team_NYJ         0.4758      0.6343      
## is_first_half            -1.0776      0.2813      
## time_in_half              1.4227      0.1549      
## GIMR                      2.0849      0.0371    **</code></pre>
<pre class="r"><code>cat(&quot;\nSignificance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15&quot;)</code></pre>
<pre><code>## 
## Significance codes: 0 &#39;***&#39; 0.01 &#39;**&#39; 0.05 &#39;*&#39; 0.1 &#39;.&#39; 0.15</code></pre>
<pre class="r"><code># get vifs
#library(car)
#vif(ols_model)</code></pre>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIkhlY2ttYW4gU2VsZWN0aW9uIE1vZGVsIEFuYWx5c2lzIg0Kb3V0cHV0OiBodG1sX2RvY3VtZW50DQotLS0NCg0KYGBge3Igb3B0aW9ucywgaW5jbHVkZT1GQUxTRX0NCm9wdGlvbnMobWF4LnByaW50PTEwMDAwKQ0KYGBgDQoNCmBgYHtyfQ0KbGlicmFyeShkYXRhLnRhYmxlKQ0Kb3V0Y29tZV9kYXRhIDwtIGZyZWFkKCJwcmVkaWN0X291dGNvbWUuY3N2Lmd6IikNCnNlbGVjdF9kYXRhIDwtIGZyZWFkKCJwcmVkaWN0X3NlbGVjdC5jc3YuZ3oiKQ0KYGBgDQoNCmBgYHtyfQ0Kc2VsZWN0X2RhdGFbLCBhdHRlbXB0IDo9IGFzLm51bWVyaWMoYXMuY2hhcmFjdGVyKGF0dGVtcHQpKV0NCmBgYA0KDQpgYGB7cn0NCiMgTG9hZCByZXF1aXJlZCBsaWJyYXJpZXMNCmxpYnJhcnkoZGF0YS50YWJsZSkNCmxpYnJhcnkoeGdib29zdCkNCmxpYnJhcnkoUk9DUikNCmxpYnJhcnkocGFyYWxsZWwpDQoNCiMgUHJlcGFyZSB0aGUgWEdCb29zdCBtYXRyaWNlcw0KeHMgPC0gbW9kZWwubWF0cml4KH4gLiAtIDEgLSBhdHRlbXB0IC0gbXlfaWQsIGRhdGEgPSBzZWxlY3RfZGF0YSkNCnkgPC0gYXMubnVtZXJpYyhhcy5jaGFyYWN0ZXIoc2VsZWN0X2RhdGEkYXR0ZW1wdCkpDQoNCiMgQ3JlYXRlIHBhcmFtZXRlciBncmlkDQpncmlkIDwtIGV4cGFuZC5ncmlkKA0KICBldGEgPSBzZXEoMC4wMDEsIDAuMSwgYnkgPSAwLjAxKSwNCiAgbWF4X2RlcHRoID0gc2VxKDUsIDcsIGJ5ID0gMiksDQogIG1pbl9jaGlsZF93ZWlnaHQgPSBzZXEoMSwgMSwgYnkgPSAxKSwgICAgICAgIA0KICBzdWJzYW1wbGUgPSBzZXEoMC44LCAwLjgsIGJ5ID0gMC4yKSwNCiAgY29sc2FtcGxlX2J5dHJlZSA9IHNlcSgwLjgsIDAuOCwgYnkgPSAwLjIpLA0KICBsYW1iZGEgPSBzZXEoMSwgMSwgYnkgPSAxKSwgICAgICAgICAgICAgICAgDQogIGFscGhhID0gc2VxKDAsIDAsIGJ5ID0gMSksICAgICAgICAgICAgICAgICAgDQogIGdhbW1hID0gc2VxKDAsIDAsIGJ5ID0gMC4xKSwgICAgICAgICAgICAgICANCiAgbnJvdW5kcyA9IHNlcSgxMDAsIDUwMCwgYnkgPSA1MCkNCikNCg0KIyBTYW1wbGUgZ3JpZCBwb2ludHMNCmNvbmZfbGV2IDwtIC45NQ0KbnVtX21heCA8LSA1DQpuIDwtIGNlaWxpbmcobG9nKDEtY29uZl9sZXYpL2xvZygxLW51bV9tYXgvbnJvdyhncmlkKSkpDQppbmQgPC0gc2FtcGxlKG5yb3coZ3JpZCksIG4sIHJlcGxhY2UgPSBGQUxTRSkNCnJncmlkIDwtIGdyaWRbaW5kLCBdDQoNCiMgU2V0IHVwIHBhcmFsbGVsIHByb2Nlc3NpbmcNCm5jIDwtIGRldGVjdENvcmVzKCkgLSAxDQoNCiMgVmFsaWRhdGlvbiBwaGFzZQ0KY2F0KCJcblBoYXNlIDE6IFZhbGlkYXRpb24gUGhhc2VcbiIpDQpuX3ZhbGlkYXRpb25zIDwtIDIwDQp2YWxpZGF0aW9uX3Jlc3VsdHMgPC0gbWF0cml4KG5yb3cgPSBucm93KHJncmlkKSwgbmNvbCA9IG5fdmFsaWRhdGlvbnMpDQoNCmZvciAoaiBpbiAxOm5yb3cocmdyaWQpKSB7DQogICNjYXQoIlxuVGVzdGluZyBwYXJhbWV0ZXIgc2V0IiwgaiwgIm9mIiwgbnJvdyhyZ3JpZCksICJcbiIpDQogIA0KICBmb3IgKGkgaW4gMTpuX3ZhbGlkYXRpb25zKSB7DQogICAgIyBDcmVhdGUgdmFsaWRhdGlvbiBzcGxpdA0KICAgIGlkeCA8LSB1bmlxdWUoc2FtcGxlKG5yb3coeHMpLCBucm93KHhzKSwgVCkpDQogICAgdHJhaW5feCA8LSB4c1tpZHgsIF0NCiAgICB0cmFpbl95IDwtIHlbaWR4XQ0KICAgIHZhbF94IDwtIHhzWy1pZHgsIF0NCiAgICB2YWxfeSA8LSB5Wy1pZHhdDQogICAgDQogICAgIyBVbmRlcnNhbXBsZSBtYWpvcml0eSBjbGFzcyBpbiB0cmFpbmluZyBkYXRhDQogICAgdHJhaW5faWR4XzAgPC0gd2hpY2godHJhaW5feSA9PSAwKQ0KICAgIHRyYWluX2lkeF8xIDwtIHdoaWNoKHRyYWluX3kgPT0gMSkNCiAgICANCiAgICAjIEdldCBudW1iZXIgb2YgbWlub3JpdHkgY2xhc3Mgc2FtcGxlcw0KICAgIG5fbWlub3JpdHkgPC0gbGVuZ3RoKHRyYWluX2lkeF8xKQ0KICAgIA0KICAgICMgUmFuZG9tbHkgc2FtcGxlIGZyb20gbWFqb3JpdHkgY2xhc3MNCiAgICB0cmFpbl9pZHhfMF9zYW1wbGVkIDwtIHNhbXBsZSh0cmFpbl9pZHhfMCwgbl9taW5vcml0eSkNCiAgICANCiAgICAjIENvbWJpbmUgaW5kaWNlcyBmb3IgYmFsYW5jZWQgZGF0YXNldA0KICAgIGJhbGFuY2VkX2lkeCA8LSBjKHRyYWluX2lkeF8wX3NhbXBsZWQsIHRyYWluX2lkeF8xKQ0KICAgIA0KICAgICMgQ3JlYXRlIGJhbGFuY2VkIHRyYWluaW5nIGRhdGFzZXQNCiAgICB0cmFpbl94X2JhbGFuY2VkIDwtIHRyYWluX3hbYmFsYW5jZWRfaWR4LCBdDQogICAgdHJhaW5feV9iYWxhbmNlZCA8LSB0cmFpbl95W2JhbGFuY2VkX2lkeF0NCiAgICANCiAgICBwcm0gPC0gbGlzdCgNCiAgICAgIGJvb3N0ZXIgPSAiZ2J0cmVlIiwNCiAgICAgIG9iamVjdGl2ZSA9ICJiaW5hcnk6bG9naXN0aWMiLA0KICAgICAgbWF4X2RlcHRoID0gcmdyaWRbaiwgIm1heF9kZXB0aCJdLA0KICAgICAgZXRhID0gcmdyaWRbaiwgImV0YSJdLA0KICAgICAgc3Vic2FtcGxlID0gcmdyaWRbaiwgInN1YnNhbXBsZSJdLA0KICAgICAgY29sc2FtcGxlX2J5dHJlZSA9IHJncmlkW2osICJjb2xzYW1wbGVfYnl0cmVlIl0sDQogICAgICBnYW1tYSA9IHJncmlkW2osICJnYW1tYSJdLA0KICAgICAgbWluX2NoaWxkX3dlaWdodCA9IHJncmlkW2osICJtaW5fY2hpbGRfd2VpZ2h0Il0sDQogICAgICBhbHBoYSA9IHJncmlkW2osICJhbHBoYSJdLA0KICAgICAgbGFtYmRhID0gcmdyaWRbaiwgImxhbWJkYSJdLA0KICAgICAgbnRocmVhZCA9IG5jDQogICAgKQ0KICAgIA0KICAgIGRtX3RyYWluIDwtIHhnYi5ETWF0cml4KGRhdGEgPSB0cmFpbl94X2JhbGFuY2VkLCBsYWJlbCA9IHRyYWluX3lfYmFsYW5jZWQpDQogICAgbWRsIDwtIHhnYi50cmFpbigNCiAgICAgIHBhcmFtcyA9IHBybSwNCiAgICAgIGRhdGEgPSBkbV90cmFpbiwNCiAgICAgIG5yb3VuZHMgPSByZ3JpZFtqLCAibnJvdW5kcyJdLA0KICAgICAgdmVyYm9zZSA9IEZBTFNFDQogICAgKQ0KICAgIA0KICAgIHAgPC0gcHJlZGljdChtZGwsIHhnYi5ETWF0cml4KGRhdGEgPSB2YWxfeCkpDQogICAgcHJlZCA8LSBwcmVkaWN0aW9uKHAsIHZhbF95KQ0KICAgIHZhbGlkYXRpb25fcmVzdWx0c1tqLCBpXSA8LSBwZXJmb3JtYW5jZShwcmVkLCAiYXVjIilAeS52YWx1ZXNbWzFdXQ0KICB9DQogIA0KICAjY2F0KCJNZWFuIEFVQzoiLCBtZWFuKHZhbGlkYXRpb25fcmVzdWx0c1tqLF0pLCAiXG4iKQ0KICAjY2F0KCJTRCBBVUM6Iiwgc2QodmFsaWRhdGlvbl9yZXN1bHRzW2osXSksICJcbiIpDQp9DQoNCiMgUnVuIDEwMCB0ZXN0cyB3aXRoIGJlc3QgcGFyYW1ldGVycw0KY2F0KCJcblJ1bm5pbmcgWCB0ZXN0IGl0ZXJhdGlvbnMgd2l0aCBiZXN0IHBhcmFtZXRlcnMuLi5cbiIpDQp0ZXN0X2F1Y3MgPC0gYygpDQoNCmJlc3RfcGFyYW1zX2lkeCA8LSB3aGljaC5tYXgocm93TWVhbnModmFsaWRhdGlvbl9yZXN1bHRzKSkNCmJlc3RfcGFyYW1zIDwtIHJncmlkW2Jlc3RfcGFyYW1zX2lkeCxdDQoNCiMgVHJhaW4gZmluYWwgbW9kZWwgd2l0aCBiZXN0IHBhcmFtZXRlcnMNCmJlc3RfcGFyYW1zX2xpc3QgPC0gYXMubGlzdChiZXN0X3BhcmFtc1std2hpY2gobmFtZXMoYmVzdF9wYXJhbXMpID09ICJucm91bmRzIildKQ0KYmVzdF9wYXJhbXNfbGlzdCRib29zdGVyIDwtICJnYnRyZWUiDQpiZXN0X3BhcmFtc19saXN0JG9iamVjdGl2ZSA8LSAiYmluYXJ5OmxvZ2lzdGljIg0KYmVzdF9wYXJhbXNfbGlzdCRudGhyZWFkIDwtIG5jDQoNCmZvcihpIGluIDE6MTAwKSB7DQogICNjYXQoIlxuSXRlcmF0aW9uIiwgaSwgIm9mIDEwMFxuIikgICAgICAgDQogICMgQ3JlYXRlIHRlc3Qgc3BsaXQNCiAgaWR4IDwtIHVuaXF1ZShzYW1wbGUobnJvdyh4cyksIG5yb3coeHMpLCBUKSkNCiAgdHJhaW5feCA8LSB4c1tpZHgsIF0NCiAgdHJhaW5feSA8LSB5W2lkeF0NCiAgdGVzdF94IDwtIHhzWy1pZHgsIF0NCiAgdGVzdF95IDwtIHlbLWlkeF0NCiAgDQogICMgVW5kZXJzYW1wbGUgdHJhaW5pbmcgZGF0YQ0KICB0cmFpbl9pZHhfMCA8LSB3aGljaCh0cmFpbl95ID09IDApDQogIHRyYWluX2lkeF8xIDwtIHdoaWNoKHRyYWluX3kgPT0gMSkNCiAgbl9taW5vcml0eSA8LSBsZW5ndGgodHJhaW5faWR4XzEpDQogIHRyYWluX2lkeF8wX3NhbXBsZWQgPC0gc2FtcGxlKHRyYWluX2lkeF8wLCBuX21pbm9yaXR5KQ0KICBiYWxhbmNlZF9pZHggPC0gYyh0cmFpbl9pZHhfMF9zYW1wbGVkLCB0cmFpbl9pZHhfMSkNCiAgDQogICMgQ3JlYXRlIGJhbGFuY2VkIHRyYWluaW5nIGRhdGFzZXQNCiAgdHJhaW5feF9iYWxhbmNlZCA8LSB0cmFpbl94W2JhbGFuY2VkX2lkeCwgXQ0KICB0cmFpbl95X2JhbGFuY2VkIDwtIHRyYWluX3lbYmFsYW5jZWRfaWR4XQ0KICANCiAgIyBUcmFpbiBtb2RlbA0KICBkbV90cmFpbiA8LSB4Z2IuRE1hdHJpeChkYXRhID0gdHJhaW5feF9iYWxhbmNlZCwgbGFiZWwgPSB0cmFpbl95X2JhbGFuY2VkKQ0KICBtZGwgPC0geGdiLnRyYWluKA0KICAgIHBhcmFtcyA9IGJlc3RfcGFyYW1zX2xpc3QsDQogICAgZGF0YSA9IGRtX3RyYWluLA0KICAgIG5yb3VuZHMgPSBiZXN0X3BhcmFtc1tbIm5yb3VuZHMiXV0sDQogICAgdmVyYm9zZSA9IEZBTFNFDQogICkNCiAgDQogICMgVGVzdCBvbiB1bmJhbGFuY2VkIHRlc3Qgc2V0DQogIHAgPC0gcHJlZGljdChtZGwsIHhnYi5ETWF0cml4KGRhdGEgPSB0ZXN0X3gpKQ0KICBwcmVkIDwtIHByZWRpY3Rpb24ocCwgdGVzdF95KQ0KICB0ZXN0X2F1Y3NbaV0gPC0gcGVyZm9ybWFuY2UocHJlZCwgImF1YyIpQHkudmFsdWVzW1sxXV0NCn0NCg0KIyBQcmludCByZXN1bHRzDQpjYXQoIlxuVGVzdCBSZXN1bHRzIG92ZXIgMTAwIGl0ZXJhdGlvbnM6XG4iKQ0KY2F0KCJNZWFuIEFVQzoiLCBtZWFuKHRlc3RfYXVjcyksICJcbiIpDQpjYXQoIlNEIEFVQzoiLCBzZCh0ZXN0X2F1Y3MpLCAiXG4iKQ0KY2F0KCI5NSUgQ0k6IiwgbWVhbih0ZXN0X2F1Y3MpIC0gMS45NiAqIHNkKHRlc3RfYXVjcyksIA0KICAgICJ0byIsIG1lYW4odGVzdF9hdWNzKSArIDEuOTYgKiBzZCh0ZXN0X2F1Y3MpLCAiXG4iKQ0KDQojIE5vdyB0cmFpbiBmaW5hbCBtb2RlbCBvbiBmdWxsIGRhdGEgZm9yIHogc2NvcmVzDQpmaW5hbF9pZHhfMCA8LSB3aGljaCh5ID09IDApDQpmaW5hbF9pZHhfMSA8LSB3aGljaCh5ID09IDEpDQpuX21pbm9yaXR5X2ZpbmFsIDwtIGxlbmd0aChmaW5hbF9pZHhfMSkNCmZpbmFsX2lkeF8wX3NhbXBsZWQgPC0gc2FtcGxlKGZpbmFsX2lkeF8wLCBuX21pbm9yaXR5X2ZpbmFsKQ0KZmluYWxfYmFsYW5jZWRfaWR4IDwtIGMoZmluYWxfaWR4XzBfc2FtcGxlZCwgZmluYWxfaWR4XzEpDQoNCiMgQ3JlYXRlIGJhbGFuY2VkIGZpbmFsIGRhdGFzZXQNCnhzX2JhbGFuY2VkIDwtIHhzW2ZpbmFsX2JhbGFuY2VkX2lkeCwgXQ0KeV9iYWxhbmNlZCA8LSB5W2ZpbmFsX2JhbGFuY2VkX2lkeF0NCg0KZG1fZnVsbCA8LSB4Z2IuRE1hdHJpeChkYXRhID0geHNfYmFsYW5jZWQsIGxhYmVsID0geV9iYWxhbmNlZCkNCmZpbmFsX21vZGVsIDwtIHhnYi50cmFpbigNCiAgcGFyYW1zID0gYmVzdF9wYXJhbXNfbGlzdCwNCiAgZGF0YSA9IGRtX2Z1bGwsDQogIG5yb3VuZHMgPSBiZXN0X3BhcmFtc1tbIm5yb3VuZHMiXV0sDQogIHZlcmJvc2UgPSBGQUxTRQ0KKQ0KDQojIEdldCBwcm9iYWJpbGl0eSBwcmVkaWN0aW9ucyAoeikgZm9yIEFMTCBkYXRhDQp6IDwtIHByZWRpY3QoZmluYWxfbW9kZWwsIHhnYi5ETWF0cml4KGRhdGEgPSB4cykpDQpgYGANCg0KYGBge3J9DQojIENhbGN1bGF0ZSByZXNpZHVhbHMgZm9yIFhHQm9vc3QgcHJlZGljdGlvbnMNCnkgPC0gYXMubnVtZXJpYyhhcy5jaGFyYWN0ZXIoc2VsZWN0X2RhdGEkYXR0ZW1wdCkpDQpyZXNpZHVhbHMgPC0geSAtIHoNCg0KIyBIaXN0b2dyYW0gb2YgcmVzaWR1YWxzDQpoaXN0KHJlc2lkdWFscywgbWFpbj0iRGlzdHJpYnV0aW9uIG9mIFhHQm9vc3QgTW9kZWwgUmVzaWR1YWxzIiwgeGxhYj0iUmVzaWR1YWwiLCBicmVha3M9MTAwKQ0KYGBgDQoNCmBgYHtyfQ0KIyBwbG90IG91dCB0aGUgeiB2YWx1ZXNcDQpwbG90KGRlbnNpdHkoeiksIA0KICAgICBtYWluID0gIkRlbnNpdHkgb2YgWiBQcmVkaWN0aW9ucyIsDQogICAgIHhsYWIgPSAiUHJlZGljdGVkIFByb2JhYmlsaXR5IG9mIEF0dGVtcHQiLA0KICAgICB5bGFiID0gIkRlbnNpdHkiKQ0KYGBgDQoNCmBgYHtyfQ0KIyBDYWxjdWxhdGUgR0lNUiAobGFtYmRhKSBUaGlzIGlzIEdlbmVyYWxpemVkIGludmVyc2UgbWlsbHMgcmF0aW8NCkdJTVIgPC0gZG5vcm0ocW5vcm0oeikpIC8gKDEgLSBwbm9ybShxbm9ybSh6KSkpDQoNCiMgQWRkIEdJTVIgdG8gdGhlIGRhdGENCnNlbGVjdF9kYXRhWywgR0lNUiA6PSBHSU1SXQ0KDQojIFByaW50IHZhcmlhYmxlIGltcG9ydGENCmBgYA0KDQpgYGB7cn0NCiMgQ3JlYXRlIGEgZGF0YS50YWJsZSB3aXRoIGp1c3QgbXlfaWQgYW5kIEdJTVIgZnJvbSBzZWxlY3RfZGF0YQ0KR0lNUl9kdCA8LSBkYXRhLnRhYmxlKG15X2lkID0gc2VsZWN0X2RhdGEkbXlfaWQsIEdJTVIgPSBHSU1SKQ0KDQojIEFkZCBHSU1SIHRvIG91dGNvbWVfZGF0YSBieSBtYXRjaGluZyBvbiBteV9pZA0Kb3V0Y29tZV9kYXRhW0dJTVJfZHQsIEdJTVIgOj0gaS5HSU1SLCBvbiA9ICJteV9pZCJdDQpgYGANCg0KIyBzdGVwIDIgb3V0Y29tZV9kYXRhDQoNCmBgYHtyfQ0KI2tpbGwgLSBteV9pZA0Kb3V0Y29tZV9kYXRhIDwtIG91dGNvbWVfZGF0YVssIG15X2lkIDo9IE5VTExdDQpvdXRjb21lX2RhdGFbLCB5ZWFyMjAxN190ZWFtX0FSSSA6PSBOVUxMXQ0Kb3V0Y29tZV9kYXRhIDwtIG91dGNvbWVfZGF0YVssIHlhcmRsaW5lXzFfMTA6PSBOVUxMXQ0KYGBgDQoNCmBgYHtyfQ0Kb3V0Y29tZV9kYXRhWywgY29udmVyc2lvbiA6PSBhcy5udW1lcmljKGFzLmNoYXJhY3Rlcihjb252ZXJzaW9uKSldDQojIFRoZW4gcnVuIE9MUyB3aXRoIEdJTVIgY29ycmVjdGlvbg0Kb2xzX21vZGVsIDwtIGxtKGNvbnZlcnNpb24gfiAgLiwgZGF0YSA9IG91dGNvbWVfZGF0YSkNCmBgYA0KDQpgYGB7cn0NCmxpYnJhcnkoc2FuZHdpY2gpDQpsaWJyYXJ5KGxtdGVzdCkNCg0KIyBHZXQgSEMwLWFkanVzdGVkIHQtdmFsdWVzIGFuZCBwLXZhbHVlcw0Kcm9idXN0X3Rlc3QgPC0gY29lZnRlc3Qob2xzX21vZGVsLCB2Y292ID0gdmNvdkhDKG9sc19tb2RlbCwgdHlwZSA9ICJIQzAiKSkNCnRfc3RhdHMgPC0gcm9idXN0X3Rlc3RbLCAidCB2YWx1ZSJdDQpwX3ZhbHVlcyA8LSByb2J1c3RfdGVzdFssICJQcig+fHR8KSJdDQoNCiMgRnVuY3Rpb24gdG8gYWRkIHNpZ25pZmljYW5jZSBzdGFycw0KZ2V0X3N0YXJzIDwtIGZ1bmN0aW9uKHApIHsNCiAgICBpZiAocCA8PSAwLjAxKSByZXR1cm4oIioqKiIpDQogICAgaWYgKHAgPD0gMC4wNSkgcmV0dXJuKCIqKiIpDQogICAgaWYgKHAgPD0gMC4xKSByZXR1cm4oIioiKQ0KICAgIGlmIChwIDw9IDAuMTUpIHJldHVybigiLiIpDQogICAgcmV0dXJuKCIiKQ0KfQ0KDQojIE1heGltdW0gd2lkdGggZm9yIHZhcmlhYmxlIG5hbWVzDQpuYW1lX3dpZHRoIDwtIDIwDQoNCiMgUHJpbnQgaGVhZGVyIHdpdGggYWxpZ25tZW50DQpjYXQoc3ByaW50ZigiJS0qcyAgJTEwcyAgJTEwcyAgJTRzXG4iLCBuYW1lX3dpZHRoLCAiVmFyaWFibGUiLCAidC12YWx1ZSIsICJwLXZhbHVlIiwgInNpZyIpKQ0KY2F0KHNwcmludGYoIiUtKnMgICUxMHMgICUxMHMgICU0c1xuIiwgbmFtZV93aWR0aCwgIi0tLS0tLS0tLSIsICItLS0tLS0tIiwgIi0tLS0tLS0iLCAiLS0tLSIpKQ0KDQojIExvb3AgdGhyb3VnaCBhbmQgcHJpbnQgdmFsdWVzDQpmb3IgKGkgaW4gMTpsZW5ndGgodF9zdGF0cykpIHsNCiAgICB2YXJfbmFtZSA8LSByb3duYW1lcyhyb2J1c3RfdGVzdClbaV0NCiAgICAjIFRydW5jYXRlIG5hbWUgaWYgdG9vIGxvbmcNCiAgICBpZiAobmNoYXIodmFyX25hbWUpID4gbmFtZV93aWR0aCkgew0KICAgICAgICB2YXJfbmFtZSA8LSBwYXN0ZTAoc3Vic3RyKHZhcl9uYW1lLCAxLCBuYW1lX3dpZHRoLTMpLCAiLi4uIikNCiAgICB9DQogICAgY2F0KHNwcmludGYoIiUtKnMgICUxMC40ZiAgJTEwLjRmICAlNHNcbiIsIA0KICAgICAgICAgICAgICAgIG5hbWVfd2lkdGgsIHZhcl9uYW1lLCANCiAgICAgICAgICAgICAgICB0X3N0YXRzW2ldLCBwX3ZhbHVlc1tpXSwNCiAgICAgICAgICAgICAgICBnZXRfc3RhcnMocF92YWx1ZXNbaV0pKSkNCn0NCg0KY2F0KCJcblNpZ25pZmljYW5jZSBjb2RlczogMCAnKioqJyAwLjAxICcqKicgMC4wNSAnKicgMC4xICcuJyAwLjE1IikNCmBgYA0KDQpgYGB7cn0NCiMgZ2V0IHZpZnMNCiNsaWJyYXJ5KGNhcikNCiN2aWYob2xzX21vZGVsKQ0KYGBgDQo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("heckman.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
